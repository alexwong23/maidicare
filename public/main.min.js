$(document).ready(function(){function e(){var e=window.navigator.userAgent,a=e.indexOf("MSIE "),t=e.indexOf("Trident/"),o=e.indexOf("Edge/");return a>0||t>0||o>0?!0:void 0}function a(e){swal({title:"Error",text:e,type:"error",confirmButtonColor:"rgb(221, 75, 57)"})}function t(e){swal({title:"Success",text:e,type:"success",confirmButtonColor:"rgb(38, 166, 91)"})}function o(e){var a=/[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;return a.test(e)}function n(e){var a=new Date,t=new Date(e),o=a.getFullYear()-t.getFullYear(),n=a.getMonth()-t.getMonth();return(0>n||0===n&&a.getDate()<t.getDate())&&o--,o}function i(e){$(e).css({"border-color":"#ccc",color:"#555",border:"1px solid #ccc"})}function r(e){$(e).css({color:"#a94442",border:"2px solid #a94442"})}function l(e){$(e).css({color:"#8a6d3b",border:"2px solid #F7CA18"})}function s(e,a,t){var o=e+'[name="'+a+'"]',n=$(o).val();return n.length>t?(l(o),!0):(i(o),!1)}function c(e,a,t){var o,n=a+'[name="'+t+'"]',r=$(n).val();if(e){var s=new RegExp(/^(\s*|\d+)$/);s.test(r)?(i(n),o=!1):(l(n),o=!0)}else{var c=new RegExp(/^\d+$/);c.test(r)?(i(n),o=!1):(l(n),o=!0)}return o}function p(e,a){var t=e+'[name="'+a+'"]',o=$(t).val();return o.length>0?(i(t),!1):(r(t),!0)}function u(e,a){var t=e+'[name="'+a+'"]',o=+$(t).val();return o>0?(i(t),!1):(r(t),!0)}function d(){function e(e,a){""===e?r("select#dob-"+a):i("select#dob-"+a)}var a=$("select#dob-date").val(),t=$("select#dob-month").val(),o=$("select#dob-year").val();return""!==a&&""!==t&&""!==o?(i("select#dob-date"),i("select#dob-month"),i("select#dob-year"),!1):(e(a,"date"),e(t,"month"),e(o,"year"),!0)}function f(){$(window).width()>768&&$(".dropdown").on({mouseenter:function(){$(this).find(".dropdown-menu").stop(!0,!0).delay(150).fadeIn(500)},mouseleave:function(){$(this).find(".dropdown-menu").stop(!0,!0).delay(150).fadeOut(500)}})}function h(e){$(e).css("color","#717f86"),$(e).find(".right-addon").remove(),$(e).removeClass("has-error has-success has-warning")}function m(e){h(e),$(e).css("color","#3c763d"),$(e).addClass("has-success"),$(e).append('<i class="right-addon glyphicon glyphicon-ok"></i>')}function g(e){h(e),$(e).css("color","#a94442"),$(e).addClass("has-error"),$(e).append('<i class="right-addon glyphicon glyphicon-remove"></i>')}function v(e){h(e),$(e).css("color","#8a6d3b"),$(e).addClass("has-warning"),$(e).append('<i class="right-addon glyphicon glyphicon-warning-sign"></i>')}function b(e){$(e).css({visibility:"hidden",color:"#717f86"}),$(e).text("label")}function w(e,a){b(e),$(e).css({visibility:"visible",color:"#a94442"}),$(e).text(a)}function y(e,a){b(e),$(e).css({visibility:"visible",color:"#8a6d3b"}),$(e).text(a)}function x(e){return $(".roleSelect > p").css({"font-size":"15px","font-weight":"400",color:"#717f86"}),"helper"!==e&&"employer"!==e?($(".roleSelect > p").css({"font-size":"18px","font-weight":"bolder",color:"#a94442"}),!1):void 0}function k(e,t,n){return n.length<1?(h(e),b(t),!1):o(n)?void $.ajax({url:"/users/emailtaken",type:"POST",cache:!1,data:JSON.stringify({email:n}),dataType:"json",contentType:"application/json",success:function(a){return"success"!==a.status?(g(e),w(t,"Email has been taken."),!1):(m(e),void b(t))},error:function(e){e&&a("Something went wrong! Please refresh the page and try again.")}}):(g(e),w(t,"Please provide a valid email"),!1)}function j(e,a,t){var o=new RegExp(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9, !@#$%^&*]).{6,}$/);return t.length<1?(h(e),b(a),!1):t.length<6?(g(e),w(a,"Minimum 6 characters"),!1):void(o.test(t)===!1?(v(e),y(a,"Password not strong")):(m(e),b(a)))}function S(e,a,t,o){return o.length<1?(h(e),b(a),!1):t!==o?(g(e),w(a,"Passwords do not match"),!1):void 0}function T(e){for(var a=e.slice(1,8),t=a.split("").map(function(e){return parseInt(e,10)}),o=[2,7,6,5,4,3,2],n=0,i=0;i<t.length;i++)n+=t[i]*o[i];var r=e.slice(0,1).toUpperCase();("T"===r||"G"===r)&&(n+=4);var l=11-n%11,s=["A","B","C","D","E","F","G","H","I","Z","J"];("F"===r||"G"===r)&&(s=["K","L","M","N","P","Q","R","T","U","W","X"]);var c=s.slice(l-1,l).toString(),p=e.slice(8,9).toUpperCase();return c===p?!0:!1}function C(e,a){var t=new RegExp(/^([S,T,s,t][0-9]{7}[A-J,Z,a-j,z])$|^([F,G,f,g][0-9]{7}[K-R,T-X,k-r,t-x])$/),o=".local-signup .identification",n=".local-signup .form-group-text.tidentification";if(a.length<1)return h(o),b(n),!1;if("helper"===e)m(o),b(n);else{if("employer"!==e||!t.test(a)||!T(a))return"helper"===e||"employer"===e?(g(o),w(n,"Invalid Identification"),!1):(g(o),w(n,"Please choose a role"),!1);m(o),b(n)}}function P(){var e=$("input[name='user[local][email]']").val(),a=$("input[name='user[local][password]']").val(),t=$("input[name='user[local][confirm]']").val(),o=$("input[name='user[local][role]']:checked").val(),n=$("input[name='user[local][identification]']").val();k(".local-signup .email",".local-signup .form-group-text.temail",e),j(".local-signup .password",".local-signup .form-group-text.tpassword",a),j(".local-signup .confirm",".local-signup .form-group-text.tconfirm",t),S(".local-signup .confirm",".local-signup .form-group-text.tconfirm",a,t),C(o,n)}function O(){$(ie+"#housetype").val(ne.profile.housetype.split(",")[0]),$(ie+"#maritalstatus").val(ne.profile.maritalstatus),$(ie+"#adult").val(ne.household.adult),$(ie+"#teenager").val(ne.household.teenager),$(ie+"#children").val(ne.household.children),$(ie+"#infant").val(ne.household.infant),$(ie+"#elderly").val(ne.household.elderly),$(ie+"#disabled").val(ne.household.disabled),$(ie+"#otherduties").val(ne.jobscope.otherduties)}function I(){ne.jobscope.infantcare===!0&&($(ie+"#infantcare").prop("checked",!0),$(ie+"#infantcarehidden")[0].disabled=!0),ne.jobscope.childcare===!0&&($(ie+"#childcare").prop("checked",!0),$(ie+"#childcarehidden")[0].disabled=!0),ne.jobscope.elderlycare===!0&&($(ie+"#elderlycare").prop("checked",!0),$(ie+"#elderlycarehidden")[0].disabled=!0),ne.jobscope.disabledcare===!0&&($(ie+"#disabledcare").prop("checked",!0),$(ie+"#disabledcarehidden")[0].disabled=!0),ne.jobscope.housework===!0&&($(ie+"#housework").prop("checked",!0),$(ie+"#houseworkhidden")[0].disabled=!0),ne.jobscope.cooking===!0&&($(ie+"#cooking").prop("checked",!0),$(ie+"#cookinghidden")[0].disabled=!0),ne.jobscope.handledog===!0&&($(ie+"#handledog").prop("checked",!0),$(ie+"#handledoghidden")[0].disabled=!0),ne.jobscope.handlecat===!0&&($(ie+"#handlecat").prop("checked",!0),$(ie+"#handlecathidden")[0].disabled=!0)}function _(){var e=parseInt($(ie+"#adult").val(),10)+parseInt($(ie+"#teenager").val(),10)+parseInt($(ie+"#children").val(),10)+parseInt($(ie+"#infant").val(),10)+parseInt($(ie+"#elderly").val(),10)+parseInt($(ie+"#disabled").val(),10);$(".totalnoinhousehold").text(e)}function E(){return c(!1,"input","employer[local][contact][number]")|c(!0,"input","employer[profile][postalcode]")?!0:!1}function D(){return s("input","employer[profile][fullname]",50)|s("input","employer[profile][blockhouseno]",20)|s("input","employer[profile][unitno]",20)|s("input","employer[profile][streetname]",50)|s("textarea","employer[jobscope][otherduties]",300)?!0:!1}function A(){return p("input","employer[profile][fullname]")|p("select","employer[profile][housetype]")|p("input","employer[profile][blockhouseno]")|p("input","employer[profile][unitno]")|p("input","employer[profile][streetname]")|p("select","employer[profile][maritalstatus]")|u("input","employer[profile][postalcode]")|u("input","employer[local][contact][number]")?!0:!1}function B(e,a){for(var t=(new Date).getFullYear(),o=0;a>o;o++){var n=t-o;$(le+e).append('<option value="'+n+'">'+n+"</option>")}}function q(e){var a=$('<option value="">-- select one --</option><option value="Brunei">Brunei</option><option value="Hong_Kong">Hong Kong</option><option value="India">India</option><option value="Indonesia">Indonesia</option><option value="Middle_East">Middle East</option><option value="Myanmar">Myanmar</option><option value="Philippines">Philippines</option><option value="Singapore">Singapore</option><option value="Sri_Lanka">Sri Lanka</option><option value="Taiwan">Taiwan</option>');$(le+e).append(a)}function F(){$(le+"#nationality").val(re.profile.nationality),$(le+"#portrepatriated").val(re.profile.portrepatriated),$(le+"#religion").val(re.profile.religion),$(le+"#dietaryrestriction").val(re.profile.dietaryrestriction),$(le+"#foodhandlingrestriction").val(re.profile.foodhandlingrestriction),$(le+"#siblings").val(re.profile.siblings),$(le+"#maritalstatus").val(re.profile.maritalstatus),$(le+"#children").val(re.profile.children),$(le+"#educationlevel").val(re.education.educationlevel),$(le+"#otherqualifications").val(re.education.otherqualifications),$(le+"#firstfrom").val(re.workingexperience.first.from),$(le+"#firstto").val(re.workingexperience.first.to),$(le+"#firstcountry").val(re.workingexperience.first.country),$(le+"#firstduties").val(re.workingexperience.first.duties),$(le+"#secondfrom").val(re.workingexperience.second.from),$(le+"#secondto").val(re.workingexperience.second.to),$(le+"#secondcountry").val(re.workingexperience.second.country),$(le+"#secondduties").val(re.workingexperience.second.duties),$(le+"#thirdfrom").val(re.workingexperience.third.from),$(le+"#thirdto").val(re.workingexperience.third.to),$(le+"#thirdcountry").val(re.workingexperience.third.country),$(le+"#thirdduties").val(re.workingexperience.third.duties)}function N(e,a){e===!0?$(le+"#"+a+"yes").prop("checked",!0):$(le+"#"+a+"no").prop("checked",!0)}function R(){if(B("#dob-year",100),null===re.profile.dob)$(le+"#dob-date").val(""),$(le+"#dob-month").val(""),$(le+"#dob-year").val("");else{var e=new Date(re.profile.dob);$(le+"#dob-date").val((e.getDate()<10?"0":"")+e.getDate()),$(le+"#dob-month").val((e.getMonth()<9?"0":"")+(e.getMonth()+1)),$(le+"#dob-year").val(e.getFullYear())}}function M(){return c(!1,"input","helper[local][contact][number]")|c(!1,"input","helper[profile][heightcm]")|c(!1,"input","helper[profile][weightkg]")|c(!0,"input","helper[profile][ageofyoungest]")?!0:!1}function Y(){return s("input","helper[profile][firstname]",20)|s("input","helper[profile][middlename]",20)|s("input","helper[profile][familyname]",20)|s("input","helper[profile][pob]",100)|s("input","helper[profile][residentialaddress]",100)|s("input","helper[profile][allergies]",50)|s("input","helper[education][fieldofstudy]",50)|s("textarea","helper[education][otherqualifications]",300)|s("textarea","helper[workingexperience][first][duties]",300)|s("textarea","helper[workingexperience][second][duties]",300)|s("textarea","helper[workingexperience][third][duties]",300)?!0:!1}function z(){return d()|p("input","helper[profile][firstname]")|p("input","helper[profile][familyname]")|p("input","helper[profile][pob]")|p("select","helper[profile][nationality]")|p("input","helper[local][contact][countrycode]")|p("input","helper[profile][residentialaddress]")|p("select","helper[profile][portrepatriated]")|p("select","helper[profile][religion]")|p("select","helper[profile][dietaryrestriction]")|p("select","helper[profile][foodhandlingrestriction]")|p("select","helper[profile][maritalstatus]")|p("select","helper[education][educationlevel]")|p("input","helper[education][fieldofstudy]")|u("input","helper[local][contact][number]")|u("input","helper[profile][heightcm]")|u("input","helper[profile][weightkg]")?!0:!1}function J(e,a){e&&$('.browsepage input[name="'+a+'"][value="'+e+'"]').attr("checked","checked")}function L(){$(".browsepage .helperContainer .panel").on({mouseenter:function(){$(this).children().css({"background-color":"#68C3A3",color:"black",transition:"all 0.3s ease","-webkit-transform":"scale(1.05)","-ms-transform":"scale(1.05)",transform:"scale(1.05)"})},mouseleave:function(){$(this).children().css({"background-color":"#f5f5f5",color:"#717f86",transition:"all 0.3s ease","-webkit-transform":"scale(1.0)","-ms-transform":"scale(1.0)",transform:"scale(1.0)"})},click:function(){window.location=$(this).children(".viewbutton").attr("href")}})}function U(){var e=$(".browsepage").serialize().replace(/=/g,",").split("&"),t={};e.forEach(function(e){t[e.split(",")[0]]=e.split(",")[1]}),$.ajax({url:"/browse/filter",type:"POST",data:t,dataType:"json",cache:!1,success:function(e){if($(".helperContainer").empty(),$(".browsepage .querytext span.found").text(e.totalResults+" Found"),e.helperInfo.forEach(function(e){function a(){var a="/images/noimg.jpg";return e.profile.photo.version&&(a="https://res.cloudinary.com/dbjdqrw9o/image/upload/w_300,h_300,c_thumb,g_face/dpr_1.0/v"+e.profile.photo.version+"/"+e._id+"."+e.profile.photo.format),a}function t(){var a="";return e.transfer&&(a+='<img class="transfericon" src="/images/logo/transfer.png" alt="transfer icon" data-toggle="tooltip" data-placement="right" title="Transfer">'),e.skills.singapore&&(a+='<img class="singaporeicon" src="/images/logo/singapore_icon.png" alt="singapore icon" data-toggle="tooltip" data-placement="right" title="Worked in Singapore before">'),a}function o(a,t){return'<div class="col-sm-4 col-xs-12"><div class="panel panel-default"><a class="viewbutton" href="/browse/view/'+e._id+'"></a><div class="panel-body"><div class="browse-helperpic"><img src='+a+' alt="profile image"></div><div class="smarticons">'+t+'</div></div><div class="panel-footer"><h4>'+e.profile.firstname+"<span>, "+n(e.profile.dob)+"<span></h4><p>"+e.profile.maritalstatus+" | "+e.profile.nationality.replace(/_/g," ")+'</p><img class="flagicon" src="/images/logo/'+e.profile.nationality.toLowerCase()+'_flag.png" alt="flag icon"></div></div></div>'}$(".helperContainer").append(o(a(),t()))}),L(),$(".browse-pagenumber").empty(),e.totalResults>1){for(var a=0;a<Math.ceil(e.totalResults/12);a++)$(".browse-pagenumber").append('<a class="pagenumber'+(a+1)+'">'+(a+1)+"</a>");var t=window.location.search.indexOf("page="),o=window.location.search.substring(t+5,t+6);$(".browsepage .browse-pagenumber a.pagenumber"+o).addClass("active"),W()}},error:function(e){e&&a("Something went wrong! Please refresh the page and try again.")}})}function W(){$(".browse-pagenumber a").on("click",function(){var e=$(this).text();$('.browse-menu input[name="page"]').val(e),window.history.replaceState(null,null,window.location.href.replace(/(page=)[0-9]{1,}/,"page="+e)),U(),$("html, body").animate({scrollTop:$(".browsepage .browse-header").offset().top-75},1e3,"easeInOutExpo")})}function G(){$(".browseview .relatedContainer .panel").on({mouseenter:function(){$(this).children().css({"background-color":"#68C3A3",color:"black",transition:"all 0.3s ease","-webkit-transform":"scale(1.05)","-ms-transform":"scale(1.05)",transform:"scale(1.05)"})},mouseleave:function(){$(this).children().css({"background-color":"#f5f5f5",color:"#717f86",transition:"all 0.3s ease","-webkit-transform":"scale(1.0)","-ms-transform":"scale(1.0)",transform:"scale(1.0)"})},click:function(){window.location=$(this).children(".viewbutton").attr("href")}})}function H(){$(".profile-hire .userresponse").on("click",function(){$(".profile-hire .helperinput").val($(this).val());var e=$(".profile-hire .helperinput").val().split(",")[1];swal({title:"Are you sure you want to "+e.toLowerCase()+"?",text:"You won't be able to revert this!",type:"warning",showCancelButton:!0,confirmButtonColor:"rgb(38, 166, 91)",cancelButtonColor:"#d33",confirmButtonText:e,cancelButtonText:"No",confirmButtonClass:"btn-success",cancelButtonClass:"btn-danger",buttonsStyling:!0}).then(function(){$.ajax({url:"/users/"+me+"/shortlists",type:"POST",data:JSON.stringify({hireid:$(".profile-hire .helperinput").val().split(",")[0],status:e}),dataType:"json",contentType:"application/json",cache:!1,success:function(e){"error"===e.status?a(e.message):window.location.reload()},error:function(e){e&&a("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})},function(e){"cancel"===e&&swal("Cancelled","No changes were made.","error")})})}function K(){$(".admin-home-container .squarebox").on({mouseenter:function(){$(this).css({"background-color":"#446CB3",color:"#fff",transition:"all 0.3s ease","-webkit-transform":"scale(1.02)","-ms-transform":"scale(1.02)",transform:"scale(1.02)","z-index":1})},mouseleave:function(){$(this).css({"background-color":"#6BB9F0",color:"black",transition:"all 0.3s ease","-webkit-transform":"scale(1.0)","-ms-transform":"scale(1.0)",transform:"scale(1.0)","z-index":0})}})}function Z(e,a){e===!0?$(".adminUserAccount input#"+a+"yes").prop("checked",!0):$(".adminUserAccount input#"+a+"no").prop("checked",!0)}$(".nav .dropdown-menu .logout").on("click",function(){swal({title:"Sign Out",text:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"rgb(38, 166, 91)",cancelButtonColor:"rgb(221, 75, 57)",confirmButtonText:"Yes",cancelButtonText:"No",confirmButtonClass:"btn-success",cancelButtonClass:"btn-danger",buttonsStyling:!0}).then(function(){window.location="/logout"})});var X=window.location.pathname.split("/",2).join("/");if($('.nav > li > a[href="'+X+'"]').parent().addClass("active"),f(),$(window).resize(function(){f()}),$('[data-toggle="tooltip"]').tooltip(),$("a.page-scroll").bind("click",function(e){var a=$(this);$("html, body").stop().animate({scrollTop:$(a.attr("href")).offset().top-50},1250,"easeInOutExpo"),e.preventDefault()}),$(".ajax-contactus").length){var Q=$(".ajax-contactus").data("idrole");""!==Q&&$.ajax({url:"/loadcontactus/"+Q,type:"POST",cache:!1,success:function(e){"success"===e.status&&($("#contactname").val(e.name),$("#contactemail").val(e.email))}}),$(".ajax-contactus").submit(function(e){e.preventDefault(),""===$("#contactname").val()||""===$("#contactemail").val()||""===$("#contactsubject").val()||""===$("#contactmessage").val()?a("Please fill in the required * fields."):o($("#contactemail").val())?$.ajax({url:"/contactus",type:"POST",data:JSON.stringify({name:$("#contactname").val(),email:$("#contactemail").val(),subject:$("#contactsubject").val(),message:$("#contactmessage").val(),dinnertime:$("#dinnertime").val()}),dataType:"json",contentType:"application/json",success:function(e){t("Thank you. We will get back to you within 2 business days."),$("#contactname").val(""),$("#contactemail").val(""),$("#contactsubject").val(""),$("#contactmessage").val("")},error:function(e){e&&a("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}}):a("Please provide a valid email address.")})}if($(".local-signup").length){e()&&(window.alert("For a better website experience, please use other browsers such as Chrome, Firefox or Safari."),$(".roleSelect input").css("display","block"),$(".roleLogo:last-child, #roleEmployer").css({position:"relative",top:"-17px"}));var V=window.sessionStorage.getItem("signuprole"),ee=$("input[name='user[local][identification]']");"helper"===V?ee.attr("placeholder","Passport Number"):"employer"===V&&ee.attr("placeholder","NRIC eg.S1234567D"),$(".local-signup .form-group.email input#email").val(window.sessionStorage.getItem("signupemail")),$(".local-signup .form-group.identification input#identification").val(window.sessionStorage.getItem("signupidentification")),$(".local-signup .form-group input[value="+V+"]").attr("checked","checked"),$(".local-signup").submit(function(e){var a=$("input[name='user[local][email]']").val(),t=$("input[name='user[local][password]']").val(),o=$("input[name='user[local][confirm]']").val(),n=$("input[name='user[local][role]']:checked").val(),i=$("input[name='user[local][identification]']").val();x(n),k(".local-signup .email",".local-signup .form-group-text.temail",a),j(".local-signup .password",".local-signup .form-group-text.tpassword",t),j(".local-signup .confirm",".local-signup .form-group-text.tconfirm",o),S(".local-signup .confirm",".local-signup .form-group-text.tconfirm",t,o),C(n,i),(x(n)===!1||k(".local-signup .email",".local-signup .form-group-text.temail",a)===!1||j(".local-signup .password",".local-signup .form-group-text.tpassword",t)===!1||j(".local-signup .confirm",".local-signup .form-group-text.tconfirm",o)===!1||S(".local-signup .confirm",".local-signup .form-group-text.tconfirm",t,o)===!1||C(n,i)===!1)&&e.preventDefault(),window.sessionStorage.setItem("signupemail",a),window.sessionStorage.setItem("signuprole",n),window.sessionStorage.setItem("signupidentification",i)});var ae,te=3e3,oe=$(".local-signup .form-group");oe.on("keyup",function(){clearTimeout(ae),ae=setTimeout(P,te)}),oe.on("keydown",function(){clearTimeout(ae)}),$(".local-signup .form-group.email").focusout(function(){var e=$("input[name='user[local][email]']").val();k(".local-signup .email",".local-signup .form-group-text.temail",e)}),$(".local-signup .form-group.password").focusout(function(){var e=$("input[name='user[local][password]']").val();j(".local-signup .password",".local-signup .form-group-text.tpassword",e)}),$(".local-signup .form-group.confirm").focusout(function(){var e=$("input[name='user[local][password]']").val(),a=$("input[name='user[local][confirm]']").val();j(".local-signup .confirm",".local-signup .form-group-text.tconfirm",a),S(".local-signup .confirm",".local-signup .form-group-text.tconfirm",e,a)}),$(".local-signup .form-group.identification").focusout(function(){var e=$("input[name='user[local][role]']:checked").val(),a=$("input[name='user[local][identification]']").val();C(e,a)}),$(".local-signup .form-group.role").on("click",function(){h(".local-signup .identification"),b(".local-signup .form-group-text.tidentification");var e=$("input[name='user[local][role]']:checked").val(),a=$("input[name='user[local][identification]']");"helper"===e?(a.attr("placeholder","Passport Number"),a.val("")):"employer"===e&&(a.attr("placeholder","NRIC, S1234567D"),a.val(""))})}if($(".local-login").length&&(e()&&window.alert("For a better website experience, please use other browsers such as Chrome, Firefox or Safari."),$(".local-login .form-group input:text:visible:first").focus(),$(".local-login .form-group input#email").val(window.localStorage.getItem("loginemail")),$(".local-login").submit(function(e){var a=$("input[name='user[local][email]']").val();window.localStorage.setItem("loginemail",a)})),$(".editemployer").length){e()&&(window.alert("For a better website experience, please use other browsers such as Chrome, Firefox or Safari."),$(".editemployer .jobscope input").css("display","inline-block"));var ne=$(".editemployer").data("employer")[0],ie=".editemployer .form-group ";O(),I(),"Landed"===ne.profile.housetype.split(",")[0]&&$(".editemployer .form-group-unitno").addClass("hidden"),"Others"===ne.profile.housetype.split(",")[0]&&($(ie+".housetypeother").removeClass("hidden"),$(ie+".housetypeother").val(ne.profile.housetype.split(",")[1])),$(ie+"#housetype").change(function(){"Landed"===$(ie+"#housetype").val()?$(".editemployer .form-group-unitno").addClass("hidden"):$(".editemployer .form-group-unitno").removeClass("hidden"),"Others"!==$(ie+"#housetype").val()?$(ie+".housetypeother").addClass("hidden"):$(ie+".housetypeother").removeClass("hidden")}),_(),$(ie+"select").change(function(){_()}),$(ie+".checkbox-inline").click(function(){function e(e){$(ie+e)[0].checked===!0?($(ie+e).val("true"),$(ie+e+"hidden")[0].disabled=!0):$(ie+e+"hidden")[0].disabled=!1}e("#infantcare"),e("#childcare"),e("#elderlycare"),e("#disabledcare"),e("#housework"),e("#cooking"),e("#handledog"),e("#handlecat")}),$("#editemployersave").on("click",function(){$(".editemployer #saveOrSubmit").val("save")}),$("#editemployersubmit").on("click",function(){$(".editemployer #saveOrSubmit").val("submit")}),$(".editemployer .editemployerformbuttons #editemployersave").length&&($(".editemployer #editemployersave").css({position:"fixed",bottom:"50px"}),$(window).scroll(function(){var e=$(".editemployer .editemployerformbuttons").offset().top,a=$(".editemployer #editemployersave").offset().top;a>e&&$(".editemployer #editemployersave").css({position:"static"})})),$(".editemployer").submit(function(e){if("Landed"===$(ie+"#housetype").val()&&$(ie+"#unitno").val("N/A"),"Others"!==$(ie+"#housetype").val()&&$(ie+".housetypeother").val(""),$(ie+"#contactnumber").val()||$(ie+"#contactnumber").val("0"),E())e.preventDefault(),a("Wrong format provided! Please provide Numbers in the yellow boxes.");else if(D())e.preventDefault(),a("Exceeded Character Limit! Please resolve the errors in yellow.");else{var t=$('input[name="employer[saveOrSubmit]"]').val();"submit"===t&&A()&&(e.preventDefault(),a("Fill in all required '*' fields! Please resolve the errors in red."))}})}if($(".edithelper").length){e()&&(window.alert("For a better website experience, please use other browsers such as Chrome, Firefox or Safari."),$(".edithelper .skillsradio input").css("display","inline-block"));var re=$(".edithelper").data("helper")[0],le=".edithelper .form-group ";B(".workingexperienceyear",50),q("#firstcountry"),q("#secondcountry"),q("#thirdcountry"),F(),N(re.skills.english,"english"),N(re.skills.singapore,"singapore"),N(re.skills.infantcare,"infantcare"),N(re.skills.childcare,"childcare"),N(re.skills.elderlycare,"elderlycare"),N(re.skills.disabledcare,"disabledcare"),N(re.skills.housework,"housework"),N(re.skills.cooking,"cooking"),N(re.skills.handledog,"handledog"),N(re.skills.handlecat,"handlecat"),R(),$(le+"#nationality").change(function(){var e=$(le+"#nationality").val(),a=["Philippines","India","Indonesia","Myanmar","Sri_Lanka"],t=["+63","+91","+62","+95","+94"],o=a.indexOf(e);o>=0&&$(le+"#countrycode").val(t.slice(o,o+1))}),re.profile.children>0&&$(".edithelper .form-group-children").removeClass("hidden"),$(le+"#children").change(function(){$(le+"#children").val()>0?$(".edithelper .form-group-children").removeClass("hidden"):$(".edithelper .form-group-children").addClass("hidden")}),$("#edithelpersave").on("click",function(){$(".edithelper #saveOrSubmit").val("save")}),$("#edithelpersubmit").on("click",function(){$(".edithelper #saveOrSubmit").val("submit")}),$(".edithelper .edithelperformbuttons #edithelpersave").length&&($(".edithelper #edithelpersave").css({position:"fixed",bottom:"30px",right:"30px"}),$(window).scroll(function(){var e=$(".edithelper .edithelperformbuttons").offset().top,a=$(".edithelper #edithelpersave").offset().top;a>e&&$(".edithelper #edithelpersave").css({position:"static"})})),$(".edithelper").submit(function(e){var t=$(le+"#dob-date").val(),o=$(le+"#dob-month").val(),n=$(le+"#dob-year").val();if(""!==t&&""!==o&&""!==n&&$(le+"#dob").val(new Date(n+"-"+o+"-"+t+"T01:00:00+01:00")),$(le+"#contactnumber").val()||$(le+"#contactnumber").val("0"),$(le+"#children").val()<1&&$(le+"#ageofyoungest").val("0"),M())e.preventDefault(),a("Wrong format provided! Please provide Numbers in the yellow boxes.");else if(Y())e.preventDefault(),a("Exceeded Character Limit! Please resolve the errors in yellow.");else{var i=$('input[name="helper[saveOrSubmit]"]').val();"submit"===i&&z()&&(e.preventDefault(),a("Fill in all required '*' fields! Please resolve the errors in red."))}})}if($(".profile-changeidentification").length&&$(".profile-changeidentification").on("click",function(e){e.preventDefault(),swal("Warning","To change identification, send a copy of your Identification to 'support@maidicare.com'.","warning")}),$(".browsepage").length){var se=decodeURIComponent(window.location.search.substring(1)),ce=se.replace(/=/g,"~*").replace(/\+/g," ").split("&"),pe={};ce.forEach(function(e){pe[e.split("~*")[0]]=e.split("~*")[1]}),pe.query&&($('.browsepage input[name="query"]').val(pe.query),$(".browse-content .querytext p span.glyphicon").css("visibility","visible"),pe.query.length>30?$(".browsepage .browse-content span.qtext").text("'"+pe.query.substring(0,30)+"...'"):$(".browsepage .browse-content span.qtext").text("'"+pe.query+"'")),$(".browsepage .browse-pagenumber a.pagenumber"+pe.page).addClass("active"),J(pe.infantcare,"infantcare"),J(pe.childcare,"childcare"),J(pe.elderlycare,"elderlycare"),J(pe.disabledcare,"disabledcare"),J(pe.transfer,"transfer"),J(pe.singapore,"singapore"),pe.nationality&&$('.browsepage select[name="nationality"]').val(pe.nationality),pe.religion&&$('.browsepage select[name="religion"]').val(pe.religion),pe.maritalstatus&&$('.browsepage select[name="maritalstatus"]').val(pe.maritalstatus),L(),W(),$('.browsepage input[name="infantcare"], .browsepage input[name="childcare"], .browsepage input[name="elderlycare"], .browsepage input[name="disabledcare"], .browsepage input[name="transfer"], .browsepage input[name="singapore"], .browsepage select[name="nationality"], .browsepage select[name="religion"], .browsepage select[name="maritalstatus"]').on("change",function(){$('.browse-menu input[name="page"]').val(1),window.history.replaceState(null,null,window.location.href.replace(/(page=)[0-9]{1,}/,"page=1")),U()}),$(".browsepage .clearquerytext").on("click",function(){$('.browsepage input[name="query"]').val(""),$(".browsepage").submit()}),$(".browsepage .clearfilter").on("click",function(){function e(e,a){"checkbox"===a?$('.browsepage input[name="'+e+'"]:checked').attr("checked",!1):"radio"===a?$('.browsepage input[name="'+e+'"]').val("All"):"ddl"===a&&$('.browsepage select[name="'+e+'"]').val("All")}e("infantcare","checkbox"),e("childcare","checkbox"),e("elderlycare","checkbox"),e("disabledcare","checkbox"),e("transfer","radio"),e("singapore","radio"),e("nationality","ddl"),e("religion","ddl"),e("maritalstatus","ddl"),$(".browsepage").submit()}),$("#browseform").submit(function(){var e=$('.browsepage input[name="query"]').val();""!==e&&$('.browse-menu input[name="page"]').val(1)}),$(".browsepage button.togglefilter").on("click",function(){$(".browsepage .browse-sidebar").slideToggle("fast",function(){$(".browsepage .browse-sidebar").is(":visible")?($(".browsepage button.togglefilter").css({"background-color":"black",color:"orange"}),$("html, body").animate({scrollTop:$(".browsepage").offset().top-50},1e3,"easeInOutExpo")):$(".browsepage button.togglefilter").css({"background-color":"orange",color:"white"})})})}if($(".browseview").length){var ue=$(".browseview").data("hirearray"),de=[];if(ue.forEach(function(e,a){de.push(e.huserid)}),$(".browseview .hirehelper").val()){var fe=$(".browseview .hirehelper").val().split("&")[0],he=$(".browseview .hirehelper").val().split("&")[1];de.indexOf(fe)>=0&&$(".browseview .hirehelper").removeClass("btn-primary").addClass("btn-secondary").text("Selected")}G(),$(".browseview .hirehelper").on("click",function(){$.ajax({url:"/browse/hire",type:"POST",data:JSON.stringify({helperuserid:fe,helperid:he}),dataType:"json",contentType:"application/json",cache:!1,success:function(e){"success"===e.status?t(e.message):"error"===e.status?a(e.message):"redirect"===e.status&&(window.location=e.message)},error:function(e){e&&a("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})})}if($(".profile-hire").length){var me=$(".profile-hire").data("userid");$('.profile-hire-filter select[name="filter"]').on("change",function(){var e=$('.profile-hire-filter select[name="filter"]').val();$.ajax({url:"/users/"+me+"/shortlists/filter",type:"POST",data:JSON.stringify({filter:e}),dataType:"json",contentType:"application/json",cache:!1,success:function(a){function t(e){return new Date(1e3*parseInt(e.substring(0,8),16))}var o=["All","confirmed","accepted","pending","rejected"],n=["#95A5A6","#1E824C","#3A539B","#E87E04","#96281B"],i=o.indexOf(e);$(".profile-hire-filter").css("background-color",n.slice(i,i+1)),$(".hireContainer").empty();var r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];a.hireInfo.length>0&&a.hireInfo.forEach(function(e){function o(e){var a="";return a=e.user.profile.photo.version?"https://res.cloudinary.com/dbjdqrw9o/image/upload/w_300,h_300,c_thumb,g_face/v"+e.user.profile.photo.version+"/"+e.user._id+"."+e.user.profile.photo.format:"/images/noimg.jpg",'<a href="/browse/view/"'+e.user._id+"><img src="+a+' alt="profile image"></a>'}function n(e){var t="";return"employer"===a.role?t='<div class="profile-hire-userpic">'+o(e)+"</div>":"helper"===a.role&&(t='<div class="profile-hire-userpic"><a href="/users/employer/"'+e.user.userid+'><img src="/images/employer.png" alt="profile image"></a></div>'),
'<div class="col-md-3 col-sm-3">'+t+"</div>"}function i(e){var t="";if("helper"===a.role){var o="";o="Others"===e.user.profile.housetype.split(",")[0]?e.user.profile.housetype.replace(/,/,", "):e.user.profile.housetype.split(",")[0].replace(/_/g," "),t='<a href="/users/employer/'+e.user.userid+'">'+e.user.profile.fullname+"</a><p>"+o+" | "+e.user.profile.maritalstatus+"</p>"}else{var n="";n=e.user.transfer?"<p>"+e.user.profile.nationality+" | "+e.user.profile.maritalstatus+" | Transfer</p>":"<p>"+e.user.profile.nationality+" | "+e.user.profile.maritalstatus+"</p>",t='<a href="/browse/view/'+e.user._id+'">'+e.user.profile.firstname+"</a>"+n}return'<div class="col-md-6 col-sm-6">'+t+'<div class="well">'+e.message+"</div></div>"}function l(e){var t="";return"helper"===a.role&&"pending"===e.status&&(t='<button class="btn btn-success userresponse" value="'+e._id+',Accept">Accept</button><button class="btn btn-danger userresponse" value="'+e._id+',Reject">Reject</button>'),"helper"===a.role&&"accepted"===e.status&&(t='<button class="btn btn-danger userresponse" value="'+e._id+',Reject">Reject</button>'),"employer"===a.role&&"pending"===e.status?t='<button class="btn btn-danger userresponse" value="'+e._id+',Reject">Reject</button>':"employer"===a.role&&"accepted"===e.status&&(t='<button class="btn btn-success userresponse" value="'+e._id+',Confirm">Confirm</button><button class="btn btn-danger userresponse" value="'+e._id+',Reject">Reject</button>'),'<div class="col-md-3 col-sm-3"><div class="profile-hire-response"><input type="hidden" class="helperinput" name="helperinput" value="">'+t+"</div></div>"}function s(e){return'<div class="col-md-12 col-sm-12 profile-hire-content"><h4>'+u+'</h4><h4 class="right" id='+e.status+">"+e.status+"</h4><hr>"+n(e,a.role)+i(e)+l(e)+"</div>"}var c=t(e._id.toString()),p=c.getMinutes()<10?"0"+c.getMinutes():c.getMinutes(),u=c.getDate().toString()+" "+r[c.getMonth()]+" "+c.getFullYear().toString()+", "+c.getHours()+":"+p;$(".hireContainer").append(s(e)),H()})},error:function(e){e&&a("Something went wrong! Please refresh the page and try again.")}})}),H()}if($(".ajax-forgotpassword").length&&$(".ajax-forgotpassword").submit(function(e){e.preventDefault();var n=$('.ajax-forgotpassword input[name="email"]').val();o(n)?$.ajax({url:"/password/forgot",type:"POST",data:JSON.stringify({email:n}),dataType:"json",contentType:"application/json",success:function(e){"success"===e.status?t(e.message):(a(e.message),$('.ajax-forgotpassword input[name="email"]').val(""))},error:function(e){e&&a("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}}):a("Please provide a valid email.")}),$(".ajax-resetpassword").length&&$(".ajax-resetpassword").submit(function(e){e.preventDefault();var t=window.location.pathname.split("/password/validate/")[1],o=t.split("&")[0],n=$('.ajax-resetpassword input[name="password"]').val(),i=$('.ajax-resetpassword input[name="confirm"]').val();n.length>=6&&i.length>=6?n===i?$.ajax({url:"/password/reset",type:"POST",data:JSON.stringify({userid:o,password:n,confirm:i}),dataType:"json",contentType:"application/json",success:function(e){"success"===e.status?window.location=e.url:a(e.message)},error:function(e){e&&a("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}}):a("The passwords do not match."):a("Password must be at least 6 characters.")}),$(".profile-activate-reset").length>0&&$(".profile-activate-reset").on("click",function(){var e=$(".profile-activate-reset").data("id");$.ajax({url:"/users/"+e+"/activate/reset",type:"POST",cache:!1,success:function(e){"success"===e.status&&t(e.message)},error:function(e){e&&a("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})}),$(".postadmincode").length>0&&$(".postadmincode").on("click",function(){$.ajax({url:"/admin/newcode",type:"POST",error:function(e){e&&a("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})}),$(".admin-remove-navbar").length>0){if($(".navbar-brand").text("Admin").attr("href","/admin"),$(".nav.navbar-nav.navbar-right").empty(),$(".nav.navbar-nav.navbar-right").append('<li><a target="_blank" href="/admin/email">Send an Email</a></li><li><a class="btn btn-danger"href="/logout">Logout</a></li>'),K(),$(".admin-shortlist-search").length>0&&$(".admin-shortlist-search").on("click",function(){var e=$("input#hireid").val();""!==e&&(window.location="/admin/shortlists/"+e)}),$(".adminUserAccount").length>0){var ge=$(".adminUserAccount").data("admin")[0].userid;Z(ge.available,"available"),Z(ge.recruit,"recruit"),Z(ge.hire,"hire"),Z(ge.activate.status,"activatestatus")}if($(".admin-hire-filter").length>0){var ve=window.location.pathname.split("/admin/shortlists/all/")[1];$('.admin-hire-filter select[name="filter"]').val(ve),$('.admin-hire-filter select[name="filter"]').on("change",function(){var e=$('.admin-hire-filter select[name="filter"]').val();window.location="/admin/shortlists/all/"+e})}$(".admin-change-hire-status").length>0&&$(".admin-change-hire-status select#status").on("change",function(){var e=$(this).data("hireid"),t=$(this).val();$.ajax({url:"/admin/shortlists/"+e,type:"POST",cache:!1,data:JSON.stringify({status:t}),dataType:"json",contentType:"application/json",success:function(e){window.location.reload()},error:function(e){e&&a("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})}),$(".admin-email-all-inactive-helper").length>0&&($(".admin-email-all-inactive-helper").on("click",function(){$.ajax({url:"/admin/inactive/helpers",type:"POST",cache:!1,success:function(e){"success"===e.status?t(e.message):a(e.message)},error:function(e){e&&a("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})}),$(".admin-email-inactive-helper").on("click",function(){var e=$(this).val();$.ajax({url:"/admin/inactive/helpers/"+e,type:"POST",cache:!1,success:function(e){"success"===e.status?t(e.message):a(e.message)},error:function(e){e&&a("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})})),$(".admin-email-inactive-hire").length>0&&$(".admin-email-inactive-hire").on("click",function(){var e=$(this).val();$.ajax({url:"/admin/inactive/shortlists",type:"POST",cache:!1,data:JSON.stringify({userids:e}),dataType:"json",contentType:"application/json",success:function(e){"success"===e.status&&t(e.message)},error:function(e){e&&a("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})})}$("#demo").on("click",function(){$.ajax({url:"/api/users/data",type:"GET",dataType:"json"}).done(function(e){e.forEach(function(e){$.ajax({type:"POST",url:"/api/users/demo",data:e})})})}),$("#remove").on("click",function(){$.ajax({type:"delete",url:"/api/users/remove"})})});
