$(document).ready(function(){function e(){var e=window.navigator.userAgent,t=e.indexOf("MSIE "),a=e.indexOf("Trident/"),o=e.indexOf("Edge/");if(t>0||a>0||o>0)return!0}function t(e){swal({title:"Error",text:e,type:"error",confirmButtonColor:"rgb(221, 75, 57)"})}function a(e){swal({title:"Success",text:e,type:"success",confirmButtonColor:"rgb(38, 166, 91)"})}function o(e){return Object.keys(e).forEach(function(t){"string"==typeof e[t]&&(e[t]=e[t].replace(/_space_/g," ")),Object.keys(e[t]).forEach(function(a){"string"==typeof e[t][a]&&(e[t][a]=e[t][a].replace(/_space_/g," ")),Object.keys(e[t][a]).forEach(function(o){"string"==typeof e[t][a][o]&&(e[t][a][o]=e[t][a][o].replace(/_space_/g," "))})})}),this.target}function n(e){return/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(e)}function i(e){var t=new Date,a=new Date(e),o=t.getFullYear()-a.getFullYear(),n=t.getMonth()-a.getMonth();return(n<0||0===n&&t.getDate()<a.getDate())&&o--,o}function r(e){$(e).css({"border-color":"#ccc",color:"#555",border:"1px solid #ccc"})}function s(e){$(e).css({color:"#a94442",border:"2px solid #a94442"})}function l(e){$(e).css({color:"#8a6d3b",border:"2px solid #F7CA18"})}function c(e,t,a){var o=e+'[name="'+t+'"]';return $(o).val().length>a?(l(o),!0):(r(o),!1)}function p(e,t,a){var o,n=t+'[name="'+a+'"]',i=$(n).val();return e?new RegExp(/^(\s*|\d+)$/).test(i)?(r(n),o=!1):(l(n),o=!0):new RegExp(/^\d+$/).test(i)?(r(n),o=!1):(l(n),o=!0),o}function u(e,t){var a=e+'[name="'+t+'"]';return $(a).val().length>0?(r(a),!1):(s(a),!0)}function d(e,t){var a=e+'[name="'+t+'"]';return+$(a).val()>0?(r(a),!1):(s(a),!0)}function f(){function e(e,t){""===e?s("select#dob-"+t):r("select#dob-"+t)}var t=$("select#dob-date").val(),a=$("select#dob-month").val(),o=$("select#dob-year").val();return""!==t&&""!==a&&""!==o?(r("select#dob-date"),r("select#dob-month"),r("select#dob-year"),!1):(e(t,"date"),e(a,"month"),e(o,"year"),!0)}function h(){$(window).width()>768&&$(".dropdown").on({mouseenter:function(){$(this).find(".dropdown-menu").stop(!0,!0).delay(150).fadeIn(500)},mouseleave:function(){$(this).find(".dropdown-menu").stop(!0,!0).delay(150).fadeOut(500)}})}function m(e){$(e).css("color","#717f86"),$(e).find(".right-addon").remove(),$(e).removeClass("has-error has-success has-warning")}function g(e){m(e),$(e).css("color","#3c763d"),$(e).addClass("has-success"),$(e).append('<i class="right-addon glyphicon glyphicon-ok"></i>')}function v(e){m(e),$(e).css("color","#a94442"),$(e).addClass("has-error"),$(e).append('<i class="right-addon glyphicon glyphicon-remove"></i>')}function b(e){m(e),$(e).css("color","#8a6d3b"),$(e).addClass("has-warning"),$(e).append('<i class="right-addon glyphicon glyphicon-warning-sign"></i>')}function w(e){$(e).css({visibility:"hidden",color:"#717f86"}),$(e).text("label")}function y(e,t){w(e),$(e).css({visibility:"visible",color:"#a94442"}),$(e).text(t)}function x(e,t){w(e),$(e).css({visibility:"visible",color:"#8a6d3b"}),$(e).text(t)}function k(e,a,o){return o.length<1?(m(e),w(a),!1):n(o)?void $.ajax({url:"/users/emailtaken",type:"POST",cache:!1,data:JSON.stringify({email:o}),dataType:"json",contentType:"application/json",success:function(t){if("success"!==t.status)return v(e),y(a,"Email has been taken."),!1;g(e),w(a)},error:function(e){e&&t("Something went wrong! Please refresh the page and try again.")}}):(v(e),y(a,"Please provide a valid email"),!1)}function j(e,t,a){var o=new RegExp(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9, !@#$%^&*]).{6,}$/);return a.length<1?(m(e),w(t),!1):a.length<6?(v(e),y(t,"Minimum 6 characters"),!1):void(!1===o.test(a)?(b(e),x(t,"Password not strong")):(g(e),w(t)))}function S(e,t,a,o){return o.length<1?(m(e),w(t),!1):a!==o?(v(e),y(t,"Passwords do not match"),!1):void 0}function T(e){for(var t=e.slice(1,8).split("").map(function(e){return parseInt(e,10)}),a=[2,7,6,5,4,3,2],o=0,n=0;n<t.length;n++)o+=t[n]*a[n];var i=e.slice(0,1).toUpperCase();"T"!==i&&"G"!==i||(o+=4);var r=11-o%11,s=["A","B","C","D","E","F","G","H","I","Z","J"];return"F"!==i&&"G"!==i||(s=["K","L","M","N","P","Q","R","T","U","W","X"]),s.slice(r-1,r).toString()===e.slice(8,9).toUpperCase()}function C(e,t){var a=new RegExp(/^([S,T,s,t][0-9]{7}[A-J,Z,a-j,z])$|^([F,G,f,g][0-9]{7}[K-R,T-X,k-r,t-x])$/),o=".local-signup .identification",n=".local-signup .form-group-text.tidentification";if(t.length<1)return m(o),w(n),!1;if("helper"===e)g(o),w(n);else{if("employer"!==e||!a.test(t)||!T(t))return v(o),y(n,"Invalid Identification"),!1;g(o),w(n)}}function O(){var e=$("input[name='user[local][email]']").val(),t=$("input[name='user[local][password]']").val(),a=$("input[name='user[local][confirm]']").val(),o=$("input[name='user[local][identification]']").val();k(".local-signup .email",".local-signup .form-group-text.temail",e),j(".local-signup .password",".local-signup .form-group-text.tpassword",t),j(".local-signup .confirm",".local-signup .form-group-text.tconfirm",a),S(".local-signup .confirm",".local-signup .form-group-text.tconfirm",t,a),C(G,o)}function P(){var e=parseInt($(X+"#adult").val(),10)+parseInt($(X+"#teenager").val(),10)+parseInt($(X+"#children").val(),10)+parseInt($(X+"#infant").val(),10)+parseInt($(X+"#elderly").val(),10)+parseInt($(X+"#disabled").val(),10);$(".totalnoinhousehold").text(e)}function _(){return!!(p(!1,"input","employer[local][contact][number]")|p(!0,"input","employer[profile][postalcode]"))}function I(){return!!(c("input","employer[profile][fullname]",50)|c("input","employer[profile][blockhouseno]",20)|c("input","employer[profile][unitno]",20)|c("input","employer[profile][streetname]",50)|c("textarea","employer[jobscope][otherduties]",300))}function B(){return!!(u("input","employer[profile][fullname]")|u("select","employer[profile][housetype]")|u("input","employer[profile][blockhouseno]")|u("input","employer[profile][unitno]")|u("input","employer[profile][streetname]")|u("select","employer[profile][maritalstatus]")|d("input","employer[profile][postalcode]")|d("input","employer[local][contact][number]"))}function D(e,t){for(var a=(new Date).getFullYear(),o=0;o<t;o++){var n=a-o;$(V+e).append('<option value="'+n+'">'+n+"</option>")}}function E(e){var t=$('<option value="">-- select one --</option><option value="Brunei">Brunei</option><option value="Hong_Kong">Hong Kong</option><option value="India">India</option><option value="Indonesia">Indonesia</option><option value="Middle_East">Middle East</option><option value="Myanmar">Myanmar</option><option value="Philippines">Philippines</option><option value="Singapore">Singapore</option><option value="Sri_Lanka">Sri Lanka</option><option value="Taiwan">Taiwan</option>');$(V+e).append(t)}function A(e,t){!0===e?$(V+"#"+t+"yes").prop("checked",!0):$(V+"#"+t+"no").prop("checked",!0)}function q(){return!!(p(!1,"input","helper[local][contact][number]")|p(!1,"input","helper[profile][heightcm]")|p(!1,"input","helper[profile][weightkg]")|p(!0,"input","helper[profile][ageofyoungest]"))}function F(){return!!(c("input","helper[profile][firstname]",20)|c("input","helper[profile][middlename]",20)|c("input","helper[profile][familyname]",20)|c("input","helper[profile][pob]",100)|c("input","helper[profile][residentialaddress]",100)|c("input","helper[profile][allergies]",50)|c("input","helper[education][fieldofstudy]",50)|c("textarea","helper[education][otherqualifications]",300)|c("textarea","helper[workingexperience][first][duties]",300)|c("textarea","helper[workingexperience][second][duties]",300)|c("textarea","helper[workingexperience][third][duties]",300))}function M(){return!!(f()|u("input","helper[profile][firstname]")|u("input","helper[profile][familyname]")|u("input","helper[profile][pob]")|u("select","helper[profile][nationality]")|u("input","helper[local][contact][countrycode]")|u("input","helper[profile][residentialaddress]")|u("select","helper[profile][portrepatriated]")|u("select","helper[profile][religion]")|u("select","helper[profile][dietaryrestriction]")|u("select","helper[profile][foodhandlingrestriction]")|u("select","helper[profile][maritalstatus]")|u("select","helper[profile][phagency]")|u("select","helper[education][educationlevel]")|u("input","helper[education][fieldofstudy]")|d("input","helper[local][contact][number]")|d("input","helper[profile][heightcm]")|d("input","helper[profile][weightkg]"))}function N(e,t){e&&$('.browsepage input[name="'+t+'"][value="'+e+'"]').attr("checked","checked")}function R(){$(".browsepage .helperContainer .panel").on({mouseenter:function(){$(this).children().css({"background-color":"#68C3A3",color:"black",transition:"all 0.3s ease","-webkit-transform":"scale(1.05)","-ms-transform":"scale(1.05)",transform:"scale(1.05)"})},mouseleave:function(){$(this).children().css({"background-color":"#f5f5f5",color:"#717f86",transition:"all 0.3s ease","-webkit-transform":"scale(1.0)","-ms-transform":"scale(1.0)",transform:"scale(1.0)"})},click:function(){window.location=$(this).children(".viewbutton").attr("href")}})}function Y(){var e={};$(".browsepage").serialize().replace(/=/g,",").split("&").forEach(function(t){e[t.split(",")[0]]=t.split(",")[1]}),$.ajax({url:"/browse/filter",type:"POST",data:e,dataType:"json",cache:!1,success:function(e){if($(".helperContainer").empty(),$(".browsepage .querytext span.found").text(e.totalResults+" Found"),e.helperInfo.forEach(function(e){$(".helperContainer").append(function(t,a){return'<div class="col-sm-4 col-xs-12"><div class="panel panel-default"><a class="viewbutton" href="/browse/view/'+e._id+'"></a><div class="panel-body"><div class="browse-helperpic"><img src='+t+' alt="profile image"></div><div class="smarticons">'+a+'</div></div><div class="panel-footer"><h4>'+e.profile.firstname+"<span>, "+i(e.profile.dob)+"<span></h4><p>"+e.profile.maritalstatus+" | "+e.profile.nationality.replace(/_/g," ")+'</p><img class="flagicon" src="/images/logo/'+e.profile.nationality.toLowerCase()+'_flag.png" alt="flag icon"></div></div></div>'}(function(){var t="/images/noimg.jpg";return e.profile.photo.version&&(t="https://res.cloudinary.com/dbjdqrw9o/image/upload/w_300,h_300,c_thumb,g_face/dpr_1.0/v"+e.profile.photo.version+"/"+e._id+"."+e.profile.photo.format),t}(),function(){var t="";return e.transfer&&(t+='<img class="transfericon" src="/images/logo/transfer.png" alt="transfer icon" data-toggle="tooltip" data-placement="right" title="Transfer">'),e.skills.singapore&&(t+='<img class="singaporeicon" src="/images/logo/singapore_icon.png" alt="singapore icon" data-toggle="tooltip" data-placement="right" title="Worked in Singapore before">'),t}()))}),R(),$(".browse-pagenumber").empty(),e.totalResults>1){for(var t=0;t<Math.ceil(e.totalResults/12);t++)$(".browse-pagenumber").append('<a class="pagenumber'+(t+1)+'">'+(t+1)+"</a>");var a=window.location.search.indexOf("page="),o=window.location.search.substring(a+5,a+6);$(".browsepage .browse-pagenumber a.pagenumber"+o).addClass("active"),J()}},error:function(e){e&&t("Something went wrong! Please refresh the page and try again.")}})}function J(){$(".browse-pagenumber a").on("click",function(){var e=$(this).text();$('.browse-menu input[name="page"]').val(e),window.history.replaceState(null,null,window.location.href.replace(/(page=)[0-9]{1,}/,"page="+e)),Y(),$("html, body").animate({scrollTop:$(".browsepage .browse-header").offset().top-75},1e3,"easeInOutExpo")})}function z(){$(".profile-hire .userresponse").on("click",function(){$(".profile-hire .helperinput").val($(this).val());var e=$(".profile-hire .helperinput").val().split(",")[1];swal({title:"Are you sure you want to "+e.toLowerCase()+"?",text:"You won't be able to revert this!",type:"warning",showCancelButton:!0,confirmButtonColor:"rgb(38, 166, 91)",cancelButtonColor:"#d33",confirmButtonText:e,cancelButtonText:"No",confirmButtonClass:"btn-success",cancelButtonClass:"btn-danger",buttonsStyling:!0}).then(function(){$.ajax({url:"/users/"+ne+"/shortlists",type:"POST",data:JSON.stringify({hireid:$(".profile-hire .helperinput").val().split(",")[0],status:e}),dataType:"json",contentType:"application/json",cache:!1,success:function(e){"error"===e.status?t(e.message):window.location.reload()},error:function(e){e&&t("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})},function(e){"cancel"===e&&swal("Cancelled","No changes were made.","error")})})}function L(e,t){!0===e?$(".adminUserAccount input#"+t+"yes").prop("checked",!0):$(".adminUserAccount input#"+t+"no").prop("checked",!0)}$(".nav .dropdown-menu .logout").on("click",function(){swal({title:"Sign Out",text:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"rgb(38, 166, 91)",cancelButtonColor:"rgb(221, 75, 57)",confirmButtonText:"Yes",cancelButtonText:"No",confirmButtonClass:"btn-success",cancelButtonClass:"btn-danger",buttonsStyling:!0}).then(function(){window.location="/logout"})});var U=window.location.pathname.split("/",2).join("/");if($('.nav > li > a[href="'+U+'"]').parent().addClass("active"),h(),$(window).resize(function(){h()}),$('[data-toggle="tooltip"]').tooltip(),$("a.page-scroll").bind("click",function(e){var t=$(this);$("html, body").stop().animate({scrollTop:$(t.attr("href")).offset().top-50},1250,"easeInOutExpo"),e.preventDefault()}),$(".ajax-contactus").length){var W=$(".ajax-contactus").data("idrole");""!==W&&$.ajax({url:"/loadcontactus/"+W,type:"POST",cache:!1,success:function(e){"success"===e.status&&($("#contactname").val(e.name),$("#contactemail").val(e.email))}}),$(".ajax-contactus").submit(function(e){e.preventDefault(),""===$("#contactname").val()||""===$("#contactemail").val()||""===$("#contactsubject").val()||""===$("#contactmessage").val()?t("Please fill in the required * fields."):n($("#contactemail").val())?$.ajax({url:"/contactus",type:"POST",data:JSON.stringify({name:$("#contactname").val(),email:$("#contactemail").val(),subject:$("#contactsubject").val(),message:$("#contactmessage").val(),dinnertime:$("#dinnertime").val()}),dataType:"json",contentType:"application/json",success:function(e){a("Thank you. We will get back to you within 2 business days."),$("#contactname").val(""),$("#contactemail").val(""),$("#contactsubject").val(""),$("#contactmessage").val("")},error:function(e){e&&t("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}}):t("Please provide a valid email address.")})}if($(".local-signup").length){e()&&window.alert("For a better website experience, please use other browsers such as Chrome, Firefox or Safari."),$(".local-signup .form-group.email input#email").val(window.sessionStorage.getItem("signupemail")),$(".local-signup .form-group.identification input#identification").val(window.sessionStorage.getItem("signupidentification"));var G=$("input[name='user[local][role]']").val();$(".local-signup").submit(function(e){var t=$("input[name='user[local][email]']").val(),a=$("input[name='user[local][password]']").val(),o=$("input[name='user[local][confirm]']").val(),n=$("input[name='user[local][identification]']").val();k(".local-signup .email",".local-signup .form-group-text.temail",t),j(".local-signup .password",".local-signup .form-group-text.tpassword",a),j(".local-signup .confirm",".local-signup .form-group-text.tconfirm",o),S(".local-signup .confirm",".local-signup .form-group-text.tconfirm",a,o),C(G,n),!1!==k(".local-signup .email",".local-signup .form-group-text.temail",t)&&!1!==j(".local-signup .password",".local-signup .form-group-text.tpassword",a)&&!1!==j(".local-signup .confirm",".local-signup .form-group-text.tconfirm",o)&&!1!==S(".local-signup .confirm",".local-signup .form-group-text.tconfirm",a,o)&&!1!==C(G,n)||e.preventDefault(),window.sessionStorage.setItem("signupemail",t),window.sessionStorage.setItem("signupidentification",n)});var H,K=$(".local-signup .form-group");K.on("keyup",function(){clearTimeout(H),H=setTimeout(O,1e3)}),K.on("keydown",function(){clearTimeout(H)}),$(".local-signup .form-group.email").focusout(function(){k(".local-signup .email",".local-signup .form-group-text.temail",$("input[name='user[local][email]']").val())}),$(".local-signup .form-group.password").focusout(function(){j(".local-signup .password",".local-signup .form-group-text.tpassword",$("input[name='user[local][password]']").val())}),$(".local-signup .form-group.confirm").focusout(function(){var e=$("input[name='user[local][password]']").val(),t=$("input[name='user[local][confirm]']").val();j(".local-signup .confirm",".local-signup .form-group-text.tconfirm",t),S(".local-signup .confirm",".local-signup .form-group-text.tconfirm",e,t)}),$(".local-signup .form-group.identification").focusout(function(){var e=$("input[name='user[local][identification]']").val();C(G,e)})}if($(".local-login").length&&(e()&&window.alert("For a better website experience, please use other browsers such as Chrome, Firefox or Safari."),$(".local-login .form-group input:text:visible:first").focus(),$(".local-login .form-group input#email").val(window.localStorage.getItem("loginemail")),$(".local-login").submit(function(e){var t=$("input[name='user[local][email]']").val();window.localStorage.setItem("loginemail",t)})),$(".editemployer").length){e()&&(window.alert("For a better website experience, please use other browsers such as Chrome, Firefox or Safari."),$(".editemployer .jobscope input").css("display","inline-block"));var Z=$(".editemployer").data("employer")[0];o(Z);var X=".editemployer .form-group ";$(X+"#housetype").val(Z.profile.housetype.split(",")[0]),$(X+"#maritalstatus").val(Z.profile.maritalstatus),$(X+"#adult").val(Z.household.adult),$(X+"#teenager").val(Z.household.teenager),$(X+"#children").val(Z.household.children),$(X+"#infant").val(Z.household.infant),$(X+"#elderly").val(Z.household.elderly),$(X+"#disabled").val(Z.household.disabled),$(X+"#otherduties").val(Z.jobscope.otherduties),!0===Z.jobscope.infantcare&&($(X+"#infantcare").prop("checked",!0),$(X+"#infantcarehidden")[0].disabled=!0),!0===Z.jobscope.childcare&&($(X+"#childcare").prop("checked",!0),$(X+"#childcarehidden")[0].disabled=!0),!0===Z.jobscope.elderlycare&&($(X+"#elderlycare").prop("checked",!0),$(X+"#elderlycarehidden")[0].disabled=!0),!0===Z.jobscope.disabledcare&&($(X+"#disabledcare").prop("checked",!0),$(X+"#disabledcarehidden")[0].disabled=!0),!0===Z.jobscope.housework&&($(X+"#housework").prop("checked",!0),$(X+"#houseworkhidden")[0].disabled=!0),!0===Z.jobscope.cooking&&($(X+"#cooking").prop("checked",!0),$(X+"#cookinghidden")[0].disabled=!0),!0===Z.jobscope.handledog&&($(X+"#handledog").prop("checked",!0),$(X+"#handledoghidden")[0].disabled=!0),!0===Z.jobscope.handlecat&&($(X+"#handlecat").prop("checked",!0),$(X+"#handlecathidden")[0].disabled=!0),"Landed"===Z.profile.housetype.split(",")[0]&&$(".editemployer .form-group-unitno").addClass("hidden"),"Others"===Z.profile.housetype.split(",")[0]&&($(X+".housetypeother").removeClass("hidden"),$(X+".housetypeother").val(Z.profile.housetype.split(",")[1])),$(X+"#housetype").change(function(){"Landed"===$(X+"#housetype").val()?$(".editemployer .form-group-unitno").addClass("hidden"):$(".editemployer .form-group-unitno").removeClass("hidden"),"Others"!==$(X+"#housetype").val()?$(X+".housetypeother").addClass("hidden"):$(X+".housetypeother").removeClass("hidden")}),P(),$(X+"select").change(function(){P()}),$(X+".checkbox-inline").click(function(){function e(e){!0===$(X+e)[0].checked?($(X+e).val("true"),$(X+e+"hidden")[0].disabled=!0):$(X+e+"hidden")[0].disabled=!1}e("#infantcare"),e("#childcare"),e("#elderlycare"),e("#disabledcare"),e("#housework"),e("#cooking"),e("#handledog"),e("#handlecat")}),$("#editemployersave").on("click",function(){$(".editemployer #saveOrSubmit").val("save")}),$("#editemployersubmit").on("click",function(){$(".editemployer #saveOrSubmit").val("submit")}),$(".editemployer .editemployerformbuttons #editemployersave").length&&($(".editemployer #editemployersave").css({position:"fixed",bottom:"50px",right:"35px",width:"15%","min-width":"60px"}).text("Save"),$(window).scroll(function(){var e=$(".editemployer .editemployerformbuttons").offset().top;$(".editemployer #editemployersave").offset().top>e&&$(".editemployer #editemployersave").css({position:"",bottom:"",right:"",width:"","min-width":""}).text("Save My Progress")})),$(".editemployer").submit(function(e){"Landed"===$(X+"#housetype").val()&&$(X+"#unitno").val("N/A"),"Others"!==$(X+"#housetype").val()&&$(X+".housetypeother").val(""),$(X+"#contactnumber").val()||$(X+"#contactnumber").val("0"),_()?(e.preventDefault(),t("Wrong format provided! Please provide Numbers in the yellow boxes.")):I()?(e.preventDefault(),t("Exceeded Character Limit! Please resolve the errors in yellow.")):"submit"===$('input[name="employer[saveOrSubmit]"]').val()&&B()&&(e.preventDefault(),t("Fill in all required '*' fields! Please resolve the errors in red."))})}if($(".edithelper").length){e()&&(window.alert("For a better website experience, please use other browsers such as Chrome, Firefox or Safari."),$(".edithelper .skillsradio input").css("display","inline-block"));var Q=$(".edithelper").data("helper")[0];o(Q);var V=".edithelper .form-group ";D(".workingexperienceyear",50),E("#firstcountry"),E("#secondcountry"),E("#thirdcountry"),$(V+"#nationality").val(Q.profile.nationality),$(V+"#portrepatriated").val(Q.profile.portrepatriated),$(V+"#religion").val(Q.profile.religion),$(V+"#dietaryrestriction").val(Q.profile.dietaryrestriction),$(V+"#foodhandlingrestriction").val(Q.profile.foodhandlingrestriction),$(V+"#siblings").val(Q.profile.siblings),$(V+"#maritalstatus").val(Q.profile.maritalstatus),$(V+"#children").val(Q.profile.children),$(V+"#phagency").val(Q.profile.phagency),$(V+"#educationlevel").val(Q.education.educationlevel),$(V+"#otherqualifications").val(Q.education.otherqualifications),$(V+"#firstfrom").val(Q.workingexperience.first.from),$(V+"#firstto").val(Q.workingexperience.first.to),$(V+"#firstcountry").val(Q.workingexperience.first.country),$(V+"#firstduties").val(Q.workingexperience.first.duties),$(V+"#secondfrom").val(Q.workingexperience.second.from),$(V+"#secondto").val(Q.workingexperience.second.to),$(V+"#secondcountry").val(Q.workingexperience.second.country),$(V+"#secondduties").val(Q.workingexperience.second.duties),$(V+"#thirdfrom").val(Q.workingexperience.third.from),$(V+"#thirdto").val(Q.workingexperience.third.to),$(V+"#thirdcountry").val(Q.workingexperience.third.country),$(V+"#thirdduties").val(Q.workingexperience.third.duties),A(Q.skills.english,"english"),A(Q.skills.singapore,"singapore"),A(Q.skills.infantcare,"infantcare"),A(Q.skills.childcare,"childcare"),A(Q.skills.elderlycare,"elderlycare"),A(Q.skills.disabledcare,"disabledcare"),A(Q.skills.housework,"housework"),A(Q.skills.cooking,"cooking"),A(Q.skills.handledog,"handledog"),A(Q.skills.handlecat,"handlecat"),function(){if(D("#dob-year",100),null===Q.profile.dob)$(V+"#dob-date").val(""),$(V+"#dob-month").val(""),$(V+"#dob-year").val("");else{var e=new Date(Q.profile.dob);$(V+"#dob-date").val((e.getDate()<10?"0":"")+e.getDate()),$(V+"#dob-month").val((e.getMonth()<9?"0":"")+(e.getMonth()+1)),$(V+"#dob-year").val(e.getFullYear())}}(),$(V+"#nationality").change(function(){var e=$(V+"#nationality").val(),t=["+63","+91","+62","+95","+94"],a=["Philippines","India","Indonesia","Myanmar","Sri_Lanka"].indexOf(e);a>=0&&$(V+"#countrycode").val(t.slice(a,a+1))}),Q.profile.children>0&&$(".edithelper .form-group-children").removeClass("hidden"),$(V+"#children").change(function(){$(V+"#children").val()>0?$(".edithelper .form-group-children").removeClass("hidden"):$(".edithelper .form-group-children").addClass("hidden")}),$("#edithelpersave").on("click",function(){$(".edithelper #saveOrSubmit").val("save")}),$("#edithelpersubmit").on("click",function(){$(".edithelper #saveOrSubmit").val("submit")}),$(".edithelper .edithelperformbuttons #edithelpersave").length&&($(".edithelper #edithelpersave").css({position:"fixed",bottom:"30px",right:"35px",width:"15%","min-width":"60px"}).text("Save"),$(window).scroll(function(){var e=$(".edithelper .edithelperformbuttons").offset().top;$(".edithelper #edithelpersave").offset().top>e&&$(".edithelper #edithelpersave").css({position:"",bottom:"",right:"",width:"","min-width":""}).text("Save My Progress")})),$(".edithelper").submit(function(e){var a=$(V+"#dob-date").val(),o=$(V+"#dob-month").val(),n=$(V+"#dob-year").val();""!==a&&""!==o&&""!==n&&$(V+"#dob").val(new Date(n+"-"+o+"-"+a+"T01:00:00+01:00")),$(V+"#contactnumber").val()||$(V+"#contactnumber").val("0"),$(V+"#children").val()<1&&$(V+"#ageofyoungest").val("0"),q()?(e.preventDefault(),t("Wrong format provided! Please provide Numbers in the yellow boxes.")):F()?(e.preventDefault(),t("Exceeded Character Limit! Please resolve the errors in yellow.")):"submit"===$('input[name="helper[saveOrSubmit]"]').val()&&M()&&(e.preventDefault(),t("Fill in all required '*' fields! Please resolve the errors in red."))})}if($(".profile-changeidentification").length&&$(".profile-changeidentification").on("click",function(e){e.preventDefault(),swal("Warning","To change identification, send a copy of your Identification to 'support@maidicare.com'.","warning")}),$(".browsepage").length){var ee={};decodeURIComponent(window.location.search.substring(1)).replace(/=/g,"~*").replace(/\+/g," ").split("&").forEach(function(e){ee[e.split("~*")[0]]=e.split("~*")[1]}),ee.query&&($('.browsepage input[name="query"]').val(ee.query),$(".browse-content .querytext p span.glyphicon").css("visibility","visible"),ee.query.length>30?$(".browsepage .browse-content span.qtext").text("'"+ee.query.substring(0,30)+"...'"):$(".browsepage .browse-content span.qtext").text("'"+ee.query+"'")),$(".browsepage .browse-pagenumber a.pagenumber"+ee.page).addClass("active"),N(ee.infantcare,"infantcare"),N(ee.childcare,"childcare"),N(ee.elderlycare,"elderlycare"),N(ee.disabledcare,"disabledcare"),N(ee.transfer,"transfer"),N(ee.singapore,"singapore"),ee.nationality&&$('.browsepage select[name="nationality"]').val(ee.nationality),ee.religion&&$('.browsepage select[name="religion"]').val(ee.religion),ee.maritalstatus&&$('.browsepage select[name="maritalstatus"]').val(ee.maritalstatus),R(),J(),$('.browsepage input[name="infantcare"], .browsepage input[name="childcare"], .browsepage input[name="elderlycare"], .browsepage input[name="disabledcare"], .browsepage input[name="transfer"], .browsepage input[name="singapore"], .browsepage select[name="nationality"], .browsepage select[name="religion"], .browsepage select[name="maritalstatus"]').on("change",function(){$('.browse-menu input[name="page"]').val(1),window.history.replaceState(null,null,window.location.href.replace(/(page=)[0-9]{1,}/,"page=1")),Y()}),$(".browsepage .clearquerytext").on("click",function(){$('.browsepage input[name="query"]').val(""),$(".browsepage").submit()}),$(".browsepage .clearfilter").on("click",function(){function e(e,t){"checkbox"===t?$('.browsepage input[name="'+e+'"]:checked').attr("checked",!1):"radio"===t?$('.browsepage input[name="'+e+'"]').val("All"):"ddl"===t&&$('.browsepage select[name="'+e+'"]').val("All")}e("infantcare","checkbox"),e("childcare","checkbox"),e("elderlycare","checkbox"),e("disabledcare","checkbox"),e("transfer","radio"),e("singapore","radio"),e("nationality","ddl"),e("religion","ddl"),e("maritalstatus","ddl"),$(".browsepage").submit()}),$("#browseform").submit(function(){""!==$('.browsepage input[name="query"]').val()&&$('.browse-menu input[name="page"]').val(1)}),$(".browsepage button.togglefilter").on("click",function(){$(".browsepage .browse-sidebar").slideToggle("fast",function(){$(".browsepage .browse-sidebar").is(":visible")?($(".browsepage button.togglefilter").css({"background-color":"black",color:"orange"}),$("html, body").animate({scrollTop:$(".browsepage").offset().top-50},1e3,"easeInOutExpo")):$(".browsepage button.togglefilter").css({"background-color":"orange",color:"white"})})})}if($(".browseview").length){var te=[];if($(".browseview").data("hirearray").forEach(function(e,t){te.push(e.huserid)}),$(".browseview .hirehelper").val()){var ae=$(".browseview .hirehelper").val().split("&")[0],oe=$(".browseview .hirehelper").val().split("&")[1];te.indexOf(ae)>=0&&$(".browseview .hirehelper").removeClass("btn-primary").addClass("btn-secondary").text("Selected")}$(".browseview .relatedContainer .panel").on({mouseenter:function(){$(this).children().css({"background-color":"#68C3A3",color:"black",transition:"all 0.3s ease","-webkit-transform":"scale(1.05)","-ms-transform":"scale(1.05)",transform:"scale(1.05)"})},mouseleave:function(){$(this).children().css({"background-color":"#f5f5f5",color:"#717f86",transition:"all 0.3s ease","-webkit-transform":"scale(1.0)","-ms-transform":"scale(1.0)",transform:"scale(1.0)"})},click:function(){window.location=$(this).children(".viewbutton").attr("href")}}),$(".browseview .hirehelper").on("click",function(){$.ajax({url:"/browse/hire",type:"POST",data:JSON.stringify({helperuserid:ae,helperid:oe}),dataType:"json",contentType:"application/json",cache:!1,success:function(e){"success"===e.status?a(e.message):"error"===e.status?t(e.message):"redirect"===e.status&&(window.location=e.message)},error:function(e){e&&t("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})}),$(".browseview .skypehelper").on("click",function(){swal({title:"Skype",text:"Request a Skype Call?",type:"warning",showCancelButton:!0,confirmButtonColor:"rgb(38, 166, 91)",cancelButtonColor:"rgb(221, 75, 57)",confirmButtonText:"Yes",cancelButtonText:"No",confirmButtonClass:"btn-success",cancelButtonClass:"btn-danger",buttonsStyling:!0}).then(function(){$.ajax({url:"/browse/skype",type:"POST",data:JSON.stringify({helperuserid:ae,helperid:oe}),dataType:"json",contentType:"application/json",cache:!1,success:function(e){"success"===e.status?a(e.message):"error"===e.status?t(e.message):"redirect"===e.status&&(window.location=e.message)},error:function(e){e&&t("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})})})}if($(".profile-hire").length){var ne=$(".profile-hire").data("userid");$('.profile-hire-filter select[name="filter"]').on("change",function(){var e=$('.profile-hire-filter select[name="filter"]').val();$.ajax({url:"/users/"+ne+"/shortlists/filter",type:"POST",data:JSON.stringify({filter:e}),dataType:"json",contentType:"application/json",cache:!1,success:function(t){function a(e){return new Date(1e3*parseInt(e.substring(0,8),16))}var o=["#95A5A6","#1E824C","#3A539B","#E87E04","#96281B"],n=["All","confirmed","accepted","pending","rejected"].indexOf(e);$(".profile-hire-filter").css("background-color",o.slice(n,n+1)),$(".hireContainer").empty();var i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.hireInfo.length>0&&t.hireInfo.forEach(function(e){function o(e){var t="";return t=e.user.profile.photo.version?"https://res.cloudinary.com/dbjdqrw9o/image/upload/w_300,h_300,c_thumb,g_face/v"+e.user.profile.photo.version+"/"+e.user._id+"."+e.user.profile.photo.format:"/images/noimg.jpg",'<a href="/browse/view/"'+e.user._id+"><img src="+t+' alt="profile image"></a>'}function n(e){var a="";return"employer"===t.role?a='<div class="profile-hire-userpic">'+o(e)+"</div>":"helper"===t.role&&(a='<div class="profile-hire-userpic"><a href="/users/employer/"'+e.user.userid+'><img src="/images/employer.png" alt="profile image"></a></div>'),'<div class="col-md-3 col-sm-3">'+a+"</div>"}function r(e){var a="";if("helper"===t.role){var o="";o="Others"===e.user.profile.housetype.split(",")[0]?e.user.profile.housetype.replace(/,/,", "):e.user.profile.housetype.split(",")[0].replace(/_/g," "),a='<a href="/users/employer/'+e.user.userid+'">'+e.user.profile.fullname+"</a><p>"+o+" | "+e.user.profile.maritalstatus+"</p>"}else{var n="";n=e.user.transfer?"<p>"+e.user.profile.nationality+" | "+e.user.profile.maritalstatus+" | Transfer</p>":"<p>"+e.user.profile.nationality+" | "+e.user.profile.maritalstatus+"</p>",a='<a href="/browse/view/'+e.user._id+'">'+e.user.profile.firstname+"</a>"+n}return'<div class="col-md-6 col-sm-6">'+a+'<div class="well">'+e.message+"</div></div>"}function s(e){var a="";return"helper"===t.role&&"pending"===e.status&&(a='<button class="btn btn-success userresponse" value="'+e._id+',Accept">Accept</button><button class="btn btn-danger userresponse" value="'+e._id+',Reject">Reject</button>'),"helper"===t.role&&"accepted"===e.status&&(a='<button class="btn btn-danger userresponse" value="'+e._id+',Reject">Reject</button>'),"employer"===t.role&&"pending"===e.status?a='<button class="btn btn-danger userresponse" value="'+e._id+',Reject">Reject</button>':"employer"===t.role&&"accepted"===e.status&&(a='<button class="btn btn-success userresponse" value="'+e._id+',Confirm">Confirm</button><button class="btn btn-danger userresponse" value="'+e._id+',Reject">Reject</button>'),'<div class="col-md-3 col-sm-3"><div class="profile-hire-response"><input type="hidden" class="helperinput" name="helperinput" value="">'+a+"</div></div>"}var l=a(e._id.toString()),c=l.getMinutes()<10?"0"+l.getMinutes():l.getMinutes(),p=l.getDate().toString()+" "+i[l.getMonth()]+" "+l.getFullYear().toString()+", "+l.getHours()+":"+c;$(".hireContainer").append(function(e){return'<div class="col-md-12 col-sm-12 profile-hire-content"><h4>'+p+'</h4><h4 class="right" id='+e.status+">"+e.status+"</h4><hr>"+n(e,t.role)+r(e)+s(e)+"</div>"}(e)),z()})},error:function(e){e&&t("Something went wrong! Please refresh the page and try again.")}})}),z()}if($(".ajax-forgotpassword").length&&$(".ajax-forgotpassword").submit(function(e){e.preventDefault();var o=$('.ajax-forgotpassword input[name="email"]').val();n(o)?$.ajax({url:"/password/forgot",type:"POST",data:JSON.stringify({email:o}),dataType:"json",contentType:"application/json",success:function(e){"success"===e.status?a(e.message):(t(e.message),$('.ajax-forgotpassword input[name="email"]').val(""))},error:function(e){e&&t("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}}):t("Please provide a valid email.")}),$(".ajax-resetpassword").length&&$(".ajax-resetpassword").submit(function(e){e.preventDefault();var a=window.location.pathname.split("/password/validate/")[1].split("&")[0],o=$('.ajax-resetpassword input[name="password"]').val(),n=$('.ajax-resetpassword input[name="confirm"]').val();o.length>=6&&n.length>=6?o===n?$.ajax({url:"/password/reset",type:"POST",data:JSON.stringify({userid:a,password:o,confirm:n}),dataType:"json",contentType:"application/json",success:function(e){"success"===e.status?window.location=e.url:t(e.message)},error:function(e){e&&t("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}}):t("The passwords do not match."):t("Password must be at least 6 characters.")}),$(".profile-activate-reset").length>0&&$(".profile-activate-reset").on("click",function(){var e=$(".profile-activate-reset").data("id");$.ajax({url:"/users/"+e+"/activate/reset",type:"POST",cache:!1,success:function(e){"success"===e.status&&a(e.message)},error:function(e){e&&t("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})}),$(".postadmincode").length>0&&$(".postadmincode").on("click",function(){$.ajax({url:"/admin/newcode",type:"POST",error:function(e){e&&t("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})}),$(".admin-remove-navbar").length>0){if($(".navbar-brand").text("Admin").attr("href","/admin"),$(".nav.navbar-nav.navbar-right").empty(),$(".nav.navbar-nav.navbar-right").append('<li><a target="_blank" href="/admin/email">Send an Email</a></li><li><a class="btn btn-danger"href="/logout">Logout</a></li>'),$(".admin-home-container .squarebox").on({mouseenter:function(){$(this).css({"background-color":"#446CB3",color:"#fff",transition:"all 0.3s ease","-webkit-transform":"scale(1.02)","-ms-transform":"scale(1.02)",transform:"scale(1.02)","z-index":1})},mouseleave:function(){$(this).css({"background-color":"#6BB9F0",color:"black",transition:"all 0.3s ease","-webkit-transform":"scale(1.0)","-ms-transform":"scale(1.0)",transform:"scale(1.0)","z-index":0})}}),$(".admin-shortlist-search").length>0&&$(".admin-shortlist-search").on("click",function(){var e=$("input#hireid").val();""!==e&&(window.location="/admin/shortlists/"+e)}),$(".adminUserAccount").length>0){var ie=$(".adminUserAccount").data("admin")[0].userid;L(ie.available,"available"),L(ie.recruit,"recruit"),L(ie.hire,"hire"),L(ie.activate.status,"activatestatus")}if($(".admin-delete-user").length>0&&$(".admin-delete-user").on("click",function(){var e=$(".admin-delete-user").val(),o=e.split("&")[0],n=e.split("&")[1],i=e.split("&")[2];swal({title:"Type email to Delete",text:i,input:"email",showCancelButton:!0,confirmButtonColor:"rgb(221, 75, 57)",confirmButtonText:"Delete",showLoaderOnConfirm:!0,preConfirm:function(e){return new Promise(function(t,a){setTimeout(function(){e===i?t():a("Input does not match Email.")},1e3)})}}).then(function(e){$.ajax({url:"/admin/users/delete",type:"POST",cache:!1,data:JSON.stringify({id:o,role:n}),dataType:"json",contentType:"application/json",success:function(e){"success"===e.status?(a("Account Deleted! Redirecting to Admin Menu..."),setTimeout(function(){window.location="/admin"},2500)):t(e.message)},error:function(e){e&&t("Please refresh the page and try again.")}})})}),$(".admin-helper-transfer").length>0&&$(".admin-helper-transfer").on("click",function(){$.ajax({url:"/admin/users/helpertransfer",type:"POST",cache:!1,data:JSON.stringify({id:$(".admin-helper-transfer").val()}),dataType:"json",contentType:"application/json",success:function(e){"success"===e.status?window.location.reload():t(e.message)},error:function(e){e&&t("Please refresh the page and try again.")}})}),$(".admin-hire-filter").length>0){var re=window.location.pathname.split("/admin/shortlists/all/")[1];$('.admin-hire-filter select[name="filter"]').val(re),$('.admin-hire-filter select[name="filter"]').on("change",function(){var e=$('.admin-hire-filter select[name="filter"]').val();window.location="/admin/shortlists/all/"+e})}$(".admin-change-hire-status").length>0&&$(".admin-change-hire-status select#status").on("change",function(){var e=$(this).data("hireid"),a=$(this).val();$.ajax({url:"/admin/shortlists/"+e,type:"POST",cache:!1,data:JSON.stringify({status:a}),dataType:"json",contentType:"application/json",success:function(e){window.location.reload()},error:function(e){e&&t("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})}),$(".export-hire-data").length>0&&$(".export-hire-data").on("click",function(){$.ajax({url:"/admin/shortlists/"+$(this).val()+"/export",type:"POST",cache:!1,success:function(e){function t(e,t){var a="data:application/json;charset=utf-8,"+JSON.stringify(e),o=encodeURI(a),n=document.createElement("a");n.setAttribute("href",o),n.setAttribute("download",t),n.click()}"success"===e.status&&(t(e.helperData,"helper_"+e.helperData.userid.local.email.replace(".",",")),t(e.employerData,"employer_"+e.employerData.userid.local.email.replace(".",",")))},error:function(e){e&&t("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})}),$(".admin-email-all-inactive-helper").length>0&&($(".admin-email-all-inactive-helper").on("click",function(){$.ajax({url:"/admin/inactive/helpers",type:"POST",cache:!1,success:function(e){"success"===e.status?a(e.message):t(e.message)},error:function(e){e&&t("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})}),$(".admin-email-inactive-helper").on("click",function(){var e=$(this).val();$.ajax({url:"/admin/inactive/helpers/"+e,type:"POST",cache:!1,success:function(e){"success"===e.status?a(e.message):t(e.message)},error:function(e){e&&t("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})})),$(".admin-email-inactive-hire").length>0&&$(".admin-email-inactive-hire").on("click",function(){var e=$(this).val();$.ajax({url:"/admin/inactive/shortlists",type:"POST",cache:!1,data:JSON.stringify({userids:e}),dataType:"json",contentType:"application/json",success:function(e){"success"===e.status&&a(e.message)},error:function(e){e&&t("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})})}$("#demo").on("click",function(){$.ajax({url:"/api/users/data",type:"GET",dataType:"json"}).done(function(e){e.forEach(function(e){$.ajax({type:"POST",url:"/api/users/demo",data:e})})})}),$("#remove").on("click",function(){$.ajax({type:"delete",url:"/api/users/remove"})})});
