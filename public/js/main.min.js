$(document).ready(function(){function e(){var e=window.navigator.userAgent,t=e.indexOf("MSIE "),a=e.indexOf("Trident/"),o=e.indexOf("Edge/");if(t>0||a>0||o>0)return!0}function t(e){swal({title:"Error",text:e,type:"error",confirmButtonColor:"rgb(221, 75, 57)"})}function a(e){swal({title:"Success",text:e,type:"success",confirmButtonColor:"rgb(38, 166, 91)"})}function o(e){return/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(e)}function n(e){var t=new Date,a=new Date(e),o=t.getFullYear()-a.getFullYear(),n=t.getMonth()-a.getMonth();return(n<0||0===n&&t.getDate()<a.getDate())&&o--,o}function i(e){$(e).css({"border-color":"#ccc",color:"#555",border:"1px solid #ccc"})}function r(e){$(e).css({color:"#a94442",border:"2px solid #a94442"})}function s(e){$(e).css({color:"#8a6d3b",border:"2px solid #F7CA18"})}function l(e,t,a){var o=e+'[name="'+t+'"]';return $(o).val().length>a?(s(o),!0):(i(o),!1)}function c(e,t,a){var o,n=t+'[name="'+a+'"]',r=$(n).val();return e?new RegExp(/^(\s*|\d+)$/).test(r)?(i(n),o=!1):(s(n),o=!0):new RegExp(/^\d+$/).test(r)?(i(n),o=!1):(s(n),o=!0),o}function p(e,t){var a=e+'[name="'+t+'"]';return $(a).val().length>0?(i(a),!1):(r(a),!0)}function u(e,t){var a=e+'[name="'+t+'"]';return+$(a).val()>0?(i(a),!1):(r(a),!0)}function d(){function e(e,t){""===e?r("select#dob-"+t):i("select#dob-"+t)}var t=$("select#dob-date").val(),a=$("select#dob-month").val(),o=$("select#dob-year").val();return""!==t&&""!==a&&""!==o?(i("select#dob-date"),i("select#dob-month"),i("select#dob-year"),!1):(e(t,"date"),e(a,"month"),e(o,"year"),!0)}function f(){$(window).width()>768&&$(".dropdown").on({mouseenter:function(){$(this).find(".dropdown-menu").stop(!0,!0).delay(150).fadeIn(500)},mouseleave:function(){$(this).find(".dropdown-menu").stop(!0,!0).delay(150).fadeOut(500)}})}function h(e){$(e).css("color","#717f86"),$(e).find(".right-addon").remove(),$(e).removeClass("has-error has-success has-warning")}function m(e){h(e),$(e).css("color","#3c763d"),$(e).addClass("has-success"),$(e).append('<i class="right-addon glyphicon glyphicon-ok"></i>')}function g(e){h(e),$(e).css("color","#a94442"),$(e).addClass("has-error"),$(e).append('<i class="right-addon glyphicon glyphicon-remove"></i>')}function v(e){h(e),$(e).css("color","#8a6d3b"),$(e).addClass("has-warning"),$(e).append('<i class="right-addon glyphicon glyphicon-warning-sign"></i>')}function b(e){$(e).css({visibility:"hidden",color:"#717f86"}),$(e).text("label")}function w(e,t){b(e),$(e).css({visibility:"visible",color:"#a94442"}),$(e).text(t)}function y(e,t){b(e),$(e).css({visibility:"visible",color:"#8a6d3b"}),$(e).text(t)}function x(e,a,n){return n.length<1?(h(e),b(a),!1):o(n)?void $.ajax({url:"/users/emailtaken",type:"POST",cache:!1,data:JSON.stringify({email:n}),dataType:"json",contentType:"application/json",success:function(t){if("success"!==t.status)return g(e),w(a,"Email has been taken."),!1;m(e),b(a)},error:function(e){e&&t("Something went wrong! Please refresh the page and try again.")}}):(g(e),w(a,"Please provide a valid email"),!1)}function k(e,t,a){var o=new RegExp(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9, !@#$%^&*]).{6,}$/);return a.length<1?(h(e),b(t),!1):a.length<6?(g(e),w(t,"Minimum 6 characters"),!1):void(!1===o.test(a)?(v(e),y(t,"Password not strong")):(m(e),b(t)))}function j(e,t,a,o){return o.length<1?(h(e),b(t),!1):a!==o?(g(e),w(t,"Passwords do not match"),!1):void 0}function S(e){for(var t=e.slice(1,8).split("").map(function(e){return parseInt(e,10)}),a=[2,7,6,5,4,3,2],o=0,n=0;n<t.length;n++)o+=t[n]*a[n];var i=e.slice(0,1).toUpperCase();"T"!==i&&"G"!==i||(o+=4);var r=11-o%11,s=["A","B","C","D","E","F","G","H","I","Z","J"];return"F"!==i&&"G"!==i||(s=["K","L","M","N","P","Q","R","T","U","W","X"]),s.slice(r-1,r).toString()===e.slice(8,9).toUpperCase()}function T(e,t){var a=new RegExp(/^([S,T,s,t][0-9]{7}[A-J,Z,a-j,z])$|^([F,G,f,g][0-9]{7}[K-R,T-X,k-r,t-x])$/),o=".local-signup .identification",n=".local-signup .form-group-text.tidentification";if(t.length<1)return h(o),b(n),!1;if("helper"===e)m(o),b(n);else{if("employer"!==e||!a.test(t)||!S(t))return g(o),w(n,"Invalid Identification"),!1;m(o),b(n)}}function C(){var e=$("input[name='user[local][email]']").val(),t=$("input[name='user[local][password]']").val(),a=$("input[name='user[local][confirm]']").val(),o=$("input[name='user[local][identification]']").val();x(".local-signup .email",".local-signup .form-group-text.temail",e),k(".local-signup .password",".local-signup .form-group-text.tpassword",t),k(".local-signup .confirm",".local-signup .form-group-text.tconfirm",a),j(".local-signup .confirm",".local-signup .form-group-text.tconfirm",t,a),T(W,o)}function P(){var e=parseInt($(Z+"#adult").val(),10)+parseInt($(Z+"#teenager").val(),10)+parseInt($(Z+"#children").val(),10)+parseInt($(Z+"#infant").val(),10)+parseInt($(Z+"#elderly").val(),10)+parseInt($(Z+"#disabled").val(),10);$(".totalnoinhousehold").text(e)}function O(){return!!(c(!1,"input","employer[local][contact][number]")|c(!0,"input","employer[profile][postalcode]"))}function I(){return!!(l("input","employer[profile][fullname]",50)|l("input","employer[profile][blockhouseno]",20)|l("input","employer[profile][unitno]",20)|l("input","employer[profile][streetname]",50)|l("textarea","employer[jobscope][otherduties]",300))}function B(){return!!(p("input","employer[profile][fullname]")|p("select","employer[profile][housetype]")|p("input","employer[profile][blockhouseno]")|p("input","employer[profile][unitno]")|p("input","employer[profile][streetname]")|p("select","employer[profile][maritalstatus]")|u("input","employer[profile][postalcode]")|u("input","employer[local][contact][number]"))}function _(e,t){for(var a=(new Date).getFullYear(),o=0;o<t;o++){var n=a-o;$(Q+e).append('<option value="'+n+'">'+n+"</option>")}}function D(e){var t=$('<option value="">-- select one --</option><option value="Brunei">Brunei</option><option value="Hong_Kong">Hong Kong</option><option value="India">India</option><option value="Indonesia">Indonesia</option><option value="Middle_East">Middle East</option><option value="Myanmar">Myanmar</option><option value="Philippines">Philippines</option><option value="Singapore">Singapore</option><option value="Sri_Lanka">Sri Lanka</option><option value="Taiwan">Taiwan</option>');$(Q+e).append(t)}function A(e,t){!0===e?$(Q+"#"+t+"yes").prop("checked",!0):$(Q+"#"+t+"no").prop("checked",!0)}function E(){return!!(c(!1,"input","helper[local][contact][number]")|c(!1,"input","helper[profile][heightcm]")|c(!1,"input","helper[profile][weightkg]")|c(!0,"input","helper[profile][ageofyoungest]"))}function q(){return!!(l("input","helper[profile][firstname]",20)|l("input","helper[profile][middlename]",20)|l("input","helper[profile][familyname]",20)|l("input","helper[profile][pob]",100)|l("input","helper[profile][residentialaddress]",100)|l("input","helper[profile][allergies]",50)|l("input","helper[education][fieldofstudy]",50)|l("textarea","helper[education][otherqualifications]",300)|l("textarea","helper[workingexperience][first][duties]",300)|l("textarea","helper[workingexperience][second][duties]",300)|l("textarea","helper[workingexperience][third][duties]",300))}function F(){return!!(d()|p("input","helper[profile][firstname]")|p("input","helper[profile][familyname]")|p("input","helper[profile][pob]")|p("select","helper[profile][nationality]")|p("input","helper[local][contact][countrycode]")|p("input","helper[profile][residentialaddress]")|p("select","helper[profile][portrepatriated]")|p("select","helper[profile][religion]")|p("select","helper[profile][dietaryrestriction]")|p("select","helper[profile][foodhandlingrestriction]")|p("select","helper[profile][maritalstatus]")|p("select","helper[profile][phagency]")|p("select","helper[education][educationlevel]")|p("input","helper[education][fieldofstudy]")|u("input","helper[local][contact][number]")|u("input","helper[profile][heightcm]")|u("input","helper[profile][weightkg]"))}function M(e,t){e&&$('.browsepage input[name="'+t+'"][value="'+e+'"]').attr("checked","checked")}function N(){$(".browsepage .helperContainer .panel").on({mouseenter:function(){$(this).children().css({"background-color":"#68C3A3",color:"black",transition:"all 0.3s ease","-webkit-transform":"scale(1.05)","-ms-transform":"scale(1.05)",transform:"scale(1.05)"})},mouseleave:function(){$(this).children().css({"background-color":"#f5f5f5",color:"#717f86",transition:"all 0.3s ease","-webkit-transform":"scale(1.0)","-ms-transform":"scale(1.0)",transform:"scale(1.0)"})},click:function(){window.location=$(this).children(".viewbutton").attr("href")}})}function R(){var e={};$(".browsepage").serialize().replace(/=/g,",").split("&").forEach(function(t){e[t.split(",")[0]]=t.split(",")[1]}),$.ajax({url:"/browse/filter",type:"POST",data:e,dataType:"json",cache:!1,success:function(e){if($(".helperContainer").empty(),$(".browsepage .querytext span.found").text(e.totalResults+" Found"),e.helperInfo.forEach(function(e){$(".helperContainer").append(function(t,a){return'<div class="col-sm-4 col-xs-12"><div class="panel panel-default"><a class="viewbutton" href="/browse/view/'+e._id+'"></a><div class="panel-body"><div class="browse-helperpic"><img src='+t+' alt="profile image"></div><div class="smarticons">'+a+'</div></div><div class="panel-footer"><h4>'+e.profile.firstname+"<span>, "+n(e.profile.dob)+"<span></h4><p>"+e.profile.maritalstatus+" | "+e.profile.nationality.replace(/_/g," ")+'</p><img class="flagicon" src="/images/logo/'+e.profile.nationality.toLowerCase()+'_flag.png" alt="flag icon"></div></div></div>'}(function(){var t="/images/noimg.jpg";return e.profile.photo.version&&(t="https://res.cloudinary.com/dbjdqrw9o/image/upload/w_300,h_300,c_thumb,g_face/dpr_1.0/v"+e.profile.photo.version+"/"+e._id+"."+e.profile.photo.format),t}(),function(){var t="";return e.transfer&&(t+='<img class="transfericon" src="/images/logo/transfer.png" alt="transfer icon" data-toggle="tooltip" data-placement="right" title="Transfer">'),e.skills.singapore&&(t+='<img class="singaporeicon" src="/images/logo/singapore_icon.png" alt="singapore icon" data-toggle="tooltip" data-placement="right" title="Worked in Singapore before">'),t}()))}),N(),$(".browse-pagenumber").empty(),e.totalResults>1){for(var t=0;t<Math.ceil(e.totalResults/12);t++)$(".browse-pagenumber").append('<a class="pagenumber'+(t+1)+'">'+(t+1)+"</a>");var a=window.location.search.indexOf("page="),o=window.location.search.substring(a+5,a+6);$(".browsepage .browse-pagenumber a.pagenumber"+o).addClass("active"),Y()}},error:function(e){e&&t("Something went wrong! Please refresh the page and try again.")}})}function Y(){$(".browse-pagenumber a").on("click",function(){var e=$(this).text();$('.browse-menu input[name="page"]').val(e),window.history.replaceState(null,null,window.location.href.replace(/(page=)[0-9]{1,}/,"page="+e)),R(),$("html, body").animate({scrollTop:$(".browsepage .browse-header").offset().top-75},1e3,"easeInOutExpo")})}function J(){$(".profile-hire .userresponse").on("click",function(){$(".profile-hire .helperinput").val($(this).val());var e=$(".profile-hire .helperinput").val().split(",")[1];swal({title:"Are you sure you want to "+e.toLowerCase()+"?",text:"You won't be able to revert this!",type:"warning",showCancelButton:!0,confirmButtonColor:"rgb(38, 166, 91)",cancelButtonColor:"#d33",confirmButtonText:e,cancelButtonText:"No",confirmButtonClass:"btn-success",cancelButtonClass:"btn-danger",buttonsStyling:!0}).then(function(){$.ajax({url:"/users/"+oe+"/shortlists",type:"POST",data:JSON.stringify({hireid:$(".profile-hire .helperinput").val().split(",")[0],status:e}),dataType:"json",contentType:"application/json",cache:!1,success:function(e){"error"===e.status?t(e.message):window.location.reload()},error:function(e){e&&t("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})},function(e){"cancel"===e&&swal("Cancelled","No changes were made.","error")})})}function z(e,t){!0===e?$(".adminUserAccount input#"+t+"yes").prop("checked",!0):$(".adminUserAccount input#"+t+"no").prop("checked",!0)}$(".nav .dropdown-menu .logout").on("click",function(){swal({title:"Sign Out",text:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"rgb(38, 166, 91)",cancelButtonColor:"rgb(221, 75, 57)",confirmButtonText:"Yes",cancelButtonText:"No",confirmButtonClass:"btn-success",cancelButtonClass:"btn-danger",buttonsStyling:!0}).then(function(){window.location="/logout"})});var L=window.location.pathname.split("/",2).join("/");if($('.nav > li > a[href="'+L+'"]').parent().addClass("active"),f(),$(window).resize(function(){f()}),$('[data-toggle="tooltip"]').tooltip(),$("a.page-scroll").bind("click",function(e){var t=$(this);$("html, body").stop().animate({scrollTop:$(t.attr("href")).offset().top-50},1250,"easeInOutExpo"),e.preventDefault()}),$(".ajax-contactus").length){var U=$(".ajax-contactus").data("idrole");""!==U&&$.ajax({url:"/loadcontactus/"+U,type:"POST",cache:!1,success:function(e){"success"===e.status&&($("#contactname").val(e.name),$("#contactemail").val(e.email))}}),$(".ajax-contactus").submit(function(e){e.preventDefault(),""===$("#contactname").val()||""===$("#contactemail").val()||""===$("#contactsubject").val()||""===$("#contactmessage").val()?t("Please fill in the required * fields."):o($("#contactemail").val())?$.ajax({url:"/contactus",type:"POST",data:JSON.stringify({name:$("#contactname").val(),email:$("#contactemail").val(),subject:$("#contactsubject").val(),message:$("#contactmessage").val(),dinnertime:$("#dinnertime").val()}),dataType:"json",contentType:"application/json",success:function(e){a("Thank you. We will get back to you within 2 business days."),$("#contactname").val(""),$("#contactemail").val(""),$("#contactsubject").val(""),$("#contactmessage").val("")},error:function(e){e&&t("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}}):t("Please provide a valid email address.")})}if($(".local-signup").length){e()&&window.alert("For a better website experience, please use other browsers such as Chrome, Firefox or Safari."),$(".local-signup .form-group.email input#email").val(window.sessionStorage.getItem("signupemail")),$(".local-signup .form-group.identification input#identification").val(window.sessionStorage.getItem("signupidentification"));var W=$("input[name='user[local][role]']").val();$(".local-signup").submit(function(e){var t=$("input[name='user[local][email]']").val(),a=$("input[name='user[local][password]']").val(),o=$("input[name='user[local][confirm]']").val(),n=$("input[name='user[local][identification]']").val();x(".local-signup .email",".local-signup .form-group-text.temail",t),k(".local-signup .password",".local-signup .form-group-text.tpassword",a),k(".local-signup .confirm",".local-signup .form-group-text.tconfirm",o),j(".local-signup .confirm",".local-signup .form-group-text.tconfirm",a,o),T(W,n),!1!==x(".local-signup .email",".local-signup .form-group-text.temail",t)&&!1!==k(".local-signup .password",".local-signup .form-group-text.tpassword",a)&&!1!==k(".local-signup .confirm",".local-signup .form-group-text.tconfirm",o)&&!1!==j(".local-signup .confirm",".local-signup .form-group-text.tconfirm",a,o)&&!1!==T(W,n)||e.preventDefault(),window.sessionStorage.setItem("signupemail",t),window.sessionStorage.setItem("signupidentification",n)});var G,H=$(".local-signup .form-group");H.on("keyup",function(){clearTimeout(G),G=setTimeout(C,1e3)}),H.on("keydown",function(){clearTimeout(G)}),$(".local-signup .form-group.email").focusout(function(){x(".local-signup .email",".local-signup .form-group-text.temail",$("input[name='user[local][email]']").val())}),$(".local-signup .form-group.password").focusout(function(){k(".local-signup .password",".local-signup .form-group-text.tpassword",$("input[name='user[local][password]']").val())}),$(".local-signup .form-group.confirm").focusout(function(){var e=$("input[name='user[local][password]']").val(),t=$("input[name='user[local][confirm]']").val();k(".local-signup .confirm",".local-signup .form-group-text.tconfirm",t),j(".local-signup .confirm",".local-signup .form-group-text.tconfirm",e,t)}),$(".local-signup .form-group.identification").focusout(function(){var e=$("input[name='user[local][identification]']").val();T(W,e)})}if($(".local-login").length&&(e()&&window.alert("For a better website experience, please use other browsers such as Chrome, Firefox or Safari."),$(".local-login .form-group input:text:visible:first").focus(),$(".local-login .form-group input#email").val(window.localStorage.getItem("loginemail")),$(".local-login").submit(function(e){var t=$("input[name='user[local][email]']").val();window.localStorage.setItem("loginemail",t)})),$(".editemployer").length){e()&&(window.alert("For a better website experience, please use other browsers such as Chrome, Firefox or Safari."),$(".editemployer .jobscope input").css("display","inline-block"));var K=$(".editemployer").data("employer")[0],Z=".editemployer .form-group ";!function(){$(Z+"#housetype").val(K.profile.housetype.split(",")[0]),$(Z+"#maritalstatus").val(K.profile.maritalstatus),$(Z+"#adult").val(K.household.adult),$(Z+"#teenager").val(K.household.teenager),$(Z+"#children").val(K.household.children),$(Z+"#infant").val(K.household.infant),$(Z+"#elderly").val(K.household.elderly),$(Z+"#disabled").val(K.household.disabled),$(Z+"#otherduties").val(K.jobscope.otherduties)}(),function(){!0===K.jobscope.infantcare&&($(Z+"#infantcare").prop("checked",!0),$(Z+"#infantcarehidden")[0].disabled=!0),!0===K.jobscope.childcare&&($(Z+"#childcare").prop("checked",!0),$(Z+"#childcarehidden")[0].disabled=!0),!0===K.jobscope.elderlycare&&($(Z+"#elderlycare").prop("checked",!0),$(Z+"#elderlycarehidden")[0].disabled=!0),!0===K.jobscope.disabledcare&&($(Z+"#disabledcare").prop("checked",!0),$(Z+"#disabledcarehidden")[0].disabled=!0),!0===K.jobscope.housework&&($(Z+"#housework").prop("checked",!0),$(Z+"#houseworkhidden")[0].disabled=!0),!0===K.jobscope.cooking&&($(Z+"#cooking").prop("checked",!0),$(Z+"#cookinghidden")[0].disabled=!0),!0===K.jobscope.handledog&&($(Z+"#handledog").prop("checked",!0),$(Z+"#handledoghidden")[0].disabled=!0),!0===K.jobscope.handlecat&&($(Z+"#handlecat").prop("checked",!0),$(Z+"#handlecathidden")[0].disabled=!0)}(),"Landed"===K.profile.housetype.split(",")[0]&&$(".editemployer .form-group-unitno").addClass("hidden"),"Others"===K.profile.housetype.split(",")[0]&&($(Z+".housetypeother").removeClass("hidden"),$(Z+".housetypeother").val(K.profile.housetype.split(",")[1])),$(Z+"#housetype").change(function(){"Landed"===$(Z+"#housetype").val()?$(".editemployer .form-group-unitno").addClass("hidden"):$(".editemployer .form-group-unitno").removeClass("hidden"),"Others"!==$(Z+"#housetype").val()?$(Z+".housetypeother").addClass("hidden"):$(Z+".housetypeother").removeClass("hidden")}),P(),$(Z+"select").change(function(){P()}),$(Z+".checkbox-inline").click(function(){function e(e){!0===$(Z+e)[0].checked?($(Z+e).val("true"),$(Z+e+"hidden")[0].disabled=!0):$(Z+e+"hidden")[0].disabled=!1}e("#infantcare"),e("#childcare"),e("#elderlycare"),e("#disabledcare"),e("#housework"),e("#cooking"),e("#handledog"),e("#handlecat")}),$("#editemployersave").on("click",function(){$(".editemployer #saveOrSubmit").val("save")}),$("#editemployersubmit").on("click",function(){$(".editemployer #saveOrSubmit").val("submit")}),$(".editemployer .editemployerformbuttons #editemployersave").length&&($(".editemployer #editemployersave").css({position:"fixed",bottom:"50px",right:"35px",width:"15%","min-width":"60px"}).text("Save"),$(window).scroll(function(){var e=$(".editemployer .editemployerformbuttons").offset().top;$(".editemployer #editemployersave").offset().top>e&&$(".editemployer #editemployersave").css({position:"",bottom:"",right:"",width:"","min-width":""}).text("Save My Progress")})),$(".editemployer").submit(function(e){"Landed"===$(Z+"#housetype").val()&&$(Z+"#unitno").val("N/A"),"Others"!==$(Z+"#housetype").val()&&$(Z+".housetypeother").val(""),$(Z+"#contactnumber").val()||$(Z+"#contactnumber").val("0"),O()?(e.preventDefault(),t("Wrong format provided! Please provide Numbers in the yellow boxes.")):I()?(e.preventDefault(),t("Exceeded Character Limit! Please resolve the errors in yellow.")):"submit"===$('input[name="employer[saveOrSubmit]"]').val()&&B()&&(e.preventDefault(),t("Fill in all required '*' fields! Please resolve the errors in red."))})}if($(".edithelper").length){e()&&(window.alert("For a better website experience, please use other browsers such as Chrome, Firefox or Safari."),$(".edithelper .skillsradio input").css("display","inline-block"));var X=$(".edithelper").data("helper")[0],Q=".edithelper .form-group ";_(".workingexperienceyear",50),D("#firstcountry"),D("#secondcountry"),D("#thirdcountry"),function(){$(Q+"#nationality").val(X.profile.nationality),$(Q+"#portrepatriated").val(X.profile.portrepatriated),$(Q+"#religion").val(X.profile.religion),$(Q+"#dietaryrestriction").val(X.profile.dietaryrestriction),$(Q+"#foodhandlingrestriction").val(X.profile.foodhandlingrestriction),$(Q+"#siblings").val(X.profile.siblings),$(Q+"#maritalstatus").val(X.profile.maritalstatus),$(Q+"#children").val(X.profile.children),$(Q+"#phagency").val(X.profile.phagency),$(Q+"#educationlevel").val(X.education.educationlevel),$(Q+"#otherqualifications").val(X.education.otherqualifications),$(Q+"#firstfrom").val(X.workingexperience.first.from),$(Q+"#firstto").val(X.workingexperience.first.to),$(Q+"#firstcountry").val(X.workingexperience.first.country),$(Q+"#firstduties").val(X.workingexperience.first.duties),$(Q+"#secondfrom").val(X.workingexperience.second.from),$(Q+"#secondto").val(X.workingexperience.second.to),$(Q+"#secondcountry").val(X.workingexperience.second.country),$(Q+"#secondduties").val(X.workingexperience.second.duties),$(Q+"#thirdfrom").val(X.workingexperience.third.from),$(Q+"#thirdto").val(X.workingexperience.third.to),$(Q+"#thirdcountry").val(X.workingexperience.third.country),$(Q+"#thirdduties").val(X.workingexperience.third.duties)}(),A(X.skills.english,"english"),A(X.skills.singapore,"singapore"),A(X.skills.infantcare,"infantcare"),A(X.skills.childcare,"childcare"),A(X.skills.elderlycare,"elderlycare"),A(X.skills.disabledcare,"disabledcare"),A(X.skills.housework,"housework"),A(X.skills.cooking,"cooking"),A(X.skills.handledog,"handledog"),A(X.skills.handlecat,"handlecat"),function(){if(_("#dob-year",100),null===X.profile.dob)$(Q+"#dob-date").val(""),$(Q+"#dob-month").val(""),$(Q+"#dob-year").val("");else{var e=new Date(X.profile.dob);$(Q+"#dob-date").val((e.getDate()<10?"0":"")+e.getDate()),$(Q+"#dob-month").val((e.getMonth()<9?"0":"")+(e.getMonth()+1)),$(Q+"#dob-year").val(e.getFullYear())}}(),$(Q+"#nationality").change(function(){var e=$(Q+"#nationality").val(),t=["+63","+91","+62","+95","+94"],a=["Philippines","India","Indonesia","Myanmar","Sri_Lanka"].indexOf(e);a>=0&&$(Q+"#countrycode").val(t.slice(a,a+1))}),X.profile.children>0&&$(".edithelper .form-group-children").removeClass("hidden"),$(Q+"#children").change(function(){$(Q+"#children").val()>0?$(".edithelper .form-group-children").removeClass("hidden"):$(".edithelper .form-group-children").addClass("hidden")}),$("#edithelpersave").on("click",function(){$(".edithelper #saveOrSubmit").val("save")}),$("#edithelpersubmit").on("click",function(){$(".edithelper #saveOrSubmit").val("submit")}),$(".edithelper .edithelperformbuttons #edithelpersave").length&&($(".edithelper #edithelpersave").css({position:"fixed",bottom:"30px",right:"35px",width:"15%","min-width":"60px"}).text("Save"),$(window).scroll(function(){var e=$(".edithelper .edithelperformbuttons").offset().top;$(".edithelper #edithelpersave").offset().top>e&&$(".edithelper #edithelpersave").css({position:"",bottom:"",right:"",width:"","min-width":""}).text("Save My Progress")})),$(".edithelper").submit(function(e){var a=$(Q+"#dob-date").val(),o=$(Q+"#dob-month").val(),n=$(Q+"#dob-year").val();""!==a&&""!==o&&""!==n&&$(Q+"#dob").val(new Date(n+"-"+o+"-"+a+"T01:00:00+01:00")),$(Q+"#contactnumber").val()||$(Q+"#contactnumber").val("0"),$(Q+"#children").val()<1&&$(Q+"#ageofyoungest").val("0"),E()?(e.preventDefault(),t("Wrong format provided! Please provide Numbers in the yellow boxes.")):q()?(e.preventDefault(),t("Exceeded Character Limit! Please resolve the errors in yellow.")):"submit"===$('input[name="helper[saveOrSubmit]"]').val()&&F()&&(e.preventDefault(),t("Fill in all required '*' fields! Please resolve the errors in red."))})}if($(".profile-changeidentification").length&&$(".profile-changeidentification").on("click",function(e){e.preventDefault(),swal("Warning","To change identification, send a copy of your Identification to 'support@maidicare.com'.","warning")}),$(".browsepage").length){var V={};decodeURIComponent(window.location.search.substring(1)).replace(/=/g,"~*").replace(/\+/g," ").split("&").forEach(function(e){V[e.split("~*")[0]]=e.split("~*")[1]}),V.query&&($('.browsepage input[name="query"]').val(V.query),$(".browse-content .querytext p span.glyphicon").css("visibility","visible"),V.query.length>30?$(".browsepage .browse-content span.qtext").text("'"+V.query.substring(0,30)+"...'"):$(".browsepage .browse-content span.qtext").text("'"+V.query+"'")),$(".browsepage .browse-pagenumber a.pagenumber"+V.page).addClass("active"),M(V.infantcare,"infantcare"),M(V.childcare,"childcare"),M(V.elderlycare,"elderlycare"),M(V.disabledcare,"disabledcare"),M(V.transfer,"transfer"),M(V.singapore,"singapore"),V.nationality&&$('.browsepage select[name="nationality"]').val(V.nationality),V.religion&&$('.browsepage select[name="religion"]').val(V.religion),V.maritalstatus&&$('.browsepage select[name="maritalstatus"]').val(V.maritalstatus),N(),Y(),$('.browsepage input[name="infantcare"], .browsepage input[name="childcare"], .browsepage input[name="elderlycare"], .browsepage input[name="disabledcare"], .browsepage input[name="transfer"], .browsepage input[name="singapore"], .browsepage select[name="nationality"], .browsepage select[name="religion"], .browsepage select[name="maritalstatus"]').on("change",function(){$('.browse-menu input[name="page"]').val(1),window.history.replaceState(null,null,window.location.href.replace(/(page=)[0-9]{1,}/,"page=1")),R()}),$(".browsepage .clearquerytext").on("click",function(){$('.browsepage input[name="query"]').val(""),$(".browsepage").submit()}),$(".browsepage .clearfilter").on("click",function(){function e(e,t){"checkbox"===t?$('.browsepage input[name="'+e+'"]:checked').attr("checked",!1):"radio"===t?$('.browsepage input[name="'+e+'"]').val("All"):"ddl"===t&&$('.browsepage select[name="'+e+'"]').val("All")}e("infantcare","checkbox"),e("childcare","checkbox"),e("elderlycare","checkbox"),e("disabledcare","checkbox"),e("transfer","radio"),e("singapore","radio"),e("nationality","ddl"),e("religion","ddl"),e("maritalstatus","ddl"),$(".browsepage").submit()}),$("#browseform").submit(function(){""!==$('.browsepage input[name="query"]').val()&&$('.browse-menu input[name="page"]').val(1)}),$(".browsepage button.togglefilter").on("click",function(){$(".browsepage .browse-sidebar").slideToggle("fast",function(){$(".browsepage .browse-sidebar").is(":visible")?($(".browsepage button.togglefilter").css({"background-color":"black",color:"orange"}),$("html, body").animate({scrollTop:$(".browsepage").offset().top-50},1e3,"easeInOutExpo")):$(".browsepage button.togglefilter").css({"background-color":"orange",color:"white"})})})}if($(".browseview").length){var ee=[];if($(".browseview").data("hirearray").forEach(function(e,t){ee.push(e.huserid)}),$(".browseview .hirehelper").val()){var te=$(".browseview .hirehelper").val().split("&")[0],ae=$(".browseview .hirehelper").val().split("&")[1];ee.indexOf(te)>=0&&$(".browseview .hirehelper").removeClass("btn-primary").addClass("btn-secondary").text("Selected")}!function(){$(".browseview .relatedContainer .panel").on({mouseenter:function(){$(this).children().css({"background-color":"#68C3A3",color:"black",transition:"all 0.3s ease","-webkit-transform":"scale(1.05)","-ms-transform":"scale(1.05)",transform:"scale(1.05)"})},mouseleave:function(){$(this).children().css({"background-color":"#f5f5f5",color:"#717f86",transition:"all 0.3s ease","-webkit-transform":"scale(1.0)","-ms-transform":"scale(1.0)",transform:"scale(1.0)"})},click:function(){window.location=$(this).children(".viewbutton").attr("href")}})}(),$(".browseview .hirehelper").on("click",function(){$.ajax({url:"/browse/hire",type:"POST",data:JSON.stringify({helperuserid:te,helperid:ae}),dataType:"json",contentType:"application/json",cache:!1,success:function(e){"success"===e.status?a(e.message):"error"===e.status?t(e.message):"redirect"===e.status&&(window.location=e.message)},error:function(e){e&&t("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})}),$(".browseview .skypehelper").on("click",function(){swal({title:"Skype",text:"Request a Skype Call?",type:"warning",showCancelButton:!0,confirmButtonColor:"rgb(38, 166, 91)",cancelButtonColor:"rgb(221, 75, 57)",confirmButtonText:"Yes",cancelButtonText:"No",confirmButtonClass:"btn-success",cancelButtonClass:"btn-danger",buttonsStyling:!0}).then(function(){$.ajax({url:"/browse/skype",type:"POST",data:JSON.stringify({helperuserid:te,helperid:ae}),dataType:"json",contentType:"application/json",cache:!1,success:function(e){"success"===e.status?a(e.message):"error"===e.status?t(e.message):"redirect"===e.status&&(window.location=e.message)},error:function(e){e&&t("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})})})}if($(".profile-hire").length){var oe=$(".profile-hire").data("userid");$('.profile-hire-filter select[name="filter"]').on("change",function(){var e=$('.profile-hire-filter select[name="filter"]').val();$.ajax({url:"/users/"+oe+"/shortlists/filter",type:"POST",data:JSON.stringify({filter:e}),dataType:"json",contentType:"application/json",cache:!1,success:function(t){function a(e){return new Date(1e3*parseInt(e.substring(0,8),16))}var o=["#95A5A6","#1E824C","#3A539B","#E87E04","#96281B"],n=["All","confirmed","accepted","pending","rejected"].indexOf(e);$(".profile-hire-filter").css("background-color",o.slice(n,n+1)),$(".hireContainer").empty();var i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.hireInfo.length>0&&t.hireInfo.forEach(function(e){function o(e){var t="";return t=e.user.profile.photo.version?"https://res.cloudinary.com/dbjdqrw9o/image/upload/w_300,h_300,c_thumb,g_face/v"+e.user.profile.photo.version+"/"+e.user._id+"."+e.user.profile.photo.format:"/images/noimg.jpg",'<a href="/browse/view/"'+e.user._id+"><img src="+t+' alt="profile image"></a>'}function n(e){var a="";return"employer"===t.role?a='<div class="profile-hire-userpic">'+o(e)+"</div>":"helper"===t.role&&(a='<div class="profile-hire-userpic"><a href="/users/employer/"'+e.user.userid+'><img src="/images/employer.png" alt="profile image"></a></div>'),'<div class="col-md-3 col-sm-3">'+a+"</div>"}function r(e){var a="";if("helper"===t.role){var o="";o="Others"===e.user.profile.housetype.split(",")[0]?e.user.profile.housetype.replace(/,/,", "):e.user.profile.housetype.split(",")[0].replace(/_/g," "),a='<a href="/users/employer/'+e.user.userid+'">'+e.user.profile.fullname+"</a><p>"+o+" | "+e.user.profile.maritalstatus+"</p>"}else{var n="";n=e.user.transfer?"<p>"+e.user.profile.nationality+" | "+e.user.profile.maritalstatus+" | Transfer</p>":"<p>"+e.user.profile.nationality+" | "+e.user.profile.maritalstatus+"</p>",a='<a href="/browse/view/'+e.user._id+'">'+e.user.profile.firstname+"</a>"+n}return'<div class="col-md-6 col-sm-6">'+a+'<div class="well">'+e.message+"</div></div>"}function s(e){var a="";return"helper"===t.role&&"pending"===e.status&&(a='<button class="btn btn-success userresponse" value="'+e._id+',Accept">Accept</button><button class="btn btn-danger userresponse" value="'+e._id+',Reject">Reject</button>'),"helper"===t.role&&"accepted"===e.status&&(a='<button class="btn btn-danger userresponse" value="'+e._id+',Reject">Reject</button>'),"employer"===t.role&&"pending"===e.status?a='<button class="btn btn-danger userresponse" value="'+e._id+',Reject">Reject</button>':"employer"===t.role&&"accepted"===e.status&&(a='<button class="btn btn-success userresponse" value="'+e._id+',Confirm">Confirm</button><button class="btn btn-danger userresponse" value="'+e._id+',Reject">Reject</button>'),'<div class="col-md-3 col-sm-3"><div class="profile-hire-response"><input type="hidden" class="helperinput" name="helperinput" value="">'+a+"</div></div>"}var l=a(e._id.toString()),c=l.getMinutes()<10?"0"+l.getMinutes():l.getMinutes(),p=l.getDate().toString()+" "+i[l.getMonth()]+" "+l.getFullYear().toString()+", "+l.getHours()+":"+c;$(".hireContainer").append(function(e){return'<div class="col-md-12 col-sm-12 profile-hire-content"><h4>'+p+'</h4><h4 class="right" id='+e.status+">"+e.status+"</h4><hr>"+n(e,t.role)+r(e)+s(e)+"</div>"}(e)),J()})},error:function(e){e&&t("Something went wrong! Please refresh the page and try again.")}})}),J()}if($(".ajax-forgotpassword").length&&$(".ajax-forgotpassword").submit(function(e){e.preventDefault();var n=$('.ajax-forgotpassword input[name="email"]').val();o(n)?$.ajax({url:"/password/forgot",type:"POST",data:JSON.stringify({email:n}),dataType:"json",contentType:"application/json",success:function(e){"success"===e.status?a(e.message):(t(e.message),$('.ajax-forgotpassword input[name="email"]').val(""))},error:function(e){e&&t("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}}):t("Please provide a valid email.")}),$(".ajax-resetpassword").length&&$(".ajax-resetpassword").submit(function(e){e.preventDefault();var a=window.location.pathname.split("/password/validate/")[1].split("&")[0],o=$('.ajax-resetpassword input[name="password"]').val(),n=$('.ajax-resetpassword input[name="confirm"]').val();o.length>=6&&n.length>=6?o===n?$.ajax({url:"/password/reset",type:"POST",data:JSON.stringify({userid:a,password:o,confirm:n}),dataType:"json",contentType:"application/json",success:function(e){"success"===e.status?window.location=e.url:t(e.message)},error:function(e){e&&t("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}}):t("The passwords do not match."):t("Password must be at least 6 characters.")}),$(".profile-activate-reset").length>0&&$(".profile-activate-reset").on("click",function(){var e=$(".profile-activate-reset").data("id");$.ajax({url:"/users/"+e+"/activate/reset",type:"POST",cache:!1,success:function(e){"success"===e.status&&a(e.message)},error:function(e){e&&t("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})}),$(".postadmincode").length>0&&$(".postadmincode").on("click",function(){$.ajax({url:"/admin/newcode",type:"POST",error:function(e){e&&t("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})}),$(".admin-remove-navbar").length>0){if($(".navbar-brand").text("Admin").attr("href","/admin"),$(".nav.navbar-nav.navbar-right").empty(),$(".nav.navbar-nav.navbar-right").append('<li><a target="_blank" href="/admin/email">Send an Email</a></li><li><a class="btn btn-danger"href="/logout">Logout</a></li>'),function(){$(".admin-home-container .squarebox").on({mouseenter:function(){$(this).css({"background-color":"#446CB3",color:"#fff",transition:"all 0.3s ease","-webkit-transform":"scale(1.02)","-ms-transform":"scale(1.02)",transform:"scale(1.02)","z-index":1})},mouseleave:function(){$(this).css({"background-color":"#6BB9F0",color:"black",transition:"all 0.3s ease","-webkit-transform":"scale(1.0)","-ms-transform":"scale(1.0)",transform:"scale(1.0)","z-index":0})}})}(),$(".admin-shortlist-search").length>0&&$(".admin-shortlist-search").on("click",function(){var e=$("input#hireid").val();""!==e&&(window.location="/admin/shortlists/"+e)}),$(".adminUserAccount").length>0){var ne=$(".adminUserAccount").data("admin")[0].userid;z(ne.available,"available"),z(ne.recruit,"recruit"),z(ne.hire,"hire"),z(ne.activate.status,"activatestatus")}if($(".admin-delete-user").length>0&&$(".admin-delete-user").on("click",function(){var e=$(".admin-delete-user").val(),o=e.split("&")[0],n=e.split("&")[1],i=e.split("&")[2];swal({title:"Type email to Delete",text:i,input:"email",showCancelButton:!0,confirmButtonColor:"rgb(221, 75, 57)",confirmButtonText:"Delete",showLoaderOnConfirm:!0,preConfirm:function(e){return new Promise(function(t,a){setTimeout(function(){e===i?t():a("Input does not match Email.")},1e3)})}}).then(function(e){$.ajax({url:"/admin/users/delete",type:"POST",cache:!1,data:JSON.stringify({id:o,role:n}),dataType:"json",contentType:"application/json",success:function(e){"success"===e.status?(a("Account Deleted! Redirecting to Admin Menu..."),setTimeout(function(){window.location="/admin"},2500)):t(e.message)},error:function(e){e&&t("Please refresh the page and try again.")}})})}),$(".admin-hire-filter").length>0){var ie=window.location.pathname.split("/admin/shortlists/all/")[1];$('.admin-hire-filter select[name="filter"]').val(ie),$('.admin-hire-filter select[name="filter"]').on("change",function(){var e=$('.admin-hire-filter select[name="filter"]').val();window.location="/admin/shortlists/all/"+e})}$(".admin-change-hire-status").length>0&&$(".admin-change-hire-status select#status").on("change",function(){var e=$(this).data("hireid"),a=$(this).val();$.ajax({url:"/admin/shortlists/"+e,type:"POST",cache:!1,data:JSON.stringify({status:a}),dataType:"json",contentType:"application/json",success:function(e){window.location.reload()},error:function(e){e&&t("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})}),$(".export-hire-data").length>0&&$(".export-hire-data").on("click",function(){$.ajax({url:"/admin/shortlists/"+$(this).val()+"/export",type:"POST",cache:!1,success:function(e){function t(e,t){var a="data:application/json;charset=utf-8,"+JSON.stringify(e),o=encodeURI(a),n=document.createElement("a");n.setAttribute("href",o),n.setAttribute("download",t),n.click()}"success"===e.status&&(t(e.helperData,"helper_"+e.helperData.userid.local.email.replace(".",",")),t(e.employerData,"employer_"+e.employerData.userid.local.email.replace(".",",")))},error:function(e){e&&t("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})}),$(".admin-email-all-inactive-helper").length>0&&($(".admin-email-all-inactive-helper").on("click",function(){$.ajax({url:"/admin/inactive/helpers",type:"POST",cache:!1,success:function(e){"success"===e.status?a(e.message):t(e.message)},error:function(e){e&&t("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})}),$(".admin-email-inactive-helper").on("click",function(){var e=$(this).val();$.ajax({url:"/admin/inactive/helpers/"+e,type:"POST",cache:!1,success:function(e){"success"===e.status?a(e.message):t(e.message)},error:function(e){e&&t("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})})),$(".admin-email-inactive-hire").length>0&&$(".admin-email-inactive-hire").on("click",function(){var e=$(this).val();$.ajax({url:"/admin/inactive/shortlists",type:"POST",cache:!1,data:JSON.stringify({userids:e}),dataType:"json",contentType:"application/json",success:function(e){"success"===e.status&&a(e.message)},error:function(e){e&&t("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})})}$("#demo").on("click",function(){$.ajax({url:"/api/users/data",type:"GET",dataType:"json"}).done(function(e){e.forEach(function(e){$.ajax({type:"POST",url:"/api/users/demo",data:e})})})}),$("#remove").on("click",function(){$.ajax({type:"delete",url:"/api/users/remove"})})});
