$(document).ready(function(){function a(){var a=window.navigator.userAgent,b=a.indexOf("MSIE "),c=a.indexOf("Trident/"),d=a.indexOf("Edge/");if(b>0||c>0||d>0)return!0}function b(a){swal({title:"Error",text:a,type:"error",confirmButtonColor:"rgb(221, 75, 57)"})}function c(a){swal({title:"Success",text:a,type:"success",confirmButtonColor:"rgb(38, 166, 91)"})}function d(a){return/[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(a)}function e(a){var b=new Date,c=new Date(a),d=b.getFullYear()-c.getFullYear(),e=b.getMonth()-c.getMonth();return(e<0||0===e&&b.getDate()<c.getDate())&&d--,d}function f(a){$(a).css({"border-color":"#ccc",color:"#555",border:"1px solid #ccc"})}function g(a){$(a).css({color:"#a94442",border:"2px solid #a94442"})}function h(a){$(a).css({color:"#8a6d3b",border:"2px solid #F7CA18"})}function i(a,b,c){var d=a+'[name="'+b+'"]';return $(d).val().length>c?(h(d),!0):(f(d),!1)}function j(a,b,c){var g,d=b+'[name="'+c+'"]',e=$(d).val();if(a){new RegExp(/^(\s*|\d+)$/).test(e)?(f(d),g=!1):(h(d),g=!0)}else{new RegExp(/^\d+$/).test(e)?(f(d),g=!1):(h(d),g=!0)}return g}function k(a,b){var c=a+'[name="'+b+'"]';return $(c).val().length>0?(f(c),!1):(g(c),!0)}function l(a,b){var c=a+'[name="'+b+'"]';return+$(c).val()>0?(f(c),!1):(g(c),!0)}function m(){function a(a,b){""===a?g("select#dob-"+b):f("select#dob-"+b)}var b=$("select#dob-date").val(),c=$("select#dob-month").val(),d=$("select#dob-year").val();return""!==b&&""!==c&&""!==d?(f("select#dob-date"),f("select#dob-month"),f("select#dob-year"),!1):(a(b,"date"),a(c,"month"),a(d,"year"),!0)}function o(){$(window).width()>768&&$(".dropdown").on({mouseenter:function(){$(this).find(".dropdown-menu").stop(!0,!0).delay(150).fadeIn(500)},mouseleave:function(){$(this).find(".dropdown-menu").stop(!0,!0).delay(150).fadeOut(500)}})}function q(a){$(a).css("color","#717f86"),$(a).find(".right-addon").remove(),$(a).removeClass("has-error has-success has-warning")}function r(a){q(a),$(a).css("color","#3c763d"),$(a).addClass("has-success"),$(a).append('<i class="right-addon glyphicon glyphicon-ok"></i>')}function s(a){q(a),$(a).css("color","#a94442"),$(a).addClass("has-error"),$(a).append('<i class="right-addon glyphicon glyphicon-remove"></i>')}function t(a){q(a),$(a).css("color","#8a6d3b"),$(a).addClass("has-warning"),$(a).append('<i class="right-addon glyphicon glyphicon-warning-sign"></i>')}function u(a){$(a).css({visibility:"hidden",color:"#717f86"}),$(a).text("label")}function v(a,b){u(a),$(a).css({visibility:"visible",color:"#a94442"}),$(a).text(b)}function w(a,b){u(a),$(a).css({visibility:"visible",color:"#8a6d3b"}),$(a).text(b)}function x(a){if($(".roleSelect > p").css({"font-size":"15px","font-weight":"400",color:"#717f86"}),"helper"!==a&&"employer"!==a)return $(".roleSelect > p").css({"font-size":"18px","font-weight":"bolder",color:"#a94442"}),!1}function y(a,c,e){return e.length<1?(q(a),u(c),!1):d(e)?void $.ajax({url:"/users/emailtaken",type:"POST",cache:!1,data:JSON.stringify({email:e}),dataType:"json",contentType:"application/json",success:function(b){if("success"!==b.status)return s(a),v(c,"Email has been taken."),!1;r(a),u(c)},error:function(a){a&&b("Something went wrong! Please refresh the page and try again.")}}):(s(a),v(c,"Please provide a valid email"),!1)}function z(a,b,c){var d=new RegExp(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9, !@#$%^&*]).{6,}$/);return c.length<1?(q(a),u(b),!1):c.length<6?(s(a),v(b,"Minimum 6 characters"),!1):void(!1===d.test(c)?(t(a),w(b,"Password not strong")):(r(a),u(b)))}function A(a,b,c,d){return d.length<1?(q(a),u(b),!1):c!==d?(s(a),v(b,"Passwords do not match"),!1):void 0}function B(a){for(var b=a.slice(1,8),c=b.split("").map(function(a){return parseInt(a,10)}),d=[2,7,6,5,4,3,2],e=0,f=0;f<c.length;f++)e+=c[f]*d[f];var g=a.slice(0,1).toUpperCase();"T"!==g&&"G"!==g||(e+=4);var h=11-e%11,i=["A","B","C","D","E","F","G","H","I","Z","J"];return"F"!==g&&"G"!==g||(i=["K","L","M","N","P","Q","R","T","U","W","X"]),i.slice(h-1,h).toString()===a.slice(8,9).toUpperCase()}function C(a,b){var c=new RegExp(/^([S,T,s,t][0-9]{7}[A-J,Z,a-j,z])$|^([F,G,f,g][0-9]{7}[K-R,T-X,k-r,t-x])$/),d=".local-signup .identification",e=".local-signup .form-group-text.tidentification";if(b.length<1)return q(d),u(e),!1;if("helper"===a)r(d),u(e);else{if("employer"!==a||!c.test(b)||!B(b))return"helper"===a||"employer"===a?(s(d),v(e,"Invalid Identification"),!1):(s(d),v(e,"Please choose a role"),!1);r(d),u(e)}}function I(){var a=$("input[name='user[local][email]']").val(),b=$("input[name='user[local][password]']").val(),c=$("input[name='user[local][confirm]']").val(),d=$("input[name='user[local][role]']:checked").val(),e=$("input[name='user[local][identification]']").val();y(".local-signup .email",".local-signup .form-group-text.temail",a),z(".local-signup .password",".local-signup .form-group-text.tpassword",b),z(".local-signup .confirm",".local-signup .form-group-text.tconfirm",c),A(".local-signup .confirm",".local-signup .form-group-text.tconfirm",b,c),C(d,e)}function L(){$(K+"#housetype").val(J.profile.housetype.split(",")[0]),$(K+"#maritalstatus").val(J.profile.maritalstatus),$(K+"#adult").val(J.household.adult),$(K+"#teenager").val(J.household.teenager),$(K+"#children").val(J.household.children),$(K+"#infant").val(J.household.infant),$(K+"#elderly").val(J.household.elderly),$(K+"#disabled").val(J.household.disabled),$(K+"#otherduties").val(J.jobscope.otherduties)}function M(){!0===J.jobscope.infantcare&&($(K+"#infantcare").prop("checked",!0),$(K+"#infantcarehidden")[0].disabled=!0),!0===J.jobscope.childcare&&($(K+"#childcare").prop("checked",!0),$(K+"#childcarehidden")[0].disabled=!0),!0===J.jobscope.elderlycare&&($(K+"#elderlycare").prop("checked",!0),$(K+"#elderlycarehidden")[0].disabled=!0),!0===J.jobscope.disabledcare&&($(K+"#disabledcare").prop("checked",!0),$(K+"#disabledcarehidden")[0].disabled=!0),!0===J.jobscope.housework&&($(K+"#housework").prop("checked",!0),$(K+"#houseworkhidden")[0].disabled=!0),!0===J.jobscope.cooking&&($(K+"#cooking").prop("checked",!0),$(K+"#cookinghidden")[0].disabled=!0),!0===J.jobscope.handledog&&($(K+"#handledog").prop("checked",!0),$(K+"#handledoghidden")[0].disabled=!0),!0===J.jobscope.handlecat&&($(K+"#handlecat").prop("checked",!0),$(K+"#handlecathidden")[0].disabled=!0)}function N(){var a=parseInt($(K+"#adult").val(),10)+parseInt($(K+"#teenager").val(),10)+parseInt($(K+"#children").val(),10)+parseInt($(K+"#infant").val(),10)+parseInt($(K+"#elderly").val(),10)+parseInt($(K+"#disabled").val(),10);$(".totalnoinhousehold").text(a)}function O(){return!!(j(!1,"input","employer[local][contact][number]")|j(!0,"input","employer[profile][postalcode]"))}function P(){return!!(i("input","employer[profile][fullname]",50)|i("input","employer[profile][blockhouseno]",20)|i("input","employer[profile][unitno]",20)|i("input","employer[profile][streetname]",50)|i("textarea","employer[jobscope][otherduties]",300))}function Q(){return!!(k("input","employer[profile][fullname]")|k("select","employer[profile][housetype]")|k("input","employer[profile][blockhouseno]")|k("input","employer[profile][unitno]")|k("input","employer[profile][streetname]")|k("select","employer[profile][maritalstatus]")|l("input","employer[profile][postalcode]")|l("input","employer[local][contact][number]"))}function T(a,b){for(var c=(new Date).getFullYear(),d=0;d<b;d++){var e=c-d;$(S+a).append('<option value="'+e+'">'+e+"</option>")}}function U(a){var b=$('<option value="">-- select one --</option><option value="Brunei">Brunei</option><option value="Hong_Kong">Hong Kong</option><option value="India">India</option><option value="Indonesia">Indonesia</option><option value="Middle_East">Middle East</option><option value="Myanmar">Myanmar</option><option value="Philippines">Philippines</option><option value="Singapore">Singapore</option><option value="Sri_Lanka">Sri Lanka</option><option value="Taiwan">Taiwan</option>');$(S+a).append(b)}function V(){$(S+"#nationality").val(R.profile.nationality),$(S+"#portrepatriated").val(R.profile.portrepatriated),$(S+"#religion").val(R.profile.religion),$(S+"#dietaryrestriction").val(R.profile.dietaryrestriction),$(S+"#foodhandlingrestriction").val(R.profile.foodhandlingrestriction),$(S+"#siblings").val(R.profile.siblings),$(S+"#maritalstatus").val(R.profile.maritalstatus),$(S+"#children").val(R.profile.children),$(S+"#educationlevel").val(R.education.educationlevel),$(S+"#otherqualifications").val(R.education.otherqualifications),$(S+"#firstfrom").val(R.workingexperience.first.from),$(S+"#firstto").val(R.workingexperience.first.to),$(S+"#firstcountry").val(R.workingexperience.first.country),$(S+"#firstduties").val(R.workingexperience.first.duties),$(S+"#secondfrom").val(R.workingexperience.second.from),$(S+"#secondto").val(R.workingexperience.second.to),$(S+"#secondcountry").val(R.workingexperience.second.country),$(S+"#secondduties").val(R.workingexperience.second.duties),$(S+"#thirdfrom").val(R.workingexperience.third.from),$(S+"#thirdto").val(R.workingexperience.third.to),$(S+"#thirdcountry").val(R.workingexperience.third.country),$(S+"#thirdduties").val(R.workingexperience.third.duties)}function W(a,b){!0===a?$(S+"#"+b+"yes").prop("checked",!0):$(S+"#"+b+"no").prop("checked",!0)}function X(){if(T("#dob-year",100),null===R.profile.dob)$(S+"#dob-date").val(""),$(S+"#dob-month").val(""),$(S+"#dob-year").val("");else{var a=new Date(R.profile.dob);$(S+"#dob-date").val((a.getDate()<10?"0":"")+a.getDate()),$(S+"#dob-month").val((a.getMonth()<9?"0":"")+(a.getMonth()+1)),$(S+"#dob-year").val(a.getFullYear())}}function Y(){return!!(j(!1,"input","helper[local][contact][number]")|j(!1,"input","helper[profile][heightcm]")|j(!1,"input","helper[profile][weightkg]")|j(!0,"input","helper[profile][ageofyoungest]"))}function Z(){return!!(i("input","helper[profile][firstname]",20)|i("input","helper[profile][middlename]",20)|i("input","helper[profile][familyname]",20)|i("input","helper[profile][pob]",100)|i("input","helper[profile][residentialaddress]",100)|i("input","helper[profile][allergies]",50)|i("input","helper[education][fieldofstudy]",50)|i("textarea","helper[education][otherqualifications]",300)|i("textarea","helper[workingexperience][first][duties]",300)|i("textarea","helper[workingexperience][second][duties]",300)|i("textarea","helper[workingexperience][third][duties]",300))}function _(){return!!(m()|k("input","helper[profile][firstname]")|k("input","helper[profile][familyname]")|k("input","helper[profile][pob]")|k("select","helper[profile][nationality]")|k("input","helper[local][contact][countrycode]")|k("input","helper[profile][residentialaddress]")|k("select","helper[profile][portrepatriated]")|k("select","helper[profile][religion]")|k("select","helper[profile][dietaryrestriction]")|k("select","helper[profile][foodhandlingrestriction]")|k("select","helper[profile][maritalstatus]")|k("select","helper[education][educationlevel]")|k("input","helper[education][fieldofstudy]")|l("input","helper[local][contact][number]")|l("input","helper[profile][heightcm]")|l("input","helper[profile][weightkg]"))}function da(a,b){a&&$('.browsepage input[name="'+b+'"][value="'+a+'"]').attr("checked","checked")}function ea(){$(".browsepage .helperContainer .panel").on({mouseenter:function(){$(this).children().css({"background-color":"#68C3A3",color:"black",transition:"all 0.3s ease","-webkit-transform":"scale(1.05)","-ms-transform":"scale(1.05)",transform:"scale(1.05)"})},mouseleave:function(){$(this).children().css({"background-color":"#f5f5f5",color:"#717f86",transition:"all 0.3s ease","-webkit-transform":"scale(1.0)","-ms-transform":"scale(1.0)",transform:"scale(1.0)"})},click:function(){window.location=$(this).children(".viewbutton").attr("href")}})}function fa(){var a=$(".browsepage").serialize().replace(/=/g,",").split("&"),c={};a.forEach(function(a){c[a.split(",")[0]]=a.split(",")[1]}),$.ajax({url:"/browse/filter",type:"POST",data:c,dataType:"json",cache:!1,success:function(a){if($(".helperContainer").empty(),$(".browsepage .querytext span.found").text(a.totalResults+" Found"),a.helperInfo.forEach(function(a){function b(){var b="/images/noimg.jpg";return a.profile.photo.version&&(b="https://res.cloudinary.com/dbjdqrw9o/image/upload/w_300,h_300,c_thumb,g_face/dpr_1.0/v"+a.profile.photo.version+"/"+a._id+"."+a.profile.photo.format),b}function c(){var b="";return a.transfer&&(b+='<img class="transfericon" src="/images/logo/transfer.png" alt="transfer icon" data-toggle="tooltip" data-placement="right" title="Transfer">'),a.skills.singapore&&(b+='<img class="singaporeicon" src="/images/logo/singapore_icon.png" alt="singapore icon" data-toggle="tooltip" data-placement="right" title="Worked in Singapore before">'),b}function d(b,c){return'<div class="col-sm-4 col-xs-12"><div class="panel panel-default"><a class="viewbutton" href="/browse/view/'+a._id+'"></a><div class="panel-body"><div class="browse-helperpic"><img src='+b+' alt="profile image"></div><div class="smarticons">'+c+'</div></div><div class="panel-footer"><h4>'+a.profile.firstname+"<span>, "+e(a.profile.dob)+"<span></h4><p>"+a.profile.maritalstatus+" | "+a.profile.nationality.replace(/_/g," ")+'</p><img class="flagicon" src="/images/logo/'+a.profile.nationality.toLowerCase()+'_flag.png" alt="flag icon"></div></div></div>'}$(".helperContainer").append(d(b(),c()))}),ea(),$(".browse-pagenumber").empty(),a.totalResults>1){for(var b=0;b<Math.ceil(a.totalResults/12);b++)$(".browse-pagenumber").append('<a class="pagenumber'+(b+1)+'">'+(b+1)+"</a>");var c=window.location.search.indexOf("page="),d=window.location.search.substring(c+5,c+6);$(".browsepage .browse-pagenumber a.pagenumber"+d).addClass("active"),ga()}},error:function(a){a&&b("Something went wrong! Please refresh the page and try again.")}})}function ga(){$(".browse-pagenumber a").on("click",function(){var a=$(this).text();$('.browse-menu input[name="page"]').val(a),window.history.replaceState(null,null,window.location.href.replace(/(page=)[0-9]{1,}/,"page="+a)),fa(),$("html, body").animate({scrollTop:$(".browsepage .browse-header").offset().top-75},1e3,"easeInOutExpo")})}function la(){$(".browseview .relatedContainer .panel").on({mouseenter:function(){$(this).children().css({"background-color":"#68C3A3",color:"black",transition:"all 0.3s ease","-webkit-transform":"scale(1.05)","-ms-transform":"scale(1.05)",transform:"scale(1.05)"})},mouseleave:function(){$(this).children().css({"background-color":"#f5f5f5",color:"#717f86",transition:"all 0.3s ease","-webkit-transform":"scale(1.0)","-ms-transform":"scale(1.0)",transform:"scale(1.0)"})},click:function(){window.location=$(this).children(".viewbutton").attr("href")}})}function na(){$(".profile-hire .userresponse").on("click",function(){$(".profile-hire .helperinput").val($(this).val());var a=$(".profile-hire .helperinput").val().split(",")[1];swal({title:"Are you sure you want to "+a.toLowerCase()+"?",text:"You won't be able to revert this!",type:"warning",showCancelButton:!0,confirmButtonColor:"rgb(38, 166, 91)",cancelButtonColor:"#d33",confirmButtonText:a,cancelButtonText:"No",confirmButtonClass:"btn-success",cancelButtonClass:"btn-danger",buttonsStyling:!0}).then(function(){$.ajax({url:"/users/"+ma+"/shortlists",type:"POST",data:JSON.stringify({hireid:$(".profile-hire .helperinput").val().split(",")[0],status:a}),dataType:"json",contentType:"application/json",cache:!1,success:function(a){"error"===a.status?b(a.message):window.location.reload()},error:function(a){a&&b("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})},function(a){"cancel"===a&&swal("Cancelled","No changes were made.","error")})})}function oa(){$(".admin-home-container .squarebox").on({mouseenter:function(){$(this).css({"background-color":"#446CB3",color:"#fff",transition:"all 0.3s ease","-webkit-transform":"scale(1.02)","-ms-transform":"scale(1.02)",transform:"scale(1.02)","z-index":1})},mouseleave:function(){$(this).css({"background-color":"#6BB9F0",color:"black",transition:"all 0.3s ease","-webkit-transform":"scale(1.0)","-ms-transform":"scale(1.0)",transform:"scale(1.0)","z-index":0})}})}function qa(a,b){!0===a?$(".adminUserAccount input#"+b+"yes").prop("checked",!0):$(".adminUserAccount input#"+b+"no").prop("checked",!0)}$(".nav .dropdown-menu .logout").on("click",function(){swal({title:"Sign Out",text:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"rgb(38, 166, 91)",cancelButtonColor:"rgb(221, 75, 57)",confirmButtonText:"Yes",cancelButtonText:"No",confirmButtonClass:"btn-success",cancelButtonClass:"btn-danger",buttonsStyling:!0}).then(function(){window.location="/logout"})});var n=window.location.pathname.split("/",2).join("/");if($('.nav > li > a[href="'+n+'"]').parent().addClass("active"),o(),$(window).resize(function(){o()}),$('[data-toggle="tooltip"]').tooltip(),$("a.page-scroll").bind("click",function(a){var b=$(this);$("html, body").stop().animate({scrollTop:$(b.attr("href")).offset().top-50},1250,"easeInOutExpo"),a.preventDefault()}),$(".ajax-contactus").length){var p=$(".ajax-contactus").data("idrole");""!==p&&$.ajax({url:"/loadcontactus/"+p,type:"POST",cache:!1,success:function(a){"success"===a.status&&($("#contactname").val(a.name),$("#contactemail").val(a.email))}}),$(".ajax-contactus").submit(function(a){a.preventDefault(),""===$("#contactname").val()||""===$("#contactemail").val()||""===$("#contactsubject").val()||""===$("#contactmessage").val()?b("Please fill in the required * fields."):d($("#contactemail").val())?$.ajax({url:"/contactus",type:"POST",data:JSON.stringify({name:$("#contactname").val(),email:$("#contactemail").val(),subject:$("#contactsubject").val(),message:$("#contactmessage").val(),dinnertime:$("#dinnertime").val()}),dataType:"json",contentType:"application/json",success:function(a){c("Thank you. We will get back to you within 2 business days."),$("#contactname").val(""),$("#contactemail").val(""),$("#contactsubject").val(""),$("#contactmessage").val("")},error:function(a){a&&b("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}}):b("Please provide a valid email address.")})}if($(".local-signup").length){a()&&(window.alert("For a better website experience, please use other browsers such as Chrome, Firefox or Safari."),$(".roleSelect input").css("display","block"),$(".roleLogo:last-child, #roleEmployer").css({position:"relative",top:"-17px"}));var D=window.sessionStorage.getItem("signuprole"),E=$("input[name='user[local][identification]']");"helper"===D?E.attr("placeholder","Passport Number"):"employer"===D&&E.attr("placeholder","NRIC eg.S1234567D"),$(".local-signup .form-group.email input#email").val(window.sessionStorage.getItem("signupemail")),$(".local-signup .form-group.identification input#identification").val(window.sessionStorage.getItem("signupidentification")),$(".local-signup .form-group input[value="+D+"]").attr("checked","checked"),$(".local-signup").submit(function(a){var b=$("input[name='user[local][email]']").val(),c=$("input[name='user[local][password]']").val(),d=$("input[name='user[local][confirm]']").val(),e=$("input[name='user[local][role]']:checked").val(),f=$("input[name='user[local][identification]']").val();x(e),y(".local-signup .email",".local-signup .form-group-text.temail",b),z(".local-signup .password",".local-signup .form-group-text.tpassword",c),z(".local-signup .confirm",".local-signup .form-group-text.tconfirm",d),A(".local-signup .confirm",".local-signup .form-group-text.tconfirm",c,d),C(e,f),!1!==x(e)&&!1!==y(".local-signup .email",".local-signup .form-group-text.temail",b)&&!1!==z(".local-signup .password",".local-signup .form-group-text.tpassword",c)&&!1!==z(".local-signup .confirm",".local-signup .form-group-text.tconfirm",d)&&!1!==A(".local-signup .confirm",".local-signup .form-group-text.tconfirm",c,d)&&!1!==C(e,f)||a.preventDefault(),window.sessionStorage.setItem("signupemail",b),window.sessionStorage.setItem("signuprole",e),window.sessionStorage.setItem("signupidentification",f)});var F,H=$(".local-signup .form-group");H.on("keyup",function(){clearTimeout(F),F=setTimeout(I,1e3)}),H.on("keydown",function(){clearTimeout(F)}),$(".local-signup .form-group.email").focusout(function(){y(".local-signup .email",".local-signup .form-group-text.temail",$("input[name='user[local][email]']").val())}),$(".local-signup .form-group.password").focusout(function(){z(".local-signup .password",".local-signup .form-group-text.tpassword",$("input[name='user[local][password]']").val())}),$(".local-signup .form-group.confirm").focusout(function(){var a=$("input[name='user[local][password]']").val(),b=$("input[name='user[local][confirm]']").val();z(".local-signup .confirm",".local-signup .form-group-text.tconfirm",b),A(".local-signup .confirm",".local-signup .form-group-text.tconfirm",a,b)}),$(".local-signup .form-group.identification").focusout(function(){C($("input[name='user[local][role]']:checked").val(),$("input[name='user[local][identification]']").val())}),$(".local-signup .form-group.role").on("click",function(){q(".local-signup .identification"),u(".local-signup .form-group-text.tidentification");var a=$("input[name='user[local][role]']:checked").val(),b=$("input[name='user[local][identification]']");"helper"===a?(b.attr("placeholder","Passport Number"),b.val("")):"employer"===a&&(b.attr("placeholder","NRIC, S1234567D"),b.val(""))})}if($(".local-login").length&&(a()&&window.alert("For a better website experience, please use other browsers such as Chrome, Firefox or Safari."),$(".local-login .form-group input:text:visible:first").focus(),$(".local-login .form-group input#email").val(window.localStorage.getItem("loginemail")),$(".local-login").submit(function(a){var b=$("input[name='user[local][email]']").val();window.localStorage.setItem("loginemail",b)})),$(".editemployer").length){a()&&(window.alert("For a better website experience, please use other browsers such as Chrome, Firefox or Safari."),$(".editemployer .jobscope input").css("display","inline-block"));var J=$(".editemployer").data("employer")[0],K=".editemployer .form-group ";L(),M(),"Landed"===J.profile.housetype.split(",")[0]&&$(".editemployer .form-group-unitno").addClass("hidden"),"Others"===J.profile.housetype.split(",")[0]&&($(K+".housetypeother").removeClass("hidden"),$(K+".housetypeother").val(J.profile.housetype.split(",")[1])),$(K+"#housetype").change(function(){"Landed"===$(K+"#housetype").val()?$(".editemployer .form-group-unitno").addClass("hidden"):$(".editemployer .form-group-unitno").removeClass("hidden"),"Others"!==$(K+"#housetype").val()?$(K+".housetypeother").addClass("hidden"):$(K+".housetypeother").removeClass("hidden")}),N(),$(K+"select").change(function(){N()}),$(K+".checkbox-inline").click(function(){function a(a){!0===$(K+a)[0].checked?($(K+a).val("true"),$(K+a+"hidden")[0].disabled=!0):$(K+a+"hidden")[0].disabled=!1}a("#infantcare"),a("#childcare"),a("#elderlycare"),a("#disabledcare"),a("#housework"),a("#cooking"),a("#handledog"),a("#handlecat")}),$("#editemployersave").on("click",function(){$(".editemployer #saveOrSubmit").val("save")}),$("#editemployersubmit").on("click",function(){$(".editemployer #saveOrSubmit").val("submit")}),$(".editemployer .editemployerformbuttons #editemployersave").length&&($(".editemployer #editemployersave").css({position:"fixed",bottom:"50px",right:"35px",width:"15%","min-width":"60px"}).text("Save"),$(window).scroll(function(){var a=$(".editemployer .editemployerformbuttons").offset().top;$(".editemployer #editemployersave").offset().top>a&&$(".editemployer #editemployersave").css({position:"",bottom:"",right:"",width:"","min-width":""}).text("Save My Progress")})),$(".editemployer").submit(function(a){if("Landed"===$(K+"#housetype").val()&&$(K+"#unitno").val("N/A"),"Others"!==$(K+"#housetype").val()&&$(K+".housetypeother").val(""),$(K+"#contactnumber").val()||$(K+"#contactnumber").val("0"),O())a.preventDefault(),b("Wrong format provided! Please provide Numbers in the yellow boxes.");else if(P())a.preventDefault(),b("Exceeded Character Limit! Please resolve the errors in yellow.");else{var c=$('input[name="employer[saveOrSubmit]"]').val();"submit"===c&&Q()&&(a.preventDefault(),b("Fill in all required '*' fields! Please resolve the errors in red."))}})}if($(".edithelper").length){a()&&(window.alert("For a better website experience, please use other browsers such as Chrome, Firefox or Safari."),$(".edithelper .skillsradio input").css("display","inline-block"));var R=$(".edithelper").data("helper")[0],S=".edithelper .form-group ";T(".workingexperienceyear",50),U("#firstcountry"),U("#secondcountry"),U("#thirdcountry"),V(),W(R.skills.english,"english"),W(R.skills.singapore,"singapore"),W(R.skills.infantcare,"infantcare"),W(R.skills.childcare,"childcare"),W(R.skills.elderlycare,"elderlycare"),W(R.skills.disabledcare,"disabledcare"),W(R.skills.housework,"housework"),W(R.skills.cooking,"cooking"),W(R.skills.handledog,"handledog"),W(R.skills.handlecat,"handlecat"),X(),$(S+"#nationality").change(function(){var a=$(S+"#nationality").val(),b=["Philippines","India","Indonesia","Myanmar","Sri_Lanka"],c=["+63","+91","+62","+95","+94"],d=b.indexOf(a);d>=0&&$(S+"#countrycode").val(c.slice(d,d+1))}),R.profile.children>0&&$(".edithelper .form-group-children").removeClass("hidden"),$(S+"#children").change(function(){$(S+"#children").val()>0?$(".edithelper .form-group-children").removeClass("hidden"):$(".edithelper .form-group-children").addClass("hidden")}),$("#edithelpersave").on("click",function(){$(".edithelper #saveOrSubmit").val("save")}),$("#edithelpersubmit").on("click",function(){$(".edithelper #saveOrSubmit").val("submit")}),$(".edithelper .edithelperformbuttons #edithelpersave").length&&($(".edithelper #edithelpersave").css({position:"fixed",bottom:"30px",right:"35px",width:"15%","min-width":"60px"}).text("Save"),$(window).scroll(function(){var a=$(".edithelper .edithelperformbuttons").offset().top;$(".edithelper #edithelpersave").offset().top>a&&$(".edithelper #edithelpersave").css({position:"",bottom:"",right:"",width:"","min-width":""}).text("Save My Progress")})),$(".edithelper").submit(function(a){var c=$(S+"#dob-date").val(),d=$(S+"#dob-month").val(),e=$(S+"#dob-year").val();if(""!==c&&""!==d&&""!==e&&$(S+"#dob").val(new Date(e+"-"+d+"-"+c+"T01:00:00+01:00")),$(S+"#contactnumber").val()||$(S+"#contactnumber").val("0"),$(S+"#children").val()<1&&$(S+"#ageofyoungest").val("0"),Y())a.preventDefault(),b("Wrong format provided! Please provide Numbers in the yellow boxes.");else if(Z())a.preventDefault(),b("Exceeded Character Limit! Please resolve the errors in yellow.");else{var f=$('input[name="helper[saveOrSubmit]"]').val();"submit"===f&&_()&&(a.preventDefault(),b("Fill in all required '*' fields! Please resolve the errors in red."))}})}if($(".profile-changeidentification").length&&$(".profile-changeidentification").on("click",function(a){a.preventDefault(),swal("Warning","To change identification, send a copy of your Identification to 'support@maidicare.com'.","warning")}),$(".browsepage").length){var aa=decodeURIComponent(window.location.search.substring(1)),ba=aa.replace(/=/g,"~*").replace(/\+/g," ").split("&"),ca={};ba.forEach(function(a){ca[a.split("~*")[0]]=a.split("~*")[1]}),ca.query&&($('.browsepage input[name="query"]').val(ca.query),$(".browse-content .querytext p span.glyphicon").css("visibility","visible"),ca.query.length>30?$(".browsepage .browse-content span.qtext").text("'"+ca.query.substring(0,30)+"...'"):$(".browsepage .browse-content span.qtext").text("'"+ca.query+"'")),$(".browsepage .browse-pagenumber a.pagenumber"+ca.page).addClass("active"),da(ca.infantcare,"infantcare"),da(ca.childcare,"childcare"),da(ca.elderlycare,"elderlycare"),da(ca.disabledcare,"disabledcare"),da(ca.transfer,"transfer"),da(ca.singapore,"singapore"),ca.nationality&&$('.browsepage select[name="nationality"]').val(ca.nationality),ca.religion&&$('.browsepage select[name="religion"]').val(ca.religion),ca.maritalstatus&&$('.browsepage select[name="maritalstatus"]').val(ca.maritalstatus),ea(),ga(),$('.browsepage input[name="infantcare"], .browsepage input[name="childcare"], .browsepage input[name="elderlycare"], .browsepage input[name="disabledcare"], .browsepage input[name="transfer"], .browsepage input[name="singapore"], .browsepage select[name="nationality"], .browsepage select[name="religion"], .browsepage select[name="maritalstatus"]').on("change",function(){$('.browse-menu input[name="page"]').val(1),window.history.replaceState(null,null,window.location.href.replace(/(page=)[0-9]{1,}/,"page=1")),fa()}),$(".browsepage .clearquerytext").on("click",function(){$('.browsepage input[name="query"]').val(""),$(".browsepage").submit()}),$(".browsepage .clearfilter").on("click",function(){function a(a,b){"checkbox"===b?$('.browsepage input[name="'+a+'"]:checked').attr("checked",!1):"radio"===b?$('.browsepage input[name="'+a+'"]').val("All"):"ddl"===b&&$('.browsepage select[name="'+a+'"]').val("All")}a("infantcare","checkbox"),a("childcare","checkbox"),a("elderlycare","checkbox"),a("disabledcare","checkbox"),a("transfer","radio"),a("singapore","radio"),a("nationality","ddl"),a("religion","ddl"),a("maritalstatus","ddl"),$(".browsepage").submit()}),$("#browseform").submit(function(){""!==$('.browsepage input[name="query"]').val()&&$('.browse-menu input[name="page"]').val(1)}),$(".browsepage button.togglefilter").on("click",function(){$(".browsepage .browse-sidebar").slideToggle("fast",function(){$(".browsepage .browse-sidebar").is(":visible")?($(".browsepage button.togglefilter").css({"background-color":"black",color:"orange"}),$("html, body").animate({scrollTop:$(".browsepage").offset().top-50},1e3,"easeInOutExpo")):$(".browsepage button.togglefilter").css({"background-color":"orange",color:"white"})})})}if($(".browseview").length){var ha=$(".browseview").data("hirearray"),ia=[];if(ha.forEach(function(a,b){ia.push(a.huserid)}),$(".browseview .hirehelper").val()){var ja=$(".browseview .hirehelper").val().split("&")[0],ka=$(".browseview .hirehelper").val().split("&")[1];ia.indexOf(ja)>=0&&$(".browseview .hirehelper").removeClass("btn-primary").addClass("btn-secondary").text("Selected")}la(),$(".browseview .hirehelper").on("click",function(){$.ajax({url:"/browse/hire",type:"POST",data:JSON.stringify({helperuserid:ja,helperid:ka}),dataType:"json",contentType:"application/json",cache:!1,success:function(a){"success"===a.status?c(a.message):"error"===a.status?b(a.message):"redirect"===a.status&&(window.location=a.message)},error:function(a){a&&b("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})})}if($(".profile-hire").length){var ma=$(".profile-hire").data("userid");$('.profile-hire-filter select[name="filter"]').on("change",function(){var a=$('.profile-hire-filter select[name="filter"]').val();$.ajax({url:"/users/"+ma+"/shortlists/filter",type:"POST",data:JSON.stringify({filter:a}),dataType:"json",contentType:"application/json",cache:!1,success:function(b){function f(a){return new Date(1e3*parseInt(a.substring(0,8),16))}var c=["All","confirmed","accepted","pending","rejected"],d=["#95A5A6","#1E824C","#3A539B","#E87E04","#96281B"],e=c.indexOf(a);$(".profile-hire-filter").css("background-color",d.slice(e,e+1)),$(".hireContainer").empty();var g=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];b.hireInfo.length>0&&b.hireInfo.forEach(function(a){function h(a){var b="";return b=a.user.profile.photo.version?"https://res.cloudinary.com/dbjdqrw9o/image/upload/w_300,h_300,c_thumb,g_face/v"+a.user.profile.photo.version+"/"+a.user._id+"."+a.user.profile.photo.format:"/images/noimg.jpg",'<a href="/browse/view/"'+a.user._id+"><img src="+b+' alt="profile image"></a>'}function i(a){var c="";return"employer"===b.role?c='<div class="profile-hire-userpic">'+h(a)+"</div>":"helper"===b.role&&(c='<div class="profile-hire-userpic"><a href="/users/employer/"'+a.user.userid+'><img src="/images/employer.png" alt="profile image"></a></div>'),'<div class="col-md-3 col-sm-3">'+c+"</div>"}function j(a){var c="";if("helper"===b.role){var d="";d="Others"===a.user.profile.housetype.split(",")[0]?a.user.profile.housetype.replace(/,/,", "):a.user.profile.housetype.split(",")[0].replace(/_/g," "),c='<a href="/users/employer/'+a.user.userid+'">'+a.user.profile.fullname+"</a><p>"+d+" | "+a.user.profile.maritalstatus+"</p>"}else{var e="";e=a.user.transfer?"<p>"+a.user.profile.nationality+" | "+a.user.profile.maritalstatus+" | Transfer</p>":"<p>"+a.user.profile.nationality+" | "+a.user.profile.maritalstatus+"</p>",c='<a href="/browse/view/'+a.user._id+'">'+a.user.profile.firstname+"</a>"+e}return'<div class="col-md-6 col-sm-6">'+c+'<div class="well">'+a.message+"</div></div>"}function k(a){var c="";return"helper"===b.role&&"pending"===a.status&&(c='<button class="btn btn-success userresponse" value="'+a._id+',Accept">Accept</button><button class="btn btn-danger userresponse" value="'+a._id+',Reject">Reject</button>'),"helper"===b.role&&"accepted"===a.status&&(c='<button class="btn btn-danger userresponse" value="'+a._id+',Reject">Reject</button>'),"employer"===b.role&&"pending"===a.status?c='<button class="btn btn-danger userresponse" value="'+a._id+',Reject">Reject</button>':"employer"===b.role&&"accepted"===a.status&&(c='<button class="btn btn-success userresponse" value="'+a._id+',Confirm">Confirm</button><button class="btn btn-danger userresponse" value="'+a._id+',Reject">Reject</button>'),'<div class="col-md-3 col-sm-3"><div class="profile-hire-response"><input type="hidden" class="helperinput" name="helperinput" value="">'+c+"</div></div>"}function l(a){return'<div class="col-md-12 col-sm-12 profile-hire-content"><h4>'+e+'</h4><h4 class="right" id='+a.status+">"+a.status+"</h4><hr>"+i(a,b.role)+j(a)+k(a)+"</div>"}var c=f(a._id.toString()),d=c.getMinutes()<10?"0"+c.getMinutes():c.getMinutes(),e=c.getDate().toString()+" "+g[c.getMonth()]+" "+c.getFullYear().toString()+", "+c.getHours()+":"+d;$(".hireContainer").append(l(a)),na()})},error:function(a){a&&b("Something went wrong! Please refresh the page and try again.")}})}),na()}if($(".ajax-forgotpassword").length&&$(".ajax-forgotpassword").submit(function(a){a.preventDefault();var e=$('.ajax-forgotpassword input[name="email"]').val();d(e)?$.ajax({url:"/password/forgot",type:"POST",data:JSON.stringify({email:e}),dataType:"json",contentType:"application/json",success:function(a){"success"===a.status?c(a.message):(b(a.message),$('.ajax-forgotpassword input[name="email"]').val(""))},error:function(a){a&&b("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}}):b("Please provide a valid email.")}),$(".ajax-resetpassword").length&&$(".ajax-resetpassword").submit(function(a){a.preventDefault();var c=window.location.pathname.split("/password/validate/")[1],d=c.split("&")[0],e=$('.ajax-resetpassword input[name="password"]').val(),f=$('.ajax-resetpassword input[name="confirm"]').val();e.length>=6&&f.length>=6?e===f?$.ajax({url:"/password/reset",type:"POST",data:JSON.stringify({userid:d,password:e,confirm:f}),dataType:"json",contentType:"application/json",success:function(a){"success"===a.status?window.location=a.url:b(a.message)},error:function(a){a&&b("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}}):b("The passwords do not match."):b("Password must be at least 6 characters.")}),$(".profile-activate-reset").length>0&&$(".profile-activate-reset").on("click",function(){var a=$(".profile-activate-reset").data("id");$.ajax({url:"/users/"+a+"/activate/reset",type:"POST",cache:!1,success:function(a){"success"===a.status&&c(a.message)},error:function(a){a&&b("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})}),$(".postadmincode").length>0&&$(".postadmincode").on("click",function(){$.ajax({url:"/admin/newcode",type:"POST",error:function(a){a&&b("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})}),$(".admin-remove-navbar").length>0){if($(".navbar-brand").text("Admin").attr("href","/admin"),$(".nav.navbar-nav.navbar-right").empty(),$(".nav.navbar-nav.navbar-right").append('<li><a target="_blank" href="/admin/email">Send an Email</a></li><li><a class="btn btn-danger"href="/logout">Logout</a></li>'),oa(),$(".admin-shortlist-search").length>0&&$(".admin-shortlist-search").on("click",function(){var a=$("input#hireid").val();""!==a&&(window.location="/admin/shortlists/"+a)}),$(".adminUserAccount").length>0){var pa=$(".adminUserAccount").data("admin")[0].userid;qa(pa.available,"available"),qa(pa.recruit,"recruit"),qa(pa.hire,"hire"),qa(pa.activate.status,"activatestatus")}if($(".admin-delete-user").length>0&&$(".admin-delete-user").on("click",function(){var a=$(".admin-delete-user").val(),d=a.split("&")[0],e=a.split("&")[1],f=a.split("&")[2];swal({title:"Type email to Delete",text:f,input:"email",showCancelButton:!0,confirmButtonColor:"rgb(221, 75, 57)",confirmButtonText:"Delete",showLoaderOnConfirm:!0,preConfirm:function(a){return new Promise(function(b,c){setTimeout(function(){a===f?b():c("Input does not match Email.")},1e3)})}}).then(function(a){$.ajax({url:"/admin/users/delete",type:"POST",cache:!1,data:JSON.stringify({id:d,role:e}),dataType:"json",contentType:"application/json",success:function(a){"success"===a.status?(c("Account Deleted! Redirecting to Admin Menu..."),setTimeout(function(){window.location="/admin"},2500)):b(a.message)},error:function(a){a&&b("Please refresh the page and try again.")}})})}),$(".admin-hire-filter").length>0){var ra=window.location.pathname.split("/admin/shortlists/all/")[1];$('.admin-hire-filter select[name="filter"]').val(ra),$('.admin-hire-filter select[name="filter"]').on("change",function(){var a=$('.admin-hire-filter select[name="filter"]').val();window.location="/admin/shortlists/all/"+a})}$(".admin-change-hire-status").length>0&&$(".admin-change-hire-status select#status").on("change",function(){var a=$(this).data("hireid"),c=$(this).val();$.ajax({url:"/admin/shortlists/"+a,type:"POST",cache:!1,data:JSON.stringify({status:c}),dataType:"json",contentType:"application/json",success:function(a){window.location.reload()},error:function(a){a&&b("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})}),$(".export-hire-data").length>0&&$(".export-hire-data").on("click",function(){$.ajax({url:"/admin/shortlists/"+$(this).val()+"/export",type:"POST",cache:!1,success:function(a){function b(a,b){var c="data:application/json;charset=utf-8,"+JSON.stringify(a),d=encodeURI(c),e=document.createElement("a");e.setAttribute("href",d),e.setAttribute("download",b),e.click()}"success"===a.status&&(b(a.helperData,"helper_"+a.helperData.userid.local.email.replace(".",",")),b(a.employerData,"employer_"+a.employerData.userid.local.email.replace(".",",")))},error:function(a){a&&b("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})}),$(".admin-email-all-inactive-helper").length>0&&($(".admin-email-all-inactive-helper").on("click",function(){$.ajax({url:"/admin/inactive/helpers",type:"POST",cache:!1,success:function(a){"success"===a.status?c(a.message):b(a.message)},error:function(a){a&&b("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})}),$(".admin-email-inactive-helper").on("click",function(){var a=$(this).val();$.ajax({url:"/admin/inactive/helpers/"+a,type:"POST",cache:!1,success:function(a){"success"===a.status?c(a.message):b(a.message)},error:function(a){a&&b("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})})),$(".admin-email-inactive-hire").length>0&&$(".admin-email-inactive-hire").on("click",function(){var a=$(this).val();$.ajax({url:"/admin/inactive/shortlists",type:"POST",cache:!1,data:JSON.stringify({userids:a}),dataType:"json",contentType:"application/json",success:function(a){"success"===a.status&&c(a.message)},error:function(a){a&&b("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})})}$("#demo").on("click",function(){$.ajax({url:"/api/users/data",type:"GET",dataType:"json"}).done(function(a){a.forEach(function(a){$.ajax({type:"POST",url:"/api/users/demo",data:a})})})}),$("#remove").on("click",function(){$.ajax({type:"delete",url:"/api/users/remove"})})});
