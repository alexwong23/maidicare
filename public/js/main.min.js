$(document).ready(function(){function e(){var e=window.navigator.userAgent,t=e.indexOf("MSIE "),a=e.indexOf("Trident/"),o=e.indexOf("Edge/");return t>0||a>0||o>0?!0:void 0}function t(e){swal({title:"Error",text:e,type:"error",confirmButtonColor:"rgb(221, 75, 57)"})}function a(e){swal({title:"Success",text:e,type:"success",confirmButtonColor:"rgb(38, 166, 91)"})}function o(e){var t=/[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;return t.test(e)}function n(e){var t=new Date,a=new Date(e),o=t.getFullYear()-a.getFullYear(),n=t.getMonth()-a.getMonth();return(0>n||0===n&&t.getDate()<a.getDate())&&o--,o}function i(e){$(e).css({"border-color":"#ccc",color:"#555",border:"1px solid #ccc"})}function r(e){$(e).css({color:"#a94442",border:"2px solid #a94442"})}function s(e){$(e).css({color:"#8a6d3b",border:"2px solid #F7CA18"})}function l(e,t,a){var o=e+'[name="'+t+'"]',n=$(o).val();return n.length>a?(s(o),!0):(i(o),!1)}function c(e,t,a){var o,n=t+'[name="'+a+'"]',r=$(n).val();if(e){var l=new RegExp(/^(\s*|\d+)$/);l.test(r)?(i(n),o=!1):(s(n),o=!0)}else{var c=new RegExp(/^\d+$/);c.test(r)?(i(n),o=!1):(s(n),o=!0)}return o}function p(e,t){var a=e+'[name="'+t+'"]',o=$(a).val();return o.length>0?(i(a),!1):(r(a),!0)}function u(e,t){var a=e+'[name="'+t+'"]',o=+$(a).val();return o>0?(i(a),!1):(r(a),!0)}function d(){function e(e,t){""===e?r("select#dob-"+t):i("select#dob-"+t)}var t=$("select#dob-date").val(),a=$("select#dob-month").val(),o=$("select#dob-year").val();return""!==t&&""!==a&&""!==o?(i("select#dob-date"),i("select#dob-month"),i("select#dob-year"),!1):(e(t,"date"),e(a,"month"),e(o,"year"),!0)}function f(){$(window).width()>768&&$(".dropdown").on({mouseenter:function(){$(this).find(".dropdown-menu").stop(!0,!0).delay(150).fadeIn(500)},mouseleave:function(){$(this).find(".dropdown-menu").stop(!0,!0).delay(150).fadeOut(500)}})}function h(e){$(e).css("color","#717f86"),$(e).find(".right-addon").remove(),$(e).removeClass("has-error has-success has-warning")}function m(e){h(e),$(e).css("color","#3c763d"),$(e).addClass("has-success"),$(e).append('<i class="right-addon glyphicon glyphicon-ok"></i>')}function g(e){h(e),$(e).css("color","#a94442"),$(e).addClass("has-error"),$(e).append('<i class="right-addon glyphicon glyphicon-remove"></i>')}function v(e){h(e),$(e).css("color","#8a6d3b"),$(e).addClass("has-warning"),$(e).append('<i class="right-addon glyphicon glyphicon-warning-sign"></i>')}function b(e){$(e).css({visibility:"hidden",color:"#717f86"}),$(e).text("label")}function w(e,t){b(e),$(e).css({visibility:"visible",color:"#a94442"}),$(e).text(t)}function y(e,t){b(e),$(e).css({visibility:"visible",color:"#8a6d3b"}),$(e).text(t)}function x(e,a,n){return n.length<1?(h(e),b(a),!1):o(n)?void $.ajax({url:"/users/emailtaken",type:"POST",cache:!1,data:JSON.stringify({email:n}),dataType:"json",contentType:"application/json",success:function(t){return"success"!==t.status?(g(e),w(a,"Email has been taken."),!1):(m(e),void b(a))},error:function(e){e&&t("Something went wrong! Please refresh the page and try again.")}}):(g(e),w(a,"Please provide a valid email"),!1)}function k(e,t,a){var o=new RegExp(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9, !@#$%^&*]).{6,}$/);return a.length<1?(h(e),b(t),!1):a.length<6?(g(e),w(t,"Minimum 6 characters"),!1):void(o.test(a)===!1?(v(e),y(t,"Password not strong")):(m(e),b(t)))}function j(e,t,a,o){return o.length<1?(h(e),b(t),!1):a!==o?(g(e),w(t,"Passwords do not match"),!1):void 0}function S(e){for(var t=e.slice(1,8),a=t.split("").map(function(e){return parseInt(e,10)}),o=[2,7,6,5,4,3,2],n=0,i=0;i<a.length;i++)n+=a[i]*o[i];var r=e.slice(0,1).toUpperCase();("T"===r||"G"===r)&&(n+=4);var s=11-n%11,l=["A","B","C","D","E","F","G","H","I","Z","J"];("F"===r||"G"===r)&&(l=["K","L","M","N","P","Q","R","T","U","W","X"]);var c=l.slice(s-1,s).toString(),p=e.slice(8,9).toUpperCase();return c===p?!0:!1}function T(e,t){var a=new RegExp(/^([S,T,s,t][0-9]{7}[A-J,Z,a-j,z])$|^([F,G,f,g][0-9]{7}[K-R,T-X,k-r,t-x])$/),o=".local-signup .identification",n=".local-signup .form-group-text.tidentification";if(t.length<1)return h(o),b(n),!1;if("helper"===e)m(o),b(n);else{if("employer"!==e||!a.test(t)||!S(t))return"helper"===e||"employer"===e?(g(o),w(n,"Invalid Identification"),!1):(g(o),w(n,"Invalid Identification"),!1);m(o),b(n)}}function C(){var e=$("input[name='user[local][email]']").val(),t=$("input[name='user[local][password]']").val(),a=$("input[name='user[local][confirm]']").val(),o=$("input[name='user[local][identification]']").val();x(".local-signup .email",".local-signup .form-group-text.temail",e),k(".local-signup .password",".local-signup .form-group-text.tpassword",t),k(".local-signup .confirm",".local-signup .form-group-text.tconfirm",a),j(".local-signup .confirm",".local-signup .form-group-text.tconfirm",t,a),T(Q,o)}function P(){$(oe+"#housetype").val(ae.profile.housetype.split(",")[0]),$(oe+"#maritalstatus").val(ae.profile.maritalstatus),$(oe+"#adult").val(ae.household.adult),$(oe+"#teenager").val(ae.household.teenager),$(oe+"#children").val(ae.household.children),$(oe+"#infant").val(ae.household.infant),$(oe+"#elderly").val(ae.household.elderly),$(oe+"#disabled").val(ae.household.disabled),$(oe+"#otherduties").val(ae.jobscope.otherduties)}function O(){ae.jobscope.infantcare===!0&&($(oe+"#infantcare").prop("checked",!0),$(oe+"#infantcarehidden")[0].disabled=!0),ae.jobscope.childcare===!0&&($(oe+"#childcare").prop("checked",!0),$(oe+"#childcarehidden")[0].disabled=!0),ae.jobscope.elderlycare===!0&&($(oe+"#elderlycare").prop("checked",!0),$(oe+"#elderlycarehidden")[0].disabled=!0),ae.jobscope.disabledcare===!0&&($(oe+"#disabledcare").prop("checked",!0),$(oe+"#disabledcarehidden")[0].disabled=!0),ae.jobscope.housework===!0&&($(oe+"#housework").prop("checked",!0),$(oe+"#houseworkhidden")[0].disabled=!0),ae.jobscope.cooking===!0&&($(oe+"#cooking").prop("checked",!0),$(oe+"#cookinghidden")[0].disabled=!0),ae.jobscope.handledog===!0&&($(oe+"#handledog").prop("checked",!0),$(oe+"#handledoghidden")[0].disabled=!0),ae.jobscope.handlecat===!0&&($(oe+"#handlecat").prop("checked",!0),$(oe+"#handlecathidden")[0].disabled=!0)}function I(){var e=parseInt($(oe+"#adult").val(),10)+parseInt($(oe+"#teenager").val(),10)+parseInt($(oe+"#children").val(),10)+parseInt($(oe+"#infant").val(),10)+parseInt($(oe+"#elderly").val(),10)+parseInt($(oe+"#disabled").val(),10);$(".totalnoinhousehold").text(e)}function B(){return c(!1,"input","employer[local][contact][number]")|c(!0,"input","employer[profile][postalcode]")?!0:!1}function _(){return l("input","employer[profile][fullname]",50)|l("input","employer[profile][blockhouseno]",20)|l("input","employer[profile][unitno]",20)|l("input","employer[profile][streetname]",50)|l("textarea","employer[jobscope][otherduties]",300)?!0:!1}function D(){return p("input","employer[profile][fullname]")|p("select","employer[profile][housetype]")|p("input","employer[profile][blockhouseno]")|p("input","employer[profile][unitno]")|p("input","employer[profile][streetname]")|p("select","employer[profile][maritalstatus]")|u("input","employer[profile][postalcode]")|u("input","employer[local][contact][number]")?!0:!1}function A(e,t){for(var a=(new Date).getFullYear(),o=0;t>o;o++){var n=a-o;$(ie+e).append('<option value="'+n+'">'+n+"</option>")}}function E(e){var t=$('<option value="">-- select one --</option><option value="Brunei">Brunei</option><option value="Hong_Kong">Hong Kong</option><option value="India">India</option><option value="Indonesia">Indonesia</option><option value="Middle_East">Middle East</option><option value="Myanmar">Myanmar</option><option value="Philippines">Philippines</option><option value="Singapore">Singapore</option><option value="Sri_Lanka">Sri Lanka</option><option value="Taiwan">Taiwan</option>');$(ie+e).append(t)}function q(){$(ie+"#nationality").val(ne.profile.nationality),$(ie+"#portrepatriated").val(ne.profile.portrepatriated),$(ie+"#religion").val(ne.profile.religion),$(ie+"#dietaryrestriction").val(ne.profile.dietaryrestriction),$(ie+"#foodhandlingrestriction").val(ne.profile.foodhandlingrestriction),$(ie+"#siblings").val(ne.profile.siblings),$(ie+"#maritalstatus").val(ne.profile.maritalstatus),$(ie+"#children").val(ne.profile.children),$(ie+"#phagency").val(ne.profile.phagency),$(ie+"#educationlevel").val(ne.education.educationlevel),$(ie+"#otherqualifications").val(ne.education.otherqualifications),$(ie+"#firstfrom").val(ne.workingexperience.first.from),$(ie+"#firstto").val(ne.workingexperience.first.to),$(ie+"#firstcountry").val(ne.workingexperience.first.country),$(ie+"#firstduties").val(ne.workingexperience.first.duties),$(ie+"#secondfrom").val(ne.workingexperience.second.from),$(ie+"#secondto").val(ne.workingexperience.second.to),$(ie+"#secondcountry").val(ne.workingexperience.second.country),$(ie+"#secondduties").val(ne.workingexperience.second.duties),$(ie+"#thirdfrom").val(ne.workingexperience.third.from),$(ie+"#thirdto").val(ne.workingexperience.third.to),$(ie+"#thirdcountry").val(ne.workingexperience.third.country),$(ie+"#thirdduties").val(ne.workingexperience.third.duties)}function F(e,t){e===!0?$(ie+"#"+t+"yes").prop("checked",!0):$(ie+"#"+t+"no").prop("checked",!0)}function M(){if(A("#dob-year",100),null===ne.profile.dob)$(ie+"#dob-date").val(""),$(ie+"#dob-month").val(""),$(ie+"#dob-year").val("");else{var e=new Date(ne.profile.dob);$(ie+"#dob-date").val((e.getDate()<10?"0":"")+e.getDate()),$(ie+"#dob-month").val((e.getMonth()<9?"0":"")+(e.getMonth()+1)),$(ie+"#dob-year").val(e.getFullYear())}}function N(){return c(!1,"input","helper[local][contact][number]")|c(!1,"input","helper[profile][heightcm]")|c(!1,"input","helper[profile][weightkg]")|c(!0,"input","helper[profile][ageofyoungest]")?!0:!1}function R(){return l("input","helper[profile][firstname]",20)|l("input","helper[profile][middlename]",20)|l("input","helper[profile][familyname]",20)|l("input","helper[profile][pob]",100)|l("input","helper[profile][residentialaddress]",100)|l("input","helper[profile][allergies]",50)|l("input","helper[education][fieldofstudy]",50)|l("textarea","helper[education][otherqualifications]",300)|l("textarea","helper[workingexperience][first][duties]",300)|l("textarea","helper[workingexperience][second][duties]",300)|l("textarea","helper[workingexperience][third][duties]",300)?!0:!1}function Y(){return d()|p("input","helper[profile][firstname]")|p("input","helper[profile][familyname]")|p("input","helper[profile][pob]")|p("select","helper[profile][nationality]")|p("input","helper[local][contact][countrycode]")|p("input","helper[profile][residentialaddress]")|p("select","helper[profile][portrepatriated]")|p("select","helper[profile][religion]")|p("select","helper[profile][dietaryrestriction]")|p("select","helper[profile][foodhandlingrestriction]")|p("select","helper[profile][maritalstatus]")|p("select","helper[profile][phagency]")|p("select","helper[education][educationlevel]")|p("input","helper[education][fieldofstudy]")|u("input","helper[local][contact][number]")|u("input","helper[profile][heightcm]")|u("input","helper[profile][weightkg]")?!0:!1}function J(e,t){e&&$('.browsepage input[name="'+t+'"][value="'+e+'"]').attr("checked","checked")}function z(){$(".browsepage .helperContainer .panel").on({mouseenter:function(){$(this).children().css({"background-color":"#68C3A3",color:"black",transition:"all 0.3s ease","-webkit-transform":"scale(1.05)","-ms-transform":"scale(1.05)",transform:"scale(1.05)"})},mouseleave:function(){$(this).children().css({"background-color":"#f5f5f5",color:"#717f86",transition:"all 0.3s ease","-webkit-transform":"scale(1.0)","-ms-transform":"scale(1.0)",transform:"scale(1.0)"})},click:function(){window.location=$(this).children(".viewbutton").attr("href")}})}function L(){var e=$(".browsepage").serialize().replace(/=/g,",").split("&"),a={};e.forEach(function(e){a[e.split(",")[0]]=e.split(",")[1]}),$.ajax({url:"/browse/filter",type:"POST",data:a,dataType:"json",cache:!1,success:function(e){if($(".helperContainer").empty(),$(".browsepage .querytext span.found").text(e.totalResults+" Found"),e.helperInfo.forEach(function(e){function t(){var t="/images/noimg.jpg";return e.profile.photo.version&&(t="https://res.cloudinary.com/dbjdqrw9o/image/upload/w_300,h_300,c_thumb,g_face/dpr_1.0/v"+e.profile.photo.version+"/"+e._id+"."+e.profile.photo.format),t}function a(){var t="";return e.transfer&&(t+='<img class="transfericon" src="/images/logo/transfer.png" alt="transfer icon" data-toggle="tooltip" data-placement="right" title="Transfer">'),e.skills.singapore&&(t+='<img class="singaporeicon" src="/images/logo/singapore_icon.png" alt="singapore icon" data-toggle="tooltip" data-placement="right" title="Worked in Singapore before">'),t}function o(t,a){return'<div class="col-sm-4 col-xs-12"><div class="panel panel-default"><a class="viewbutton" href="/browse/view/'+e._id+'"></a><div class="panel-body"><div class="browse-helperpic"><img src='+t+' alt="profile image"></div><div class="smarticons">'+a+'</div></div><div class="panel-footer"><h4>'+e.profile.firstname+"<span>, "+n(e.profile.dob)+"<span></h4><p>"+e.profile.maritalstatus+" | "+e.profile.nationality.replace(/_/g," ")+'</p><img class="flagicon" src="/images/logo/'+e.profile.nationality.toLowerCase()+'_flag.png" alt="flag icon"></div></div></div>'}$(".helperContainer").append(o(t(),a()))}),z(),$(".browse-pagenumber").empty(),e.totalResults>1){for(var t=0;t<Math.ceil(e.totalResults/12);t++)$(".browse-pagenumber").append('<a class="pagenumber'+(t+1)+'">'+(t+1)+"</a>");var a=window.location.search.indexOf("page="),o=window.location.search.substring(a+5,a+6);$(".browsepage .browse-pagenumber a.pagenumber"+o).addClass("active"),U()}},error:function(e){e&&t("Something went wrong! Please refresh the page and try again.")}})}function U(){$(".browse-pagenumber a").on("click",function(){var e=$(this).text();$('.browse-menu input[name="page"]').val(e),window.history.replaceState(null,null,window.location.href.replace(/(page=)[0-9]{1,}/,"page="+e)),L(),$("html, body").animate({scrollTop:$(".browsepage .browse-header").offset().top-75},1e3,"easeInOutExpo")})}function W(){$(".browseview .relatedContainer .panel").on({mouseenter:function(){$(this).children().css({"background-color":"#68C3A3",color:"black",transition:"all 0.3s ease","-webkit-transform":"scale(1.05)","-ms-transform":"scale(1.05)",transform:"scale(1.05)"})},mouseleave:function(){$(this).children().css({"background-color":"#f5f5f5",color:"#717f86",transition:"all 0.3s ease","-webkit-transform":"scale(1.0)","-ms-transform":"scale(1.0)",transform:"scale(1.0)"})},click:function(){window.location=$(this).children(".viewbutton").attr("href")}})}function G(){$(".profile-hire .userresponse").on("click",function(){$(".profile-hire .helperinput").val($(this).val());var e=$(".profile-hire .helperinput").val().split(",")[1];swal({title:"Are you sure you want to "+e.toLowerCase()+"?",text:"You won't be able to revert this!",type:"warning",showCancelButton:!0,confirmButtonColor:"rgb(38, 166, 91)",cancelButtonColor:"#d33",confirmButtonText:e,cancelButtonText:"No",confirmButtonClass:"btn-success",cancelButtonClass:"btn-danger",buttonsStyling:!0}).then(function(){$.ajax({url:"/users/"+fe+"/shortlists",type:"POST",data:JSON.stringify({hireid:$(".profile-hire .helperinput").val().split(",")[0],status:e}),dataType:"json",contentType:"application/json",cache:!1,success:function(e){"error"===e.status?t(e.message):window.location.reload()},error:function(e){e&&t("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})},function(e){"cancel"===e&&swal("Cancelled","No changes were made.","error")})})}function H(){$(".admin-home-container .squarebox").on({mouseenter:function(){$(this).css({"background-color":"#446CB3",color:"#fff",transition:"all 0.3s ease","-webkit-transform":"scale(1.02)","-ms-transform":"scale(1.02)",transform:"scale(1.02)","z-index":1})},mouseleave:function(){$(this).css({"background-color":"#6BB9F0",color:"black",transition:"all 0.3s ease","-webkit-transform":"scale(1.0)","-ms-transform":"scale(1.0)",transform:"scale(1.0)","z-index":0})}})}function K(e,t){e===!0?$(".adminUserAccount input#"+t+"yes").prop("checked",!0):$(".adminUserAccount input#"+t+"no").prop("checked",!0)}$(".nav .dropdown-menu .logout").on("click",function(){swal({title:"Sign Out",text:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"rgb(38, 166, 91)",cancelButtonColor:"rgb(221, 75, 57)",confirmButtonText:"Yes",cancelButtonText:"No",confirmButtonClass:"btn-success",cancelButtonClass:"btn-danger",buttonsStyling:!0}).then(function(){window.location="/logout"})});var Z=window.location.pathname.split("/",2).join("/");if($('.nav > li > a[href="'+Z+'"]').parent().addClass("active"),f(),$(window).resize(function(){f()}),$('[data-toggle="tooltip"]').tooltip(),$("a.page-scroll").bind("click",function(e){var t=$(this);$("html, body").stop().animate({scrollTop:$(t.attr("href")).offset().top-50},1250,"easeInOutExpo"),e.preventDefault()}),$(".ajax-contactus").length){var X=$(".ajax-contactus").data("idrole");""!==X&&$.ajax({url:"/loadcontactus/"+X,type:"POST",cache:!1,success:function(e){"success"===e.status&&($("#contactname").val(e.name),$("#contactemail").val(e.email))}}),$(".ajax-contactus").submit(function(e){e.preventDefault(),""===$("#contactname").val()||""===$("#contactemail").val()||""===$("#contactsubject").val()||""===$("#contactmessage").val()?t("Please fill in the required * fields."):o($("#contactemail").val())?$.ajax({url:"/contactus",type:"POST",data:JSON.stringify({name:$("#contactname").val(),email:$("#contactemail").val(),subject:$("#contactsubject").val(),message:$("#contactmessage").val(),dinnertime:$("#dinnertime").val()}),dataType:"json",contentType:"application/json",success:function(e){a("Thank you. We will get back to you within 2 business days."),$("#contactname").val(""),$("#contactemail").val(""),$("#contactsubject").val(""),$("#contactmessage").val("")},error:function(e){e&&t("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}}):t("Please provide a valid email address.")})}if($(".local-signup").length){e()&&window.alert("For a better website experience, please use other browsers such as Chrome, Firefox or Safari."),$(".local-signup .form-group.email input#email").val(window.sessionStorage.getItem("signupemail")),$(".local-signup .form-group.identification input#identification").val(window.sessionStorage.getItem("signupidentification"));var Q=$("input[name='user[local][role]']").val();$(".local-signup").submit(function(e){var t=$("input[name='user[local][email]']").val(),a=$("input[name='user[local][password]']").val(),o=$("input[name='user[local][confirm]']").val(),n=$("input[name='user[local][identification]']").val();x(".local-signup .email",".local-signup .form-group-text.temail",t),k(".local-signup .password",".local-signup .form-group-text.tpassword",a),k(".local-signup .confirm",".local-signup .form-group-text.tconfirm",o),j(".local-signup .confirm",".local-signup .form-group-text.tconfirm",a,o),T(Q,n),(x(".local-signup .email",".local-signup .form-group-text.temail",t)===!1||k(".local-signup .password",".local-signup .form-group-text.tpassword",a)===!1||k(".local-signup .confirm",".local-signup .form-group-text.tconfirm",o)===!1||j(".local-signup .confirm",".local-signup .form-group-text.tconfirm",a,o)===!1||T(Q,n)===!1)&&e.preventDefault(),window.sessionStorage.setItem("signupemail",t),window.sessionStorage.setItem("signupidentification",n)});var V,ee=1e3,te=$(".local-signup .form-group");te.on("keyup",function(){clearTimeout(V),V=setTimeout(C,ee)}),te.on("keydown",function(){clearTimeout(V)}),$(".local-signup .form-group.email").focusout(function(){var e=$("input[name='user[local][email]']").val();x(".local-signup .email",".local-signup .form-group-text.temail",e)}),$(".local-signup .form-group.password").focusout(function(){var e=$("input[name='user[local][password]']").val();k(".local-signup .password",".local-signup .form-group-text.tpassword",e)}),$(".local-signup .form-group.confirm").focusout(function(){var e=$("input[name='user[local][password]']").val(),t=$("input[name='user[local][confirm]']").val();k(".local-signup .confirm",".local-signup .form-group-text.tconfirm",t),j(".local-signup .confirm",".local-signup .form-group-text.tconfirm",e,t)}),$(".local-signup .form-group.identification").focusout(function(){var e=$("input[name='user[local][identification]']").val();T(Q,e)})}if($(".local-login").length&&(e()&&window.alert("For a better website experience, please use other browsers such as Chrome, Firefox or Safari."),$(".local-login .form-group input:text:visible:first").focus(),$(".local-login .form-group input#email").val(window.localStorage.getItem("loginemail")),$(".local-login").submit(function(e){var t=$("input[name='user[local][email]']").val();window.localStorage.setItem("loginemail",t)})),$(".editemployer").length){e()&&(window.alert("For a better website experience, please use other browsers such as Chrome, Firefox or Safari."),$(".editemployer .jobscope input").css("display","inline-block"));var ae=$(".editemployer").data("employer")[0],oe=".editemployer .form-group ";P(),O(),"Landed"===ae.profile.housetype.split(",")[0]&&$(".editemployer .form-group-unitno").addClass("hidden"),"Others"===ae.profile.housetype.split(",")[0]&&($(oe+".housetypeother").removeClass("hidden"),$(oe+".housetypeother").val(ae.profile.housetype.split(",")[1])),$(oe+"#housetype").change(function(){"Landed"===$(oe+"#housetype").val()?$(".editemployer .form-group-unitno").addClass("hidden"):$(".editemployer .form-group-unitno").removeClass("hidden"),"Others"!==$(oe+"#housetype").val()?$(oe+".housetypeother").addClass("hidden"):$(oe+".housetypeother").removeClass("hidden")}),I(),$(oe+"select").change(function(){I()}),$(oe+".checkbox-inline").click(function(){function e(e){$(oe+e)[0].checked===!0?($(oe+e).val("true"),$(oe+e+"hidden")[0].disabled=!0):$(oe+e+"hidden")[0].disabled=!1}e("#infantcare"),e("#childcare"),e("#elderlycare"),e("#disabledcare"),e("#housework"),e("#cooking"),e("#handledog"),e("#handlecat")}),$("#editemployersave").on("click",function(){$(".editemployer #saveOrSubmit").val("save")}),$("#editemployersubmit").on("click",function(){$(".editemployer #saveOrSubmit").val("submit")}),$(".editemployer .editemployerformbuttons #editemployersave").length&&($(".editemployer #editemployersave").css({position:"fixed",bottom:"50px",right:"35px",width:"15%","min-width":"60px"}).text("Save"),$(window).scroll(function(){var e=$(".editemployer .editemployerformbuttons").offset().top,t=$(".editemployer #editemployersave").offset().top;t>e&&$(".editemployer #editemployersave").css({position:"",bottom:"",right:"",width:"","min-width":""}).text("Save My Progress")})),$(".editemployer").submit(function(e){if("Landed"===$(oe+"#housetype").val()&&$(oe+"#unitno").val("N/A"),"Others"!==$(oe+"#housetype").val()&&$(oe+".housetypeother").val(""),$(oe+"#contactnumber").val()||$(oe+"#contactnumber").val("0"),B())e.preventDefault(),t("Wrong format provided! Please provide Numbers in the yellow boxes.");else if(_())e.preventDefault(),t("Exceeded Character Limit! Please resolve the errors in yellow.");else{var a=$('input[name="employer[saveOrSubmit]"]').val();"submit"===a&&D()&&(e.preventDefault(),t("Fill in all required '*' fields! Please resolve the errors in red."))}})}if($(".edithelper").length){e()&&(window.alert("For a better website experience, please use other browsers such as Chrome, Firefox or Safari."),$(".edithelper .skillsradio input").css("display","inline-block"));var ne=$(".edithelper").data("helper")[0],ie=".edithelper .form-group ";A(".workingexperienceyear",50),E("#firstcountry"),E("#secondcountry"),E("#thirdcountry"),q(),F(ne.skills.english,"english"),F(ne.skills.singapore,"singapore"),F(ne.skills.infantcare,"infantcare"),F(ne.skills.childcare,"childcare"),F(ne.skills.elderlycare,"elderlycare"),F(ne.skills.disabledcare,"disabledcare"),F(ne.skills.housework,"housework"),F(ne.skills.cooking,"cooking"),F(ne.skills.handledog,"handledog"),F(ne.skills.handlecat,"handlecat"),M(),$(ie+"#nationality").change(function(){var e=$(ie+"#nationality").val(),t=["Philippines","India","Indonesia","Myanmar","Sri_Lanka"],a=["+63","+91","+62","+95","+94"],o=t.indexOf(e);o>=0&&$(ie+"#countrycode").val(a.slice(o,o+1))}),ne.profile.children>0&&$(".edithelper .form-group-children").removeClass("hidden"),$(ie+"#children").change(function(){$(ie+"#children").val()>0?$(".edithelper .form-group-children").removeClass("hidden"):$(".edithelper .form-group-children").addClass("hidden")}),$("#edithelpersave").on("click",function(){$(".edithelper #saveOrSubmit").val("save")}),$("#edithelpersubmit").on("click",function(){$(".edithelper #saveOrSubmit").val("submit")}),$(".edithelper .edithelperformbuttons #edithelpersave").length&&($(".edithelper #edithelpersave").css({position:"fixed",bottom:"30px",right:"35px",width:"15%","min-width":"60px"}).text("Save"),$(window).scroll(function(){var e=$(".edithelper .edithelperformbuttons").offset().top,t=$(".edithelper #edithelpersave").offset().top;t>e&&$(".edithelper #edithelpersave").css({position:"",bottom:"",right:"",width:"","min-width":""}).text("Save My Progress")})),$(".edithelper").submit(function(e){var a=$(ie+"#dob-date").val(),o=$(ie+"#dob-month").val(),n=$(ie+"#dob-year").val();if(""!==a&&""!==o&&""!==n&&$(ie+"#dob").val(new Date(n+"-"+o+"-"+a+"T01:00:00+01:00")),$(ie+"#contactnumber").val()||$(ie+"#contactnumber").val("0"),$(ie+"#children").val()<1&&$(ie+"#ageofyoungest").val("0"),N())e.preventDefault(),t("Wrong format provided! Please provide Numbers in the yellow boxes.");else if(R())e.preventDefault(),t("Exceeded Character Limit! Please resolve the errors in yellow.");else{var i=$('input[name="helper[saveOrSubmit]"]').val();"submit"===i&&Y()&&(e.preventDefault(),t("Fill in all required '*' fields! Please resolve the errors in red."))}})}if($(".profile-changeidentification").length&&$(".profile-changeidentification").on("click",function(e){e.preventDefault(),swal("Warning","To change identification, send a copy of your Identification to 'support@maidicare.com'.","warning")}),$(".browsepage").length){var re=decodeURIComponent(window.location.search.substring(1)),se=re.replace(/=/g,"~*").replace(/\+/g," ").split("&"),le={};se.forEach(function(e){le[e.split("~*")[0]]=e.split("~*")[1]}),le.query&&($('.browsepage input[name="query"]').val(le.query),$(".browse-content .querytext p span.glyphicon").css("visibility","visible"),le.query.length>30?$(".browsepage .browse-content span.qtext").text("'"+le.query.substring(0,30)+"...'"):$(".browsepage .browse-content span.qtext").text("'"+le.query+"'")),$(".browsepage .browse-pagenumber a.pagenumber"+le.page).addClass("active"),J(le.infantcare,"infantcare"),J(le.childcare,"childcare"),J(le.elderlycare,"elderlycare"),J(le.disabledcare,"disabledcare"),J(le.transfer,"transfer"),J(le.singapore,"singapore"),le.nationality&&$('.browsepage select[name="nationality"]').val(le.nationality),le.religion&&$('.browsepage select[name="religion"]').val(le.religion),le.maritalstatus&&$('.browsepage select[name="maritalstatus"]').val(le.maritalstatus),z(),U(),$('.browsepage input[name="infantcare"], .browsepage input[name="childcare"], .browsepage input[name="elderlycare"], .browsepage input[name="disabledcare"], .browsepage input[name="transfer"], .browsepage input[name="singapore"], .browsepage select[name="nationality"], .browsepage select[name="religion"], .browsepage select[name="maritalstatus"]').on("change",function(){$('.browse-menu input[name="page"]').val(1),window.history.replaceState(null,null,window.location.href.replace(/(page=)[0-9]{1,}/,"page=1")),L()}),$(".browsepage .clearquerytext").on("click",function(){$('.browsepage input[name="query"]').val(""),$(".browsepage").submit()}),$(".browsepage .clearfilter").on("click",function(){function e(e,t){"checkbox"===t?$('.browsepage input[name="'+e+'"]:checked').attr("checked",!1):"radio"===t?$('.browsepage input[name="'+e+'"]').val("All"):"ddl"===t&&$('.browsepage select[name="'+e+'"]').val("All")}e("infantcare","checkbox"),e("childcare","checkbox"),e("elderlycare","checkbox"),e("disabledcare","checkbox"),e("transfer","radio"),e("singapore","radio"),e("nationality","ddl"),e("religion","ddl"),e("maritalstatus","ddl"),$(".browsepage").submit()}),$("#browseform").submit(function(){var e=$('.browsepage input[name="query"]').val();""!==e&&$('.browse-menu input[name="page"]').val(1)}),$(".browsepage button.togglefilter").on("click",function(){$(".browsepage .browse-sidebar").slideToggle("fast",function(){$(".browsepage .browse-sidebar").is(":visible")?($(".browsepage button.togglefilter").css({"background-color":"black",color:"orange"}),$("html, body").animate({scrollTop:$(".browsepage").offset().top-50},1e3,"easeInOutExpo")):$(".browsepage button.togglefilter").css({"background-color":"orange",color:"white"})})})}if($(".browseview").length){var ce=$(".browseview").data("hirearray"),pe=[];if(ce.forEach(function(e,t){pe.push(e.huserid)}),$(".browseview .hirehelper").val()){var ue=$(".browseview .hirehelper").val().split("&")[0],de=$(".browseview .hirehelper").val().split("&")[1];pe.indexOf(ue)>=0&&$(".browseview .hirehelper").removeClass("btn-primary").addClass("btn-secondary").text("Selected")}W(),$(".browseview .hirehelper").on("click",function(){$.ajax({url:"/browse/hire",type:"POST",data:JSON.stringify({helperuserid:ue,helperid:de}),dataType:"json",contentType:"application/json",cache:!1,success:function(e){"success"===e.status?a(e.message):"error"===e.status?t(e.message):"redirect"===e.status&&(window.location=e.message)},error:function(e){e&&t("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})}),$(".browseview .skypehelper").on("click",function(){swal({title:"Skype",text:"Request a Skype Call?",type:"warning",showCancelButton:!0,confirmButtonColor:"rgb(38, 166, 91)",cancelButtonColor:"rgb(221, 75, 57)",confirmButtonText:"Yes",cancelButtonText:"No",confirmButtonClass:"btn-success",cancelButtonClass:"btn-danger",buttonsStyling:!0}).then(function(){$.ajax({url:"/browse/skype",type:"POST",data:JSON.stringify({helperuserid:ue,helperid:de}),dataType:"json",contentType:"application/json",cache:!1,success:function(e){"success"===e.status?a(e.message):"error"===e.status?t(e.message):"redirect"===e.status&&(window.location=e.message)},error:function(e){e&&t("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})})})}if($(".profile-hire").length){var fe=$(".profile-hire").data("userid");$('.profile-hire-filter select[name="filter"]').on("change",function(){var e=$('.profile-hire-filter select[name="filter"]').val();$.ajax({url:"/users/"+fe+"/shortlists/filter",type:"POST",data:JSON.stringify({filter:e}),dataType:"json",contentType:"application/json",cache:!1,success:function(t){function a(e){return new Date(1e3*parseInt(e.substring(0,8),16))}var o=["All","confirmed","accepted","pending","rejected"],n=["#95A5A6","#1E824C","#3A539B","#E87E04","#96281B"],i=o.indexOf(e);$(".profile-hire-filter").css("background-color",n.slice(i,i+1)),$(".hireContainer").empty();var r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.hireInfo.length>0&&t.hireInfo.forEach(function(e){function o(e){var t="";return t=e.user.profile.photo.version?"https://res.cloudinary.com/dbjdqrw9o/image/upload/w_300,h_300,c_thumb,g_face/v"+e.user.profile.photo.version+"/"+e.user._id+"."+e.user.profile.photo.format:"/images/noimg.jpg",'<a href="/browse/view/"'+e.user._id+"><img src="+t+' alt="profile image"></a>'}function n(e){var a="";return"employer"===t.role?a='<div class="profile-hire-userpic">'+o(e)+"</div>":"helper"===t.role&&(a='<div class="profile-hire-userpic"><a href="/users/employer/"'+e.user.userid+'><img src="/images/employer.png" alt="profile image"></a></div>'),
'<div class="col-md-3 col-sm-3">'+a+"</div>"}function i(e){var a="";if("helper"===t.role){var o="";o="Others"===e.user.profile.housetype.split(",")[0]?e.user.profile.housetype.replace(/,/,", "):e.user.profile.housetype.split(",")[0].replace(/_/g," "),a='<a href="/users/employer/'+e.user.userid+'">'+e.user.profile.fullname+"</a><p>"+o+" | "+e.user.profile.maritalstatus+"</p>"}else{var n="";n=e.user.transfer?"<p>"+e.user.profile.nationality+" | "+e.user.profile.maritalstatus+" | Transfer</p>":"<p>"+e.user.profile.nationality+" | "+e.user.profile.maritalstatus+"</p>",a='<a href="/browse/view/'+e.user._id+'">'+e.user.profile.firstname+"</a>"+n}return'<div class="col-md-6 col-sm-6">'+a+'<div class="well">'+e.message+"</div></div>"}function s(e){var a="";return"helper"===t.role&&"pending"===e.status&&(a='<button class="btn btn-success userresponse" value="'+e._id+',Accept">Accept</button><button class="btn btn-danger userresponse" value="'+e._id+',Reject">Reject</button>'),"helper"===t.role&&"accepted"===e.status&&(a='<button class="btn btn-danger userresponse" value="'+e._id+',Reject">Reject</button>'),"employer"===t.role&&"pending"===e.status?a='<button class="btn btn-danger userresponse" value="'+e._id+',Reject">Reject</button>':"employer"===t.role&&"accepted"===e.status&&(a='<button class="btn btn-success userresponse" value="'+e._id+',Confirm">Confirm</button><button class="btn btn-danger userresponse" value="'+e._id+',Reject">Reject</button>'),'<div class="col-md-3 col-sm-3"><div class="profile-hire-response"><input type="hidden" class="helperinput" name="helperinput" value="">'+a+"</div></div>"}function l(e){return'<div class="col-md-12 col-sm-12 profile-hire-content"><h4>'+u+'</h4><h4 class="right" id='+e.status+">"+e.status+"</h4><hr>"+n(e,t.role)+i(e)+s(e)+"</div>"}var c=a(e._id.toString()),p=c.getMinutes()<10?"0"+c.getMinutes():c.getMinutes(),u=c.getDate().toString()+" "+r[c.getMonth()]+" "+c.getFullYear().toString()+", "+c.getHours()+":"+p;$(".hireContainer").append(l(e)),G()})},error:function(e){e&&t("Something went wrong! Please refresh the page and try again.")}})}),G()}if($(".ajax-forgotpassword").length&&$(".ajax-forgotpassword").submit(function(e){e.preventDefault();var n=$('.ajax-forgotpassword input[name="email"]').val();o(n)?$.ajax({url:"/password/forgot",type:"POST",data:JSON.stringify({email:n}),dataType:"json",contentType:"application/json",success:function(e){"success"===e.status?a(e.message):(t(e.message),$('.ajax-forgotpassword input[name="email"]').val(""))},error:function(e){e&&t("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}}):t("Please provide a valid email.")}),$(".ajax-resetpassword").length&&$(".ajax-resetpassword").submit(function(e){e.preventDefault();var a=window.location.pathname.split("/password/validate/")[1],o=a.split("&")[0],n=$('.ajax-resetpassword input[name="password"]').val(),i=$('.ajax-resetpassword input[name="confirm"]').val();n.length>=6&&i.length>=6?n===i?$.ajax({url:"/password/reset",type:"POST",data:JSON.stringify({userid:o,password:n,confirm:i}),dataType:"json",contentType:"application/json",success:function(e){"success"===e.status?window.location=e.url:t(e.message)},error:function(e){e&&t("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}}):t("The passwords do not match."):t("Password must be at least 6 characters.")}),$(".profile-activate-reset").length>0&&$(".profile-activate-reset").on("click",function(){var e=$(".profile-activate-reset").data("id");$.ajax({url:"/users/"+e+"/activate/reset",type:"POST",cache:!1,success:function(e){"success"===e.status&&a(e.message)},error:function(e){e&&t("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})}),$(".postadmincode").length>0&&$(".postadmincode").on("click",function(){$.ajax({url:"/admin/newcode",type:"POST",error:function(e){e&&t("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})}),$(".admin-remove-navbar").length>0){if($(".navbar-brand").text("Admin").attr("href","/admin"),$(".nav.navbar-nav.navbar-right").empty(),$(".nav.navbar-nav.navbar-right").append('<li><a target="_blank" href="/admin/email">Send an Email</a></li><li><a class="btn btn-danger"href="/logout">Logout</a></li>'),H(),$(".admin-shortlist-search").length>0&&$(".admin-shortlist-search").on("click",function(){var e=$("input#hireid").val();""!==e&&(window.location="/admin/shortlists/"+e)}),$(".adminUserAccount").length>0){var he=$(".adminUserAccount").data("admin")[0].userid;K(he.available,"available"),K(he.recruit,"recruit"),K(he.hire,"hire"),K(he.activate.status,"activatestatus")}if($(".admin-delete-user").length>0&&$(".admin-delete-user").on("click",function(){var e=$(".admin-delete-user").val(),o=e.split("&")[0],n=e.split("&")[1],i=e.split("&")[2];swal({title:"Type email to Delete",text:i,input:"email",showCancelButton:!0,confirmButtonColor:"rgb(221, 75, 57)",confirmButtonText:"Delete",showLoaderOnConfirm:!0,preConfirm:function(e){return new Promise(function(t,a){setTimeout(function(){e===i?t():a("Input does not match Email.")},1e3)})}}).then(function(e){$.ajax({url:"/admin/users/delete",type:"POST",cache:!1,data:JSON.stringify({id:o,role:n}),dataType:"json",contentType:"application/json",success:function(e){"success"===e.status?(a("Account Deleted! Redirecting to Admin Menu..."),setTimeout(function(){window.location="/admin"},2500)):t(e.message)},error:function(e){e&&t("Please refresh the page and try again.")}})})}),$(".admin-helper-transfer").length>0&&$(".admin-helper-transfer").on("click",function(){$.ajax({url:"/admin/users/helpertransfer",type:"POST",cache:!1,data:JSON.stringify({id:$(".admin-helper-transfer").val()}),dataType:"json",contentType:"application/json",success:function(e){"success"===e.status?window.location.reload():t(e.message)},error:function(e){e&&t("Please refresh the page and try again.")}})}),$(".admin-hire-filter").length>0){var me=window.location.pathname.split("/admin/shortlists/all/")[1];$('.admin-hire-filter select[name="filter"]').val(me),$('.admin-hire-filter select[name="filter"]').on("change",function(){var e=$('.admin-hire-filter select[name="filter"]').val();window.location="/admin/shortlists/all/"+e})}$(".admin-change-hire-status").length>0&&$(".admin-change-hire-status select#status").on("change",function(){var e=$(this).data("hireid"),a=$(this).val();$.ajax({url:"/admin/shortlists/"+e,type:"POST",cache:!1,data:JSON.stringify({status:a}),dataType:"json",contentType:"application/json",success:function(e){window.location.reload()},error:function(e){e&&t("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})}),$(".export-hire-data").length>0&&$(".export-hire-data").on("click",function(){$.ajax({url:"/admin/shortlists/"+$(this).val()+"/export",type:"POST",cache:!1,success:function(e){function t(e,t){var a="data:application/json;charset=utf-8,"+JSON.stringify(e),o=encodeURI(a),n=document.createElement("a");n.setAttribute("href",o),n.setAttribute("download",t),n.click()}"success"===e.status&&(t(e.helperData,"helper_"+e.helperData.userid.local.email.replace(".",",")),t(e.employerData,"employer_"+e.employerData.userid.local.email.replace(".",",")))},error:function(e){e&&t("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})}),$(".admin-email-all-inactive-helper").length>0&&($(".admin-email-all-inactive-helper").on("click",function(){$.ajax({url:"/admin/inactive/helpers",type:"POST",cache:!1,success:function(e){"success"===e.status?a(e.message):t(e.message)},error:function(e){e&&t("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})}),$(".admin-email-inactive-helper").on("click",function(){var e=$(this).val();$.ajax({url:"/admin/inactive/helpers/"+e,type:"POST",cache:!1,success:function(e){"success"===e.status?a(e.message):t(e.message)},error:function(e){e&&t("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})})),$(".admin-email-inactive-hire").length>0&&$(".admin-email-inactive-hire").on("click",function(){var e=$(this).val();$.ajax({url:"/admin/inactive/shortlists",type:"POST",cache:!1,data:JSON.stringify({userids:e}),dataType:"json",contentType:"application/json",success:function(e){"success"===e.status&&a(e.message)},error:function(e){e&&t("Please refresh the page and try again. You can also contact us at 'support@maidicare.com'.")}})})}$("#demo").on("click",function(){$.ajax({url:"/api/users/data",type:"GET",dataType:"json"}).done(function(e){e.forEach(function(e){$.ajax({type:"POST",url:"/api/users/demo",data:e})})})}),$("#remove").on("click",function(){$.ajax({type:"delete",url:"/api/users/remove"})})});
